define("modules/datatree/app",["../../lib/app","../../plugins/bootstrap/js/bootstrap","../../plugins/uniform/jquery.uniform","../../plugins/jquery-cookie/jquery-cookie","../../plugins/jquery-json/2.4/jquery-json","../../plugins/moment/moment","../../lib/com/form","../../lib/com/alert","../../lib/com/dialog","../../lib/tpl/dialog.tpl","../../lib/com/select","../../lib/com/checkboxes","../../lib/tool/tool","../../lib/tool/url","../../lib/tool/str","../../lib/core/tpl","../../lib/core/layout","../../conf/locale.zh_CN","../../conf/locale.en_US","../../lib/service","../../lib/core/ajax","../../conf/api","../../conf/route","../../plugins/number-spinner/module","../../plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin.css","../../plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin","../../plugins/datatree/module","../../plugins/datatree/3.2.1/themes/default/style.css","../../plugins/datatree/3.2.1/jstree","../../plugins/datatree/extend/plugin.added"],function(a,b,c){var d=a("../../lib/app");a("../../plugins/number-spinner/module"),a("../../plugins/datatree/module"),d.page.index=function(){$p.dataTree("#tree",{core:{data:[{text:"Root node",state:{opened:!0},children:[{id:1,text:"Child node 1",state:{selected:!0},icon:"fa fa-flash"},{text:"Child node 2",state:{disabled:!0}},"Child node 3"]}]}})},d.page.advanced=function(){var a=[{text:"Root node",state:{opened:!0},children:[{text:"Child node 1",id:"111",state:{selected:!0},icon:"fa fa-flash"},{text:"Child node 2",state:{disabled:!0}},"Child node 3"]}];$p.dataTree("#tree",{plugins:["checkbox","search","added"],core:{data:a},search:{input:"#input_search"},added:{numberSpinner:{decimals:2,min:-10,max:100}},change:function(a,b){console.log(b)}})},c.exports=d}),define("lib/app",["plugins/bootstrap/js/bootstrap","plugins/uniform/jquery.uniform","plugins/jquery-cookie/jquery-cookie","plugins/jquery-json/2.4/jquery-json","plugins/moment/moment","lib/com/form","lib/com/alert","lib/com/dialog","lib/com/select","lib/com/checkboxes","lib/tool/tool","lib/tool/url","lib/tool/str","lib/core/tpl","lib/core/layout","conf/locale.zh_CN","conf/locale.en_US","lib/service","lib/core/ajax","conf/api","conf/route"],function(a,b,c){function d(){pagurian.com={alert:pagurian.alert,dialog:pagurian.dialog,checkboxs:pagurian.checkboxs,form:pagurian.form,portlet:pagurian.portlet,select:pagurian.select},pagurian.plugin={dataListView:pagurian.dataListView,sizer:pagurian.sizer,summary:pagurian.summary,dataTable:pagurian.dataTable,datePicker:pagurian.datePicker,dateRangePicker:pagurian.datePicker,dateTimePicker:pagurian.datePicker,echarts:pagurian.datePicker,slider:pagurian.slider}}a("plugins/bootstrap/js/bootstrap"),a("plugins/uniform/jquery.uniform"),a("plugins/jquery-cookie/jquery-cookie"),a("plugins/jquery-json/2.4/jquery-json"),a("plugins/moment/moment"),a("lib/com/form"),a("lib/com/alert"),a("lib/com/dialog"),a("lib/com/select"),a("lib/com/checkboxes"),a("lib/tool/tool"),a("lib/tool/url"),a("lib/tool/str"),a("lib/core/tpl");var e=a("lib/core/layout"),f={zh_CN:a("conf/locale.zh_CN"),en_US:a("conf/locale.en_US")};pagurian.locale=f[pagurian.language],pagurian.lib={service:a("lib/service"),api:a("conf/api"),route:a("conf/route")},pagurian.log=function(){window.console&&pagurian.debug&&(1===arguments.length&&console.log(arguments[0]),2===arguments.length&&console[arguments[1]](arguments[0]))};var g={page:{},events:{},updateUniform:function(){e.updateUniform()},activateCurrentMenu:function(){e.activateCurrentMenu()},init:function(){d(),e.init(),e.custom(),e.activateCurrentMenu(),e.resize(function(){g.events.resize&&"function"==typeof g.events.resize&&g.events.resize()})}};g.init(),c.exports=g}),define("plugins/bootstrap/js/bootstrap",[],function(a,b,c){if("undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]'),b=!0;if(a.length){var c=this.$element.find("input");"radio"===c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?b=!1:a.find(".active").removeClass("active")),b&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}b&&this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),/bottom|top/.test(b)){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")}else this.replaceArrow(j-f,j,"top");c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery)}),define("plugins/uniform/jquery.uniform",[],function(a,b,c){!function(a,b){"use strict";function c(a){var b=Array.prototype.slice.call(arguments,1);return a.prop?a.prop.apply(a,b):a.attr.apply(a,b)}function d(a,b,c){var d,e;for(d in c)c.hasOwnProperty(d)&&(e=d.replace(/ |$/g,b.eventNamespace),a.bind(e,c[d]))}function e(a,b,c){d(a,c,{focus:function(){b.addClass(c.focusClass)},blur:function(){b.removeClass(c.focusClass),b.removeClass(c.activeClass)},mouseenter:function(){b.addClass(c.hoverClass)},mouseleave:function(){b.removeClass(c.hoverClass),b.removeClass(c.activeClass)},"mousedown touchbegin":function(){
a.is(":disabled")||b.addClass(c.activeClass)},"mouseup touchend":function(){b.removeClass(c.activeClass)}})}function f(a,b){a.removeClass(b.hoverClass+" "+b.focusClass+" "+b.activeClass)}function g(a,b,c){c?a.addClass(b):a.removeClass(b)}function h(a,b,c){var d="checked",e=b.is(":"+d);b.prop?b.prop(d,e):e?b.attr(d,d):b.removeAttr(d),g(a,c.checkedClass,e)}function i(a,b,c){g(a,c.disabledClass,b.is(":disabled"))}function j(a,b,c){switch(c){case"after":return a.after(b),a.next();case"before":return a.before(b),a.prev();case"wrap":return a.wrap(b),a.parent()}return null}function k(b,d,e){var f,g,h;return e||(e={}),e=a.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},e),f=a("<div />"),g=a("<span />"),d.autoHide&&b.is(":hidden")&&"none"===b.css("display")&&f.hide(),e.divClass&&f.addClass(e.divClass),d.wrapperClass&&f.addClass(d.wrapperClass),e.spanClass&&g.addClass(e.spanClass),h=c(b,"id"),d.useID&&h&&c(f,"id",d.idPrefix+"-"+h),e.spanHtml&&g.html(e.spanHtml),f=j(b,f,e.divWrap),g=j(b,g,e.spanWrap),i(f,b,d),{div:f,span:g}}function l(b,c){var d;return c.wrapperClass?(d=a("<span />").addClass(c.wrapperClass),d=j(b,d,"wrap")):null}function m(){var b,c,d,e;return e="rgb(120,2,153)",c=a('<div style="width:0;height:0;color:'+e+'">'),a("body").append(c),d=c.get(0),b=window.getComputedStyle?window.getComputedStyle(d,"").color:(d.currentStyle||d.style||{}).color,c.remove(),b.replace(/ /g,"")!==e}function n(b){return b?a("<span />").text(b).html():""}function o(){return navigator.cpuClass&&!navigator.product}function p(){return"undefined"!=typeof window.XMLHttpRequest}function q(a){var b;return a[0].multiple?!0:(b=c(a,"size"),b&&!(1>=b))}function r(){return!1}function s(a,b){var c="none";d(a,b,{"selectstart dragstart mousedown":r}),a.css({MozUserSelect:c,msUserSelect:c,webkitUserSelect:c,userSelect:c})}function t(a,b,c){var d=a.val();""===d?d=c.fileDefaultHtml:(d=d.split(/[\/\\]+/),d=d[d.length-1]),b.text(d)}function u(a,b,c){var d,e;for(d=[],a.each(function(){var a;for(a in b)Object.prototype.hasOwnProperty.call(b,a)&&(d.push({el:this,name:a,old:this.style[a]}),this.style[a]=b[a])}),c();d.length;)e=d.pop(),e.el.style[e.name]=e.old}function v(a,b){var c;c=a.parents(),c.push(a[0]),c=c.not(":visible"),u(c,{visibility:"hidden",display:"block",position:"absolute"},b)}function w(a,b){return function(){a.unwrap().unwrap().unbind(b.eventNamespace)}}var x=!0,y=!1,z=[{match:function(a){return a.is("a, button, :submit, :reset, input[type='button']")},apply:function(a,b){var g,h,j,l,m;return h=b.submitDefaultHtml,a.is(":reset")&&(h=b.resetDefaultHtml),l=a.is("a, button")?function(){return a.html()||h}:function(){return n(c(a,"value"))||h},j=k(a,b,{divClass:b.buttonClass,spanHtml:l()}),g=j.div,e(a,g,b),m=!1,d(g,b,{"click touchend":function(){var b,d,e,f;m||a.is(":disabled")||(m=!0,a[0].dispatchEvent?(b=document.createEvent("MouseEvents"),b.initEvent("click",!0,!0),d=a[0].dispatchEvent(b),a.is("a")&&d&&(e=c(a,"target"),f=c(a,"href"),e&&"_self"!==e?window.open(f,e):document.location.href=f)):a.click(),m=!1)}}),s(g,b),{remove:function(){return g.after(a),g.remove(),a.unbind(b.eventNamespace),a},update:function(){f(g,b),i(g,a,b),a.detach(),j.span.html(l()).append(a)}}}},{match:function(a){return a.is(":checkbox")},apply:function(a,b){var c,g,j;return c=k(a,b,{divClass:b.checkboxClass}),g=c.div,j=c.span,e(a,g,b),d(a,b,{"click touchend":function(){h(j,a,b)}}),h(j,a,b),{remove:w(a,b),update:function(){f(g,b),j.removeClass(b.checkedClass),h(j,a,b),i(g,a,b)}}}},{match:function(a){return a.is(":file")},apply:function(b,g){function h(){t(b,n,g)}var l,m,n,p;return l=k(b,g,{divClass:g.fileClass,spanClass:g.fileButtonClass,spanHtml:g.fileButtonHtml,spanWrap:"after"}),m=l.div,p=l.span,n=a("<span />").html(g.fileDefaultHtml),n.addClass(g.filenameClass),n=j(b,n,"after"),c(b,"size")||c(b,"size",m.width()/10),e(b,m,g),h(),o()?d(b,g,{click:function(){b.trigger("change"),setTimeout(h,0)}}):d(b,g,{change:h}),s(n,g),s(p,g),{remove:function(){return n.remove(),p.remove(),b.unwrap().unbind(g.eventNamespace)},update:function(){f(m,g),t(b,n,g),i(m,b,g)}}}},{match:function(a){if(a.is("input")){var b=(" "+c(a,"type")+" ").toLowerCase(),d=" color date datetime datetime-local email month number password search tel text time url week ";return d.indexOf(b)>=0}return!1},apply:function(a,b){var d,f;return d=c(a,"type"),a.addClass(b.inputClass),f=l(a,b),e(a,a,b),b.inputAddTypeAsClass&&a.addClass(d),{remove:function(){a.removeClass(b.inputClass),b.inputAddTypeAsClass&&a.removeClass(d),f&&a.unwrap()},update:r}}},{match:function(a){return a.is(":radio")},apply:function(b,g){var j,l,m;return j=k(b,g,{divClass:g.radioClass}),l=j.div,m=j.span,e(b,l,g),d(b,g,{"click touchend":function(){a.uniform.update(a(':radio[name="'+c(b,"name")+'"]'))}}),h(m,b,g),{remove:w(b,g),update:function(){f(l,g),h(m,b,g),i(l,b,g)}}}},{match:function(a){return!(!a.is("select")||q(a))},apply:function(b,c){var g,h,j,l;return c.selectAutoWidth&&v(b,function(){l=b.width()}),g=k(b,c,{divClass:c.selectClass,spanHtml:(b.find(":selected:first")||b.find("option:first")).html(),spanWrap:"before"}),h=g.div,j=g.span,c.selectAutoWidth?v(b,function(){u(a([j[0],h[0]]),{display:"block"},function(){var a;a=j.outerWidth()-j.width(),h.width(l+a),j.width(l)})}):h.addClass("fixedWidth"),e(b,h,c),d(b,c,{change:function(){j.html(b.find(":selected").html()),h.removeClass(c.activeClass)},"click touchend":function(){var a=b.find(":selected").html();j.html()!==a&&b.trigger("change")},keyup:function(){j.html(b.find(":selected").html())}}),s(j,c),{remove:function(){return j.remove(),b.unwrap().unbind(c.eventNamespace),b},update:function(){c.selectAutoWidth?(a.uniform.restore(b),b.uniform(c)):(f(h,c),j.html(b.find(":selected").html()),i(h,b,c))}}}},{match:function(a){return!(!a.is("select")||!q(a))},apply:function(a,b){var c;return a.addClass(b.selectMultiClass),c=l(a,b),e(a,a,b),{remove:function(){a.removeClass(b.selectMultiClass),c&&a.unwrap()},update:r}}},{match:function(a){return a.is("textarea")},apply:function(a,b){var c;return a.addClass(b.textareaClass),c=l(a,b),e(a,a,b),{remove:function(){a.removeClass(b.textareaClass),c&&a.unwrap()},update:r}}}];o()&&!p()&&(x=!1),a.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},a.fn.uniform=function(b){var c=this;return b=a.extend({},a.uniform.defaults,b),y||(y=!0,m()&&(x=!1)),x?(b.resetSelector&&a(b.resetSelector).mouseup(function(){window.setTimeout(function(){a.uniform.update(c)},10)}),this.each(function(){var c,d,e,f=a(this);if(f.data("uniformed"))return void a.uniform.update(f);for(c=0;c<z.length;c+=1)if(d=z[c],d.match(f,b))return e=d.apply(f,b),f.data("uniformed",e),void a.uniform.elements.push(f.get(0))})):this},a.uniform.restore=a.fn.uniform.restore=function(c){c===b&&(c=a.uniform.elements),a(c).each(function(){var b,c,d=a(this);c=d.data("uniformed"),c&&(c.remove(),b=a.inArray(this,a.uniform.elements),b>=0&&a.uniform.elements.splice(b,1),d.removeData("uniformed"))})},a.uniform.update=a.fn.uniform.update=function(c){c===b&&(c=a.uniform.elements),a(c).each(function(){var b,c=a(this);b=c.data("uniformed"),b&&b.update(c,b.options)})}}(jQuery)}),define("plugins/jquery-cookie/jquery-cookie",[],function(a,b,c){!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(b){}}var e=/\+/g,f=a.cookie=function(e,g,h){if(void 0!==g){if(h=a.extend({},f.defaults,h),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g=f.json?JSON.stringify(g):String(g),document.cookie=[f.raw?e:encodeURIComponent(e),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var k=f.raw?b:c,l=document.cookie.split("; "),m=e?void 0:{},n=0,o=l.length;o>n;n++){var p=l[n].split("="),q=k(p.shift()),r=k(p.join("="));if(e&&e===q){m=d(r);break}e||(m[q]=d(r))}return m};f.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)?(a.cookie(b,"",a.extend({},c,{expires:-1})),!0):!1}})}),define("plugins/jquery-json/2.4/jquery-json",[],function(require,exports,module){!function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(a){if(null===a)return"null";var b,c,d,e,f=$.type(a);if("undefined"!==f){if("number"===f||"boolean"===f)return String(a);if("string"===f)return $.quoteString(a);if("function"==typeof a.toJSON)return $.toJSON(a.toJSON());if("date"===f){var g=a.getUTCMonth()+1,h=a.getUTCDate(),i=a.getUTCFullYear(),j=a.getUTCHours(),k=a.getUTCMinutes(),l=a.getUTCSeconds(),m=a.getUTCMilliseconds();return 10>g&&(g="0"+g),10>h&&(h="0"+h),10>j&&(j="0"+j),10>k&&(k="0"+k),10>l&&(l="0"+l),100>m&&(m="0"+m),10>m&&(m="0"+m),'"'+i+"-"+g+"-"+h+"T"+j+":"+k+":"+l+"."+m+'Z"'}if(b=[],$.isArray(a)){for(c=0;c<a.length;c++)b.push($.toJSON(a[c])||"null");return"["+b.join(",")+"]"}if("object"==typeof a){for(c in a)if(hasOwn.call(a,c)){if(f=typeof c,"number"===f)d='"'+c+'"';else{if("string"!==f)continue;d=$.quoteString(c)}f=typeof a[c],"function"!==f&&"undefined"!==f&&(e=$.toJSON(a[c]),b.push(d+":"+e))}return"{"+b.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(a){return a.match(escape)?'"'+a.replace(escape,function(a){var b=meta[a];return"string"==typeof b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"'}}(jQuery)}),define("plugins/moment/moment",[],function(a,b,c){(function(b){function d(a,b){return function(c){return k(a.call(this,c),b)}}function e(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function f(){}function g(a){i(this,a)}function h(a){var b=this._data={},c=a.years||a.year||a.y||0,d=a.months||a.month||a.M||0,e=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,g=a.hours||a.hour||a.h||0,h=a.minutes||a.minute||a.m||0,i=a.seconds||a.second||a.s||0,k=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=k+1e3*i+6e4*h+36e5*g,this._days=f+7*e,this._months=d+12*c,b.milliseconds=k%1e3,i+=j(k/1e3),b.seconds=i%60,h+=j(i/60),b.minutes=h%60,g+=j(h/60),b.hours=g%24,f+=j(g/24),f+=7*e,b.days=f%30,d+=j(f/30),b.months=d%12,c+=j(d/12),b.years=c}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function l(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function o(a,b){return b.abbr=a,L[a]||(L[a]=new f),L[a].set(b),L[a]}function p(b){return b?(!L[b]&&M&&a("./lang/"+b),L[b]):H.fn._lang}function q(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function r(a){var b,c,d=a.match(O);for(b=0,c=d.length;c>b;b++)ga[d[b]]?d[b]=ga[d[b]]:d[b]=q(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+="function"==typeof d[b].call?d[b].call(e,a):d[b];return f}}function s(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&P.test(b);)b=b.replace(P,c);return da[b]||(da[b]=r(b)),da[b](a)}function t(a){switch(a){case"DDDD":return S;case"YYYY":return T;case"YYYYY":return U;case"S":case"SS":case"SSS":case"DDD":return R;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return V;case"X":return Y;case"Z":case"ZZ":return W;case"T":return X;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return Q;default:return new RegExp(a.replace("\\",""))}}function u(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=p(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,d=(b+"").match(aa),d&&d[1]&&(c._tzh=~~d[1]),d&&d[2]&&(c._tzm=~~d[2]),d&&"+"===d[0]&&(c._tzh=-c._tzh,c._tzm=-c._tzm)}null==b&&(c._isValid=!1)}function v(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=a._tzh||0,d[4]+=a._tzm||0,c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function w(a){var b,c,d=a._f.match(O),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(t(d[b]).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),ga[d[b]]&&u(d[b],c,a);a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),v(a)}function x(a){for(var b,c,d,e,f=99;a._f.length;){if(b=i({},a),b._f=a._f.pop(),w(b),c=new g(b),c.isValid()){d=c;break}e=n(b._a,c.toArray()),f>e&&(f=e,d=c)}i(a,d)}function y(a){var b,c=a._i;if(Z.exec(c)){for(a._f="YYYY-MM-DDT",b=0;4>b;b++)if(_[b][1].exec(c)){a._f+=_[b][0];break}W.exec(c)&&(a._f+=" Z"),w(a)}else a._d=new Date(c)}function z(a){var c=a._i,d=N.exec(c);c===b?a._d=new Date:d?a._d=new Date(+d[1]):"string"==typeof c?y(a):m(c)?(a._a=c.slice(0),v(a)):a._d=c instanceof Date?new Date(+c):new Date(c)}function A(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function B(a,b,c){var d=K(Math.abs(a)/1e3),e=K(d/60),f=K(e/60),g=K(f/24),h=K(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",K(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,A.apply({},i)}function C(a,b,c){var d=c-b,e=c-a.day();return e>d&&(e-=7),d-7>e&&(e+=7),Math.ceil(H(a).add("d",e).dayOfYear()/7)}function D(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=p().preparse(b)),H.isMoment(b)?(a=i({},b),a._d=new Date(+b._d)):c?m(c)?x(a):w(a):z(a),new g(a))}function E(a,b){H.fn[a]=H.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function F(a){H.duration.fn[a]=function(){return this._data[a]}}function G(a,b){H.duration.fn["as"+a]=function(){return+this/b}}for(var H,I,J="2.0.0",K=Math.round,L={},M="undefined"!=typeof c&&c.exports,N=/^\/?Date\((\-?\d+)/i,O=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Q=/\d\d?/,R=/\d{1,3}/,S=/\d{3}/,T=/\d{1,4}/,U=/[+\-]?\d{1,6}/,V=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,W=/Z|[\+\-]\d\d:?\d\d/i,X=/T/i,Y=/[\+\-]?\d+(\.\d{1,3})?/,Z=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,$="YYYY-MM-DDTHH:mm:ssZ",_=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aa=/([\+\-]|\d\d)/gi,ba="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ca={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},da={},ea="DDD w W M D d".split(" "),fa="M D H h m s w W".split(" "),ga={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return k(~~(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(~~(a/60),2)+":"+k(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(~~(10*a/6),4)},X:function(){return this.unix()}};ea.length;)I=ea.pop(),ga[I+"o"]=e(ga[I]);for(;fa.length;)I=fa.pop(),ga[I+I]=d(ga[I],2);for(ga.DDDD=d(ga.DDD,3),f.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=H([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return C(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},H=function(a,b,c){return D({_i:a,_f:b,_l:c,_isUTC:!1})},H.utc=function(a,b,c){return D({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},H.unix=function(a){return H(1e3*a)},H.duration=function(a,b){var c,d=H.isDuration(a),e="number"==typeof a,f=d?a._data:e?{}:a;return e&&(b?f[b]=a:f.milliseconds=a),c=new h(f),d&&a.hasOwnProperty("_lang")&&(c._lang=a._lang),c},H.version=J,H.defaultFormat=$,H.lang=function(a,b){return a?(b?o(a,b):L[a]||p(a),void(H.duration.fn._lang=H.fn._lang=p(a))):H.fn._lang._abbr},H.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),p(a)},H.isMoment=function(a){return a instanceof g},H.isDuration=function(a){return a instanceof h},H.fn=g.prototype={clone:function(){return H(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return H.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._a?this._isValid=!n(this._a,(this._isUTC?H.utc(this._a):H(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){var b=s(this,a||H.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?H.duration(+b,a):H.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?H(a).utc():H(a).local(),g=6e4*(this.zone()-f.zone());return b&&(b=b.replace(/s$/,"")),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-H(this).startOf("month")-(f-H(f).startOf("month")))/d,"year"===b&&(e/=12)):(d=this-f-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?d/864e5:"week"===b?d/6048e5:d),c?e:j(e)},from:function(a,b){return H.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(H(),a)},calendar:function(){var a=this.diff(H().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<H([this.year()]).zone()||this.zone()<H([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a=a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.day(0),this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+H(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+H(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+H(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return H.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=K((H(this).startOf("day")-H(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},isoWeek:function(a){var b=C(this,1,4);return null==a?b:this.add("d",7*(a-b))},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},lang:function(a){return a===b?this._lang:(this._lang=p(a),this)}},I=0;I<ba.length;I++)E(ba[I].toLowerCase().replace(/s$/,""),ba[I]);E("year","FullYear"),H.fn.days=H.fn.day,H.fn.weeks=H.fn.week,H.fn.isoWeeks=H.fn.isoWeek,H.duration.fn=h.prototype={weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=B(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},lang:H.fn.lang};for(I in ca)ca.hasOwnProperty(I)&&(G(I,ca[I]),F(I.toLowerCase()));G("Weeks",6048e5),H.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),M&&(c.exports=H),"undefined"==typeof ender&&(this.moment=H),"function"==typeof define&&define.amd&&define("moment",[],function(){return H})}).call(this)}),define("lib/com/form",[],function(a,b,c){function d(a,b){this.element=a instanceof jQuery?a:$(a),this.options={isAjaxRequest:!0,submitButton:this.element.find(".btn[type='submit']")},this.init=function(){var c,d=this;return $.extend(!0,this.options,b),this.options.submitButton instanceof jQuery||(this.options.submitButton=$(a+" "+this.options.submitButton)),c=this.options.submitButton,c.data("text",c.text()),c.click(function(){return $(this).addClass("disabled"),d.element.valid()?void d.submit():void d.complete()}),this.validation(),this},this.reset=function(){return this.element.find("input[type='text'],input[type='hidden'],input[type='file'],textarea").val(""),this.element.find(".help-block").each(function(){var a=$(this).data("tip");a?$(this).text(a).addClass("tip"):$(this).text("")}),this},this.val=function(a){function b(b){if(a[b])return a[b];var c=b.split(".");return $.isPlainObject(a[c[0]])?a[c[0]][c[1]]:null}var c;c=this.element.find("input,textarea,select"),c.each(function(a){var c=$(this),d=c.attr("name");if(d){var e=b(d);if(null!==e)if(c.is("select"))c.find("option[value='"+e+"']").prop("selected",!0);else if("radio"===c.attr("type"))c.prop("checked",c.val()===e.toString()),$.uniform.update(c);else if("checkbox"===c.attr("type")){var f=!1;if($.isArray(e))for(var g=0;g<e.length;g++)c.val()===e[g].toString()&&(f=!0);else f=c.val()===e.toString();c.prop("checked",f),$.uniform.update(c)}else c.val(e)}})},this.validation=function(){if(!this.element.validate)return!1;var a=this,b={errorElement:"span",errorClass:"help-block",focusInvalid:!0,ignore:"",rules:{},invalidHandler:function(a,b){},highlight:function(a){},unhighlight:function(a){},success:function(a){a.closest(".form-group").removeClass("has-error")},submitHandler:function(b){return a.submit(),!1}};return $.extend(b,this.options.validate),this.element.validate(b),this},this.submit=function(){var a=this,b=!0,c=a.element.serializeArray(),d=this.options.submitModelEvent,e=this.options.submitModelParams,f=this.options.submitDataFormat;$.isFunction(f)&&(c=f(c,a.element));var g=this.options.submitError,h=this.options.submitSuccess,i=[c,function(b,c){return a.complete(),c?void($.isFunction(h)&&h(b,c)):void($.isFunction(g)&&g(b,c))}];return $.isFunction(a.options.validate.custom)&&(b=a.options.validate.custom(c,a.element)),$.isFunction(d)?(b?(e&&(i=e.apply(this,i)),d.apply(this,i)):a.complete(),this.options.isAjaxRequest?!1:this):($p.log("submitModelEvent is undefined"),!1)},this.complete=function(a,b){var c=this.options.submitButton;return c.removeClass("disabled"),c.removeAttr("disabled"),c.data("disabled",!1),this}}var e=window;e[PagurianAlias].form=function(a,b){return new d(a,b).init()}}),define("lib/com/alert",[],function(a,b,c){function d(){var a;this.show=function(b,c){var d=c||"success",e=$(".global-message").length>0?$(".global-message").html(b).removeClass().addClass("global-message "+d):$('<div class="global-message '+d+'">'+b+"</div>"),f=!1;return $(".modal").each(function(){$(this).hasClass("in")&&($(this).find(".modal-message").html('<div class="global-message '+d+'">'+b+"</div>"),f=!0)}),f?this:($("body").append(e),e.css({"margin-left":"-"+e.outerWidth()/2+"px"}),clearTimeout(a),a=setTimeout(function(){e.remove()},3e3),this)}}var e=window,f=["success","info","error","warn"];e[PagurianAlias].alert=function(a,b){return(new d).show(a,b)},$.each(f,function(a,b){e[PagurianAlias].alert[b]=function(a){e[PagurianAlias].alert(a,b)}})}),define("lib/com/dialog",[],function(require,exports,module){function Dialog(){function resetForm(a){var b=a.find("input,textarea");b.each(function(){"text"!==$(this).attr("type")&&"hidden"!==$(this).attr("type")&&"TEXTAREA"!==$(this).get(0).tagName||$(this).val("")}),a.find(".help-block").each(function(){var a=$(this).data("tip");a?$(this).text(a).addClass("tip"):$(this).text("")})}var timer,_id="_"+(1e18*Math.random()).toString(36).slice(0,5).toUpperCase();this.language={zh_CN:{title:"提示信息",btn_submit:"确定",btn_cancel:"取消",body:"你好，我是一个模式对话框。"},en_US:{title:"Title",btn_submit:"Confirm",btn_cancel:"Cancel",body:"Hello, I am a dialog ."}},this.init=function(selector,options){var modal=this;this.id=_id,options.id=_id,this.tpl=$p.tpl(template,$.extend(this.language[$p.language||"zh_CN"],options)),$("body").append(this.tpl);var form=$("#modal"+_id+" form");return selector&&($(document).delegate(selector,"click",function(){var params=$(this).data("params");modal.params=eval("("+params+")")||{},modal.show(),$.isFunction(options.initForm)&&options.initForm(modal,form,modal.params)}),$.isFunction(options.preload)&&options.preload(modal)),this.container=$("#modal"+_id),this.container.addClass(options.className),this.submitButton=$("#btn_submit"+_id).click(function(){var a=form.serializeArray()||[];return form.length&&$.isFunction(form.valid)&&!form.valid()?!1:form.length&&!options.validate(modal,a,modal.params)?!1:void($.isFunction(options.submit)&&($(this).addClass("disabled").prop("disabled",!0),$("#modal"+_id+" .submit-waiting").html('<i class="fa fa-spinner fa-spin"></i>'),options.submit(modal,form.serializeArray()||[],modal.params)))}),this.cancelButton=$("#btn_cancel"+_id).click(function(){$.isFunction(options.cancel)&&options.cancel(modal,modal.params)}),this},this.complete=function(){return $("#modal"+_id+" .submit-waiting").html(""),$("#modal"+_id+" .btn").removeClass("disabled").removeAttr("disabled"),this},this.show=function(){return resetForm($("#modal"+_id+" form")),$("#modal"+_id+" .submit-waiting").html(""),$("#modal"+_id+" .modal-message").html(""),$("#modal"+_id+" .btn").removeClass("disabled").removeAttr("disabled"),$("#modal"+_id+" .form-group").removeClass("has-error"),$("#modal"+_id).modal("show"),$("#whisper"+_id).html("").show(),setTimeout(function(){var a=$("#modal"+_id+" .modal-body"),b=a.height(),c=114,d=50,e=50,f=$(window).height()-d-e-c;b>=f&&a.css("max-height",f),a.scrollTop(0)},200),this},this.hide=function(){return $("#modal"+_id).modal("hide"),this},this.showWhisper=function(a,b){var c=$("#whisper"+_id).html(a).show(),d={info:"whisper-success",error:"whisper-error"};return c.removeClass().addClass("whisper "+d[b||"info"]),clearTimeout(timer),timer=setTimeout(function(){c.html("").hide()},3e3),this}}var g=window,template=require("lib/tpl/dialog.tpl");g[PagurianAlias].dialog=function(a,b){return 1===arguments.length?(new Dialog).init(null,arguments[0]):(new Dialog).init(a,b)}}),define("lib/tpl/dialog.tpl",[],'<div class="modal fade" id="modal{id}">\n    <div class="modal-dialog ">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button aria-hidden="true" data-dismiss="modal" class="close" type="button"></button>\n                <h4 class="modal-title">{title}</h4>\n            </div>\n            <div class="modal-body">\n                <div class="modal-message"></div>\n                {body}\n            </div>\n            <div class="modal-footer">\n                <div id="whisper{id}" class="whisper whisper-success"></div>\n                <span class="submit-waiting"></span>\n                <button id="btn_submit{id}" class="btn btn-primary" type="button">{btn_submit}</button>\n                <button id="btn_cancel{id}" data-dismiss="modal" class="btn btn-default" type="button">{btn_cancel}</button>\n            </div>\n        </div>\n    </div>\n</div>\n'),
define("lib/com/select",[],function(a,b,c){function d(){this.init=function(a,b){var c=b.data,d=$(a);d.empty();for(var e="",f=0;f<c.length;f++)e="",b.active===c[f].id&&(e='selected="selected"'),d.append("<option value='"+c[f].id+"' "+e+">"+c[f].name+"</option>");return this}}var e=window;e[PagurianAlias].select=function(a,b){return(new d).init(a,b)}}),define("lib/com/checkboxes",[],function(a,b,c){function d(a,b){this.container=$(a),this.init=function(){var a=this;return this.container.addClass("checkbox-list "+(b.className||"")),this.load(b),this.container.on("click","input[type='checkbox']",function(){for(var c=$(this),d={value:c.val(),text:c.data("text"),checked:c.is(":checked")},e=0;e<a.items.length;e++)a.items[e].value.toString()===c.val()&&(a.items[e].checked=c.is(":checked"));$.isFunction(b.click)&&b.click(d,a.getCheckedItems())}),this},this.load=function(a){this.items=[],this.name=a.name,this.container.empty();var b,c;for(c=0;c<a.items.length;c++)this.items.push($.extend({},a.items[c]));for(c=0;c<this.items.length;c++)b=['<label class="checkbox-item" ><input type="checkbox"','name="'+this.name+'"','value="'+this.items[c].value+'"','data-text="'+this.items[c].text+'"'],this.items[c].checked&&b.push("checked=checked"),this.items[c].disabled&&b.push("disabled=true"),b.push("/> "+this.items[c].text+"</label>"),this.container.append(b.join(" "));return jQuery().uniform&&this.container.find("input[type='checkbox']").uniform(),this},this.checkAll=function(){return this.check(!0),this},this.uncheckAll=function(){return this.check(!1),this},this.check=function(a){var b=this.container.find("input[type='checkbox']");b.prop("checked",a),jQuery().uniform&&$.uniform.update(b)},this.getItems=function(){return this.items},this.getCheckedItems=function(){for(var a=[],b=0;b<this.items.length;b++)this.items[b].checked&&a.push(this.items[b]);return a},this.destroy=function(){this.container.empty()}}var e=window;e[PagurianAlias].checkboxes=function(a,b){return new d(a,b).init()}}),define("lib/tool/tool",[],function(a,b,c){var d=window;d[PagurianAlias].tool={newId:function(){return"_"+(1e18*Math.random()).toString(36).slice(0,5).toUpperCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isNumber:function(a){return/^[0-9]+$/.test(a)},isNull:function(a){return"[object Null]"===Object.prototype.toString.call(a)},isFunction:function(a){return"function"==typeof a},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},encode:function(a){return encodeURIComponent(a)},decode:function(a){return decodeURIComponent(a)},encodeHtml:function(a){var b="";return 0===a.length?"":(b=a.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/ /g,"&nbsp;"),b=b.replace(/\'/g,"&#39;"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/\n/g,"<br>"))},decodeHtml:function(a){var b="";return a&&0!==a.length?(a+="",b=a.replace(/&amp;/g,"&"),b=b.replace(/&lt;/g,"<"),b=b.replace(/&gt;/g,">"),b=b.replace(/&nbsp;/g," "),b=b.replace(/&#39;/g,"'"),b=b.replace(/&quot;/g,'"'),b=b.replace(/<br>/g,"\n")):""},objectToUrlParams:function(a){var b="",c="";for(var d in a)if("function"!=typeof a[d]){if("object"==typeof a[d]){for(var e=0;e<a[d].length;e++)b+=c+d+"="+this.encode(this.encode(a[d][e])),c="&";continue}b+=c+d+"="+this.encode(this.encode(a[d])),c="&"}return b},toDecimal:function(a,b){if(!a||"--"===a)return"0.00";try{return a.toFixed(b||2)}catch(c){return a}return a},floatMul:function(a,b){if(!a||!b)return"0.00";var c=0,d=a.toString(),e=b.toString();try{c+=d.split(".")[1].length}catch(f){}try{c+=e.split(".")[1].length}catch(f){}var g=Number(d.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,c);return this.toDecimal(g)}}}),define("lib/tool/url",[],function(a,b,c){var d=window;d[PagurianAlias].url={getParameter:function(a){var b,c,e=window.location.search.substring(1),f=e.split("&");for(b=0;b<f.length;b++)if(c=f[b].split("="),c[0]===a)return d[PagurianAlias].tool.decode(c[1]);return null},getReferrer:function(){return document.referrer},format:function(a){return a?("http"!==a.substring(0,4)&&(a="http://"+a),a):""},forward:function(a){return setTimeout(function(){window.location.href=a},1e3),this},reload:function(){return window.location.reload(),this},convertParams:function(a){var b="",c="";for(var d in a)if("function"!=typeof a[d]){if("object"==typeof a[d]){for(var e=0;e<a[d].length;e++)b+=c+d+"="+encodeURIComponent(encodeURIComponent(a[d][e])),c="&";continue}b+=c+d+"="+encodeURIComponent(encodeURIComponent(a[d])),c="&"}return b},parse:function(a){var b=document.createElement("a");return b.href=a,{source:a,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:function(){for(var a,c={},d=b.search.replace(/^\?/,"").split("&"),e=d.length,f=0;e>f;f++)d[f]&&(a=d[f].split("="),c[a[0]]=a[1]);return c}(),file:(b.pathname.match(/([^\/?#]+)$/i)||[0,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/[^\/]+(.+)/)||[0,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}}}}),define("lib/tool/str",[],function(a,b,c){var d=window;d[PagurianAlias].str={underscoreName:function(a){return a.replace(/([A-Z])/g,"_$1").toLowerCase()},camelName:function(a){return a.replace(/\-(\w)/g,function(a){return a.slice(1).toUpperCase()})},format:function(a){var b,c=0;for(b=1;b<arguments.length;b++)a=a.split("{"+c+"}").join(arguments[b]),c++;return a}}}),define("lib/core/tpl",[],function(a,b,c){function d(){this.render=function(a,b){return a?(f[a]=f[a]||new Function("_","return '"+a.replace(/[\\\n\r\u2028\u2029']/g,function(a){return g[a]}).replace(/\{\s*(\w+)\s*\}/g,"'+(_.$1?(_.$1+'').replace(/[&\"<>]/g,function(e){return e}):(_.$1===0?0:''))+'")+"'"),f[a](b)):""}}var e=window,f={},g={"\\":"\\\\","\n":"\\n","\r":"\\r","\u2028":"\\u2028","\u2029":"\\u2029","'":"\\'"};e[PagurianAlias].tpl=function(a,b){var c=new d;return c.render(a,b)}}),define("lib/core/layout",[],function(a,b,c){function d(a,b){this.windowHeight=$(window).height(),this.isExpandSubMenu=0;var c=$(a),d=60,e=40,f=200,g=20,h=c.find(".dropdown-level-first"),i=c.find(".dropdown-level-second"),j=c.find(".dropdown-level-third"),k=h.children("ul").children("li").length,l=k*e;this.initFirstHeight=function(){h.find(".dropdown-scroll-top").remove(),h.find(".dropdown-scroll-bottom").remove(),this.windowHeight-d<l?(h.prepend('<a class="dropdown-scroll-top disabled"><i class="fa fa-angle-up "></i></a>'),h.append('<a class="dropdown-scroll-bottom"><i class="fa fa-angle-down"></i></a>'),h.css("height",this.windowHeight-d)):h.css("height",l)},this.init=function(){this.level_in=1,this.level_out=1,this.level_base=0;var a=this;this.initFirstHeight(),c.hover(function(){a.level_base=1,h.show()},function(){h.hide(),a.level_base=0,1===a.level_in&&1===a.level_out&&(i.hide(),j.hide())}),$(".dropdown-wrap").mouseenter(function(){a.level_in=$(this).data("level"),$(".dropdown-wrap").each(function(){var b=$(this),c=b.data("level");1===a.isExpandSubMenu&&c-a.level_in===1||c>a.level_in&&b.hide()})}),$(".dropdown-wrap").mouseleave(function(){a.level_out=$(this).data("level");var b=($(this),setTimeout(function(){a.level_base||(a.level_in===a.level_out&&(h.hide(),i.hide(),j.hide(),c.find("li").removeClass("active")),clearTimeout(b))},100))}),$(".dropdown-wrap").click(function(){i.hide(),j.hide()}),this.setDropdownScroll(h),this.hoverMenu(h,i),this.dropdownMouseWheel(h),this.dropdownMouseWheel(i),this.dropdownMouseWheel(j)},this.update=function(){this.windowHeight=$(window).height(),this.initFirstHeight(),this.setDropdownScroll(h),this.hoverMenu(h,i)},this.dropdownMouseWheel=function(a){a.unbind("mousewheel"),a.bind("mousewheel",function(b,c){var d=a.find(".dropdown-scroll-top"),f=a.find(".dropdown-scroll-bottom"),h=c>0?"up":"down";if(0!==$(this).find(".dropdown-scroll-top").length){var i=$(this).children(".dropdown-menu"),j=parseInt(i.css("top")),k=i.children("li").length;if("up"===h){if(f.removeClass("disabled"),j>=20)return d.addClass("disabled"),!1;j+=20,i.css("top",j)}else{if(d.removeClass("disabled"),j<=$(this).height()-k*e-g)return f.addClass("disabled"),!1;j-=20,i.css("top",j)}return!1}})},this.setDropdownScroll=function(a){function b(a){var b=a.parents(".dropdown-wrap"),c=b.data("level");1===c&&(i.hide(),j.hide()),2===c&&j.hide()}var c,d=a.children("ul").children("li").length;a.find(".dropdown-scroll-top").unbind(),a.find(".dropdown-scroll-top").hover(function(){a.find(".dropdown-scroll-bottom").removeClass("disabled");var d=$(this);b(d);var e=$(this).next(),f=parseInt(e.css("top"));c=setInterval(function(){return f>=20?(d.addClass("disabled"),void clearInterval(c)):(f+=10,void e.css("top",f))},30)},function(){clearInterval(c)}),a.find(".dropdown-scroll-bottom").unbind(),a.find(".dropdown-scroll-bottom").hover(function(){a.find(".dropdown-scroll-top").removeClass("disabled");var f=$(this);b(f);var h=$(this).prev(),i=parseInt(h.css("top"));c=setInterval(function(){return i<=a.height()-d*e-g?(f.addClass("disabled"),void clearInterval(c)):(i-=10,void h.css("top",i))},30)},function(){clearInterval(c)})},this.hoverMenu=function(a,b){var c,d=this,g=0;a.find("li").unbind("mouseenter"),a.find("li").mouseenter(function(){if(g=d.level_in,a.find("li").removeClass("active"),$(this).hasClass("dropdown-submenu")){c&&clearTimeout(c),d.isExpandSubMenu=1,$(this).addClass("active");var h=$(this).offset(),k=h.top,l=$(this).find(".dropdown-menu:eq(0)"),m=l.children("li").length,n=e*m;if(b.html(l.clone()),b.css("top",k-1),d.windowHeight<n+k){n>f&&(b.prepend('<a class="dropdown-scroll-top disabled"><i class="fa fa-angle-up"></i></a>'),b.append('<a class="dropdown-scroll-bottom"><i class="fa fa-angle-down"></i></a>'));var o=d.windowHeight-k;f>o?(b.css("height",f),b.css("top",k-(f-o))):b.css("height",o)}else b.css("height",n);return b.show(),d.setDropdownScroll(b),void d.hoverMenu(i,j)}d.isExpandSubMenu=0,c=setTimeout(function(){return 2===g?void b.hide():void(d.level_in>d.level_out||1===d.isExpandSubMenu||b.hide())},300)})},this.init()}var e=!1,f=!1,g=!1,h=!1,j=function(){"rtl"===$("body").css("direction")&&(e=!0),f=!!navigator.userAgent.match(/MSIE 8.0/),g=!!navigator.userAgent.match(/MSIE 9.0/),h=!!navigator.userAgent.match(/MSIE 10.0/),h&&$("html").addClass("ie10"),(h||g||f)&&$("html").addClass("ie")},k=function(){n(),C(),o()},l=function(){n()},m=function(){var a;if(f){var b;$(window).resize(function(){b!==document.documentElement.clientHeight&&(a&&clearTimeout(a),a=setTimeout(function(){k()},50),b=document.documentElement.clientHeight)})}else $(window).resize(function(){a&&clearTimeout(a),a=setTimeout(function(){k()},50)})},n=function(){var a,b,c,d=$(".page-content"),e=($(".page-sidebar"),$(".page-sidebar-menu")),f=$(".page-container"),g=$("body");g.hasClass("page-footer-fixed")===!0&&g.hasClass("page-sidebar-fixed")===!1?(b=$(window).height()-$(".footer").outerHeight(),d.height()<b&&d.css("min-height",b+"px")):($(".footer").hasClass("fixed")&&$(".footer").removeClass("fixed"),g.hasClass("page-sidebar-fixed")?a=p():(b=$(window).height()-$(".footer").outerHeight()-$(".header").outerHeight(),c=e.height(),d.height()<b&&(c>b&&(b=c),f.css("min-height",b+"px"))))},o=function(){var a=$(".modal:visible .modal-body");if(!(a.length<1)){var b=a[0].scrollHeight,c=114,d=50,e=50,f=$(window).height()-d-e-c;b>=f?a.css("max-height",f):a.css("max-height","none")}},p=function(){var a=$(window).height()-$(".header").height()+1;return $("body").hasClass("page-footer-fixed")&&(a-=$(".footer").outerHeight()),a},q=function(){$("body").on("click",".portlet > .portlet-title > .tools > a.remove",function(a){a.preventDefault(),$(this).closest(".portlet").remove()}),$("body").on("click",".portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand",function(a){a.preventDefault();var b=$(this).closest(".portlet").children(".portlet-body");$(this).hasClass("collapse")?($(this).removeClass("collapse").addClass("expand"),b.slideUp(200)):($(this).removeClass("expand").addClass("collapse"),b.slideDown(200))})},r=function(){if(jQuery().uniform){var a=$("input[type=checkbox]:not(.toggle), input[type=radio]:not(.toggle, .star)");a.size()>0&&a.each(function(){0===$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())})}},s=function(){$(".tooltips").tooltip()},t=function(){$("body").on("click",".dropdown-menu.hold-on-click",function(a){a.stopPropagation()}),$("[data-type='select']").on("click"," .dropdown-menu a",function(){var a=$(this).text(),b=$(this).parents(".btn-group").find("button>i").prop("outerHTML");$(this).parents(".dropdown-menu").prev().html(a+" "+b)})},u=function(){$.fn.dropdownHover&&$('[data-hover="dropdown"]').dropdownHover()},v=function(){$("body").on("click",'[data-close="alert"]',function(a){$(this).parent(".alert").hide(),a.preventDefault()})},w=function(){$(".popovers").popover()},x=function(){if($("body").on("shown.bs.tab",".nav.nav-tabs",function(){n()}),location.hash){var a=location.hash.substr(1);$('a[href="#'+a+'"]').parents(".tab-pane:hidden").each(function(){var a=$(this).attr("id");$('a[href="#'+a+'"]').click()}),$('a[href="#'+a+'"]').click()}},y=function(){(f||g)&&$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var a=$(this);""===a.val()&&""!==a.attr("placeholder")&&a.addClass("placeholder").val(a.attr("placeholder")),a.focus(function(){a.val()===a.attr("placeholder")&&a.val("")}),a.blur(function(){""!==a.val()&&a.val()!==a.attr("placeholder")||a.val(a.attr("placeholder"))})})},z=function(){jQuery().select2&&$(".select2me").select2({placeholder:"Select",allowClear:!0})},A=function(){var a=$(".theme-panel"),b=function(a){$("#style_themes").attr("href",pagurian.path.app+"resources/css/themes-"+(a||"default")+".css"),$.cookie("style_color",a)};$(".toggler",a).click(function(){$(".toggler").hide(),$(".toggler-close").show(),$(".theme-panel > .theme-options").show()}),$(".toggler-close",a).click(function(){$(".toggler").show(),$(".toggler-close").hide(),$(".theme-panel > .theme-options").hide()}),$(".theme-colors > ul > li",a).click(function(){var c=$(this).attr("data-style");b(c),$("ul > li",a).removeClass("current"),$(this).addClass("current")})},B=function(){window.hljs&&($("pre code").each(function(){var a=$(this).text().split("\n").length,b=$("<ul/>").addClass("pre-numbering");for($(this).addClass("has-numbering").parent().append(b),i=1;i<=a;i++)b.append($("<li/>").text(i))}),$("pre code").each(function(a,b){hljs.highlightBlock(b)}))},C=function(){for(var a=0,b=D.length;b>a;a++)"function"==typeof D[a]&&D[a]()},D=[],E={init:function(){j(),m(),r(),l(),y(),z(),q(),v(),t(),u(),s(),w(),x(),A(),B()},fixContentHeight:function(){n()},resize:function(a){D.push(a)},initDropdownMenu:function(){var a=new d("#dropdown_pro_menu");return D.push(function(){a.update()}),this.dropdown=a,this},activateCurrentMenu:function(){window.CONFIG&&CONFIG.appId&&$(".page-sidebar-menu li[data-id='"+CONFIG.appId+"']").addClass("active")},updateUniform:function(){r()},custom:function(){$(".page-sidebar-menu>li>a").on("click",function(){var a=$(this).parents("li");a.hasClass("open")?(a.removeClass("open"),a.find(".arrow").removeClass("open")):(a.addClass("open"),a.find(".arrow").addClass("open"))})}};c.exports=E}),define("conf/locale.zh_CN",[],{get:function(a){return this[a]},success:"操作成功",error:"操作失败",undefine:"出现异常，对象不存在",exception:"出现异常，请联系管理员",timeout:"网络请求超时，请稍后重试",disable:"停用",enable:"启用",loading:"加载中"}),define("conf/locale.en_US",[],{get:function(a){return this[a]},success:"Successful operation",error:"Operation failure",undefine:"Exception, object is undefined",exception:"Exception",timeout:"Timeout",disable:"Disable",enable:"Enable",loading:"Loading"}),define("lib/service",["lib/core/ajax"],function(a,b,c){function d(a){return!0}function e(a){if(!a)return!1;switch(a.code){case"200000":return!0;case"200001":return $p.alert(a.message,"warning"),!1;case"200002":var b=a.fields,c={};for(var d in b)c=$(".help-block[for^='"+d+"']"),c.removeClass("tip-block"),c.html(b[d][0].message);return!1;case"200403":return $p.alert($p.locale.handle_exception,"warning"),$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.api.urls.error403),!1;case"200403.11":return $p.alert($p.locale.handle_exception,"warning"),$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.api.urls.error403_11),!1;case"200403.13":return $p.alert($p.locale.handle_exception,"warning"),$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.api.urls.error403_13),!1;case"200403.17":window.location.reload();break;case"200403.18":return $p.alert($p.locale.handle_exception,"warning"),$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.api.urls.error403_18),!1;case"200404":return $p.alert($p.locale.handle_exception,"warning"),$p.url.forward(CONFIG.ctxPath()+"/"+$p.lib.api.urls.error404),!1;case 404:return $p.alert($p.locale.handle_exception,"error"),!1;case"100500":return $p.alert($p.locale.handle_exception,"warning"),!1;case 500:return $p.alert($p.locale.handle_exception,"error"),!1;case 400:return $p.alert($p.locale.params_error,"error"),!1;case 0:return a.result&&"timeout"===a.result.statusText?($p.alert($p.locale.handle_timeout,"error"),!1):($p.alert($p.locale.handle_exception,"error"),!1);default:return!0}return!0}var f=a("lib/core/ajax"),g={get:function(a,b,c){if($.isArray(b)){for(var d=!1,e=0;e<b.length;e++)"locale"===b[e].name&&(b[e].value=$p.language,d=!0);d||b.push({name:"locale",value:$p.language})}else b.locale=$p.language;this.request("get",a,b,c)},post:function(a,b,c){this.request("post",a,b,c)},request:function(a,b,c,g){d(c),f.request(a,b,c,function(a){var b=e(a);"function"==typeof g&&g(a,b)})}};g.validateRespone=e,c.exports=g}),define("lib/core/ajax",[],function(a,b,c){function d(a){if($.isPlainObject(a))return a;for(var b={},c={},d=0;d<a.length;d++)if(b[a[d].name]){var e=b[a[d].name];$.isArray(b[a[d].name])||(b[a[d].name]=[e]),b[a[d].name].push(a[d].value)}else"array"!==a[d].type?b[a[d].name]=a[d].value:b[a[d].name]=[a[d].value];for(var f in b){var g=f.split("."),h=b[f];if("string"==typeof h&&(h=$.trim(h)),g.length>1){if($.isArray(h)){c[g[0]]=c[g[0]]||[];for(var i,j=0;j<h.length;j++)i={},i[g[1]]=h[j],c[g[0]].push(i);continue}c[g[0]]=c[g[0]]||{},c[g[0]][g[1]]=h}else c[f]=h}return c}var e={bundle:!0,options:{data:[]},init:function(a,b){var c;if(this.options.data=[],$.isArray(b))for(c=0;c<b.length;c++)"get"===a&&(b[c].value=encodeURIComponent(b[c].value)),this.options.data.push(b[c]);else for(c in b)if("function"!=typeof b[c])if($.isArray(b[c]))for(var d=0;d<b[c].length;d++)this.options.data.push({name:c,value:"get"===a?encodeURIComponent(b[c][d]):b[c][d],type:"array"});else this.options.data.push({name:c,value:"get"===a?encodeURIComponent(b[c]):b[c]});return"get"===a&&this.options.data.push({name:"_ts",value:"_"+(1e18*Math.random()).toString(36).slice(0,5).toUpperCase()}),this},send:function(a,b,c,e){this.init(a,c);var f=this.options.data,g={url:pagurian.path.api+b+".json",type:a||"get",dataType:"json",data:f,timeout:3e4,success:function(a,b,c){$.isFunction(e)&&e(a,b,c)},error:function(a,b,c){var d={error:!0};for(var f in a)$.isFunction(a[f])||(d[f]=a[f]);$.isFunction(e)&&e({code:a.status,result:d})}};if(this.bundle&&(g.contentType="application/json",$.inArray(a,["post","put","patch"])>-1&&(f=$.toJSON({data:d(f)}))),"delete"===a){for(var h="?",i="",j=0;j<f.length;j++)i+=h+f[j].name+"="+f[j].value,h="&";i&&(g.url+=i)}return g.data=f,$.ajax(g),this},request:function(a,b,c,d){return this.send(a,b,c,d),this}};c.exports=e}),define("conf/api",[],{keywords:"keywords",user:"user",succeed:"succeed",dataListData:"datalistdata",sizerData:"sizerdata",summaryData:"summaryData"}),define("conf/route",[],{}),define("plugins/number-spinner/module",["plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin"],function(a,b,c){function d(a,b){this.container=a instanceof jQuery?a:$(a),this.container.TouchSpin($.extend({verticalbuttons:!0},b)),this.destroy=function(){this.container.TouchSpin("destroy")}}var e=window;a("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin.css"),a("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin"),e[PagurianAlias].numberSpinner=function(a,b){return new d(a,b)}}),define("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin.css",[],function(){seajs.importStyle(".bootstrap-touchspin .input-group-btn-vertical{position:relative;white-space:nowrap;vertical-align:middle;display:table-cell}.bootstrap-touchspin .input-group-btn-vertical>.btn{display:block;float:none;width:100%;max-width:100%;padding:8px 10px;margin-left:-1px;position:relative}.bootstrap-touchspin .input-group-btn-vertical .bootstrap-touchspin-up{border-radius:0}.bootstrap-touchspin .input-group-btn-vertical .bootstrap-touchspin-down{border-radius:0}.bootstrap-touchspin .input-group-btn-vertical i{position:absolute;top:0;left:5px;font-size:9px;font-weight:400}")}),define("plugins/number-spinner/3.1.1/jquery.bootstrap-touchspin",[],function(a,b,c){!function(a){"use strict";function b(a,b){return a+".touchspin_"+b}function c(c,d){return a.map(c,function(a){return b(a,d)})}var d=0;a.fn.TouchSpin=function(b){if("destroy"===b)return void this.each(function(){var b=a(this),d=b.data();a(document).off(c(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],d.spinnerid).join(" "))});var e={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"fa fa-chevron-up",verticaldownclass:"fa fa-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:'<i class="fa fa-minus"></i>',buttonup_txt:'<i class="fa fa-plus"></i>'},f={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function g(){if(!J.data("alreadyinitialized")){if(J.data("alreadyinitialized",!0),d+=1,J.data("spinnerid",d),!J.is("input"))return void console.log("Must be an input.");j(),h(),u(),m(),p(),q(),r(),s(),D.input.css("display","block")}}function h(){""!==B.initval&&""===J.val()&&J.val(B.initval)}function i(a){l(a),u();var b=D.input.val();""!==b&&(b=Number(D.input.val()),D.input.val(b.toFixed(B.decimals)))}function j(){B=a.extend({},e,K,k(),b)}function k(){var b={};return a.each(f,function(a,c){var d="bts-"+c;J.is("[data-"+d+"]")&&(b[a]=J.data(d))}),b}function l(b){B=a.extend({},B,b)}function m(){var a=J.val(),b=J.parent();""!==a&&(a=Number(a).toFixed(B.decimals)),J.data("initvalue",a).val(a),J.addClass("form-control"),b.hasClass("input-group")?n(b):o()}function n(b){b.addClass("bootstrap-touchspin");var c,d,e=J.prev(),f=J.next(),g='<span class="input-group-addon bootstrap-touchspin-prefix">'+B.prefix+"</span>",h='<span class="input-group-addon bootstrap-touchspin-postfix">'+B.postfix+"</span>";e.hasClass("input-group-btn")?(c='<button class="'+B.buttondown_class+' bootstrap-touchspin-down" type="button">'+B.buttondown_txt+"</button>",e.append(c)):(c='<span class="input-group-btn"><button class="'+B.buttondown_class+' bootstrap-touchspin-down" type="button">'+B.buttondown_txt+"</button></span>",a(c).insertBefore(J)),f.hasClass("input-group-btn")?(d='<button class="'+B.buttonup_class+' bootstrap-touchspin-up" type="button">'+B.buttonup_txt+"</button>",f.prepend(d)):(d='<span class="input-group-btn"><button class="'+B.buttonup_class+' bootstrap-touchspin-up" type="button">'+B.buttonup_txt+"</button></span>",a(d).insertAfter(J)),a(g).insertBefore(J),a(h).insertAfter(J),C=b}function o(){var b;b=B.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+B.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+B.postfix+'</span><span class="input-group-btn-vertical"><button class="'+B.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+B.verticalupclass+'"></i></button><button class="'+B.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+B.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+B.buttondown_class+' bootstrap-touchspin-down" type="button">'+B.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+B.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+B.postfix+'</span><span class="input-group-btn"><button class="'+B.buttonup_class+' bootstrap-touchspin-up" type="button">'+B.buttonup_txt+"</button></span></div>",C=a(b).insertBefore(J),a(".bootstrap-touchspin-prefix",C).after(J),J.hasClass("input-sm")?C.addClass("input-group-sm"):J.hasClass("input-lg")&&C.addClass("input-group-lg")}function p(){D={down:a(".bootstrap-touchspin-down",C),up:a(".bootstrap-touchspin-up",C),input:a("input",C),prefix:a(".bootstrap-touchspin-prefix",C).addClass(B.prefix_extraclass),postfix:a(".bootstrap-touchspin-postfix",C).addClass(B.postfix_extraclass)}}function q(){""===B.prefix&&D.prefix.hide(),""===B.postfix&&D.postfix.hide()}function r(){J.on("keydown",function(a){var b=a.keyCode||a.which;38===b?("up"!==M&&(w(),z()),a.preventDefault()):40===b&&("down"!==M&&(x(),y()),a.preventDefault())}),J.on("keyup",function(a){var b=a.keyCode||a.which;38===b?A():40===b&&A()}),J.on("blur",function(){u()}),D.down.on("keydown",function(a){var b=a.keyCode||a.which;32!==b&&13!==b||("down"!==M&&(x(),y()),a.preventDefault())}),D.down.on("keyup",function(a){var b=a.keyCode||a.which;32!==b&&13!==b||A()}),D.up.on("keydown",function(a){var b=a.keyCode||a.which;32!==b&&13!==b||("up"!==M&&(w(),z()),a.preventDefault())}),D.up.on("keyup",function(a){var b=a.keyCode||a.which;32!==b&&13!==b||A()}),D.down.on("mousedown.touchspin",function(a){D.down.off("touchstart.touchspin"),J.is(":disabled")||(x(),y(),a.preventDefault(),a.stopPropagation())}),D.down.on("touchstart.touchspin",function(a){D.down.off("mousedown.touchspin"),J.is(":disabled")||(x(),y(),a.preventDefault(),a.stopPropagation())}),D.up.on("mousedown.touchspin",function(a){D.up.off("touchstart.touchspin"),J.is(":disabled")||(w(),z(),a.preventDefault(),a.stopPropagation())}),D.up.on("touchstart.touchspin",function(a){D.up.off("mousedown.touchspin"),J.is(":disabled")||(w(),z(),a.preventDefault(),a.stopPropagation())}),D.up.on("mouseout touchleave touchend touchcancel",function(a){M&&(a.stopPropagation(),A())}),D.down.on("mouseout touchleave touchend touchcancel",function(a){M&&(a.stopPropagation(),A())}),D.down.on("mousemove touchmove",function(a){M&&(a.stopPropagation(),a.preventDefault())}),D.up.on("mousemove touchmove",function(a){M&&(a.stopPropagation(),a.preventDefault())}),a(document).on(c(["mouseup","touchend","touchcancel"],d).join(" "),function(a){M&&(a.preventDefault(),A())}),a(document).on(c(["mousemove","touchmove","scroll","scrollstart"],d).join(" "),function(a){M&&(a.preventDefault(),A())}),J.on("mousewheel DOMMouseScroll",function(a){if(B.mousewheel&&J.is(":focus")){var b=a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail;a.stopPropagation(),a.preventDefault(),0>b?x():w()}})}function s(){J.on("touchspin.uponce",function(){A(),w()}),J.on("touchspin.downonce",function(){A(),x()}),J.on("touchspin.startupspin",function(){z()}),J.on("touchspin.startdownspin",function(){y()}),J.on("touchspin.stopspin",function(){A()}),J.on("touchspin.updatesettings",function(a,b){i(b)})}function t(a){switch(B.forcestepdivisibility){case"round":return(Math.round(a/B.step)*B.step).toFixed(B.decimals);case"floor":return(Math.floor(a/B.step)*B.step).toFixed(B.decimals);case"ceil":return(Math.ceil(a/B.step)*B.step).toFixed(B.decimals);default:return a}}function u(){var a,b,c;return a=J.val(),""===a?void(""!==B.replacementval&&(J.val(B.replacementval),J.trigger("change"))):void(B.decimals>0&&"."===a||(b=parseFloat(a),isNaN(b)&&(b=""!==B.replacementval?B.replacementval:0),c=b,b.toString()!==a&&(c=b),b<B.min&&(c=B.min),b>B.max&&(c=B.max),c=t(c),Number(a).toString()!==c.toString()&&(J.val(c),J.trigger("change"))))}function v(){if(B.booster){var a=Math.pow(2,Math.floor(L/B.boostat))*B.step;return B.maxboostedstep&&a>B.maxboostedstep&&(a=B.maxboostedstep,E=Math.round(E/a)*a),Math.max(B.step,a)}return B.step}function w(){u(),E=parseFloat(D.input.val()),isNaN(E)&&(E=0);var a=E,b=v();E+=b,E>B.max&&(E=B.max,J.trigger("touchspin.on.max"),A()),D.input.val(Number(E).toFixed(B.decimals)),a!==E&&J.trigger("change")}function x(){u(),E=parseFloat(D.input.val()),isNaN(E)&&(E=0);var a=E,b=v();E-=b,E<B.min&&(E=B.min,J.trigger("touchspin.on.min"),A()),D.input.val(E.toFixed(B.decimals)),a!==E&&J.trigger("change")}function y(){A(),L=0,M="down",J.trigger("touchspin.on.startspin"),J.trigger("touchspin.on.startdownspin"),H=setTimeout(function(){F=setInterval(function(){L++,x()},B.stepinterval)},B.stepintervaldelay)}function z(){A(),L=0,M="up",J.trigger("touchspin.on.startspin"),J.trigger("touchspin.on.startupspin"),I=setTimeout(function(){G=setInterval(function(){L++,w()},B.stepinterval)},B.stepintervaldelay)}function A(){switch(clearTimeout(H),clearTimeout(I),clearInterval(F),clearInterval(G),M){case"up":J.trigger("touchspin.on.stopupspin"),J.trigger("touchspin.on.stopspin");break;case"down":J.trigger("touchspin.on.stopdownspin"),J.trigger("touchspin.on.stopspin")}L=0,M=!1}var B,C,D,E,F,G,H,I,J=a(this),K=J.data(),L=0,M=!1;g()})}}(jQuery)}),define("plugins/datatree/module",["plugins/datatree/3.2.1/jstree","plugins/datatree/extend/plugin.added"],function(a,b,c){function d(a,b){if(this.container=$(a),this.container.jstree($.extend({initedCallback:function(){var a=b.added?b.added.numberSpinner:{};$p.numberSpinner(".jstree-input",$.extend({verticalbuttons:!1},a))}},b)),b.search){var c=$(b.search.input),d=!1,e=this;c.keyup(function(){d&&clearTimeout(d),d=setTimeout(function(){var a=c.val();e.container.jstree(!0).search(a)},250)})}this.container.on("changed.jstree",function(a,c){$.isFunction(b.change)&&b.change(a,c)}),this.getSelectedNodes=function(){var a=$.jstree.reference(this.container).get_selected()||[];return a},this.getSelectedNodeValues=function(){for(var a,b=this.getSelectedNodes(),c=[],d=0;d<b.length;d++)a=this.container.find(".jstree-input[name='"+b[d]+"']"),c.push({name:b[d],value:a.val()});return c},this.destroy=function(){this.container.jstree("destroy")},this.refresh=function(){this.container.jstree("refresh")},this.selectAll=function(){$.jstree.reference(this.container).select_all()},this.deselectAll=function(){$.jstree.reference(this.container).deselect_all()}}a("plugins/datatree/3.2.1/themes/default/style.css"),a("plugins/datatree/3.2.1/jstree");var e=window;e[PagurianAlias].dataTree=function(a,b){return new d(a,b)}}),define("plugins/datatree/3.2.1/themes/default/style.css",[],function(){seajs.importStyle(".jstree-node,.jstree-children,.jstree-container-ul{display:block;margin:0;padding:0;list-style-type:none;list-style-image:none}.jstree-node{white-space:nowrap;position:relative}.jstree-anchor{display:inline-block;color:#000;white-space:nowrap;padding:0 4px 0 1px;margin:0;vertical-align:top}.jstree-anchor:focus{outline:0}.jstree-anchor,.jstree-anchor:link,.jstree-anchor:visited,.jstree-anchor:hover,.jstree-anchor:active{text-decoration:none;color:inherit}.jstree-icon{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.jstree-icon:empty{display:inline-block;text-decoration:none;margin:0;padding:0;vertical-align:top;text-align:center}.jstree-ocl{cursor:pointer}.jstree-leaf>.jstree-ocl{cursor:default}.jstree .jstree-open>.jstree-children{display:block}.jstree .jstree-closed>.jstree-children,.jstree .jstree-leaf>.jstree-children{display:none}.jstree-anchor>.jstree-themeicon{margin-right:2px}.jstree-no-icons .jstree-themeicon,.jstree-anchor>.jstree-themeicon-hidden{display:none}.jstree-hidden{display:none}.jstree-rtl .jstree-anchor{padding:0 1px 0 4px}.jstree-rtl .jstree-anchor>.jstree-themeicon{margin-left:2px;margin-right:0}.jstree-rtl .jstree-node{margin-left:0}.jstree-rtl .jstree-container-ul>.jstree-node{margin-right:0}.jstree-wholerow-ul{position:relative;display:inline-block;min-width:100%}.jstree-wholerow-ul .jstree-leaf>.jstree-ocl{cursor:pointer}.jstree-wholerow-ul .jstree-anchor,.jstree-wholerow-ul .jstree-icon{position:relative}.jstree-wholerow-ul .jstree-wholerow{width:100%;cursor:pointer;position:absolute;left:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.vakata-context{display:none}.vakata-context,.vakata-context ul{margin:0;padding:2px;position:absolute;background:#f5f5f5;border:1px solid #979797;box-shadow:2px 2px 2px #999}.vakata-context ul{list-style:none;left:100%;margin-top:-2.7em;margin-left:-4px}.vakata-context .vakata-context-right ul{left:auto;right:100%;margin-left:auto;margin-right:-4px}.vakata-context li{list-style:none;display:inline}.vakata-context li>a{display:block;padding:0 2em;text-decoration:none;width:auto;color:#000;white-space:nowrap;line-height:2.4em;text-shadow:1px 1px 0 #fff;border-radius:1px}.vakata-context li>a:hover{position:relative;background-color:#e8eff7;box-shadow:0 0 2px #0a6aa1}.vakata-context li>a.vakata-context-parent{background-image:url(\"data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAIORI4JlrqN1oMSnmmZDQUAOw==\");background-position:right center;background-repeat:no-repeat}.vakata-context li>a:focus{outline:0}.vakata-context .vakata-context-hover>a{position:relative;background-color:#e8eff7;box-shadow:0 0 2px #0a6aa1}.vakata-context .vakata-context-separator>a,.vakata-context .vakata-context-separator>a:hover{background:#fff;border:0;border-top:1px solid #e2e3e3;height:1px;min-height:1px;max-height:1px;padding:0;margin:0 0 0 2.4em;border-left:1px solid #e0e0e0;text-shadow:0 0 0 transparent;box-shadow:0 0 0 transparent;border-radius:0}.vakata-context .vakata-contextmenu-disabled a,.vakata-context .vakata-contextmenu-disabled a:hover{color:silver;background-color:transparent;border:0;box-shadow:0 0 0}.vakata-context li>a>i{text-decoration:none;display:inline-block;width:2.4em;height:2.4em;background:transparent;margin:0 0 0 -2em;vertical-align:top;text-align:center;line-height:2.4em}.vakata-context li>a>i:empty{width:2.4em;line-height:2.4em}.vakata-context li>a .vakata-contextmenu-sep{display:inline-block;width:1px;height:2.4em;background:#fff;margin:0 .5em 0 0;border-left:1px solid #e2e3e3}.vakata-context .vakata-contextmenu-shortcut{font-size:.8em;color:silver;opacity:.5;display:none}.vakata-context-rtl ul{left:auto;right:100%;margin-left:auto;margin-right:-4px}.vakata-context-rtl li>a.vakata-context-parent{background-image:url(\"data:image/gif;base64,R0lGODlhCwAHAIAAACgoKP///yH5BAEAAAEALAAAAAALAAcAAAINjI+AC7rWHIsPtmoxLAA7\");background-position:left center;background-repeat:no-repeat}.vakata-context-rtl .vakata-context-separator>a{margin:0 2.4em 0 0;border-left:0;border-right:1px solid #e2e3e3}.vakata-context-rtl .vakata-context-left ul{right:auto;left:100%;margin-left:-4px;margin-right:auto}.vakata-context-rtl li>a>i{margin:0 -2em 0 0}.vakata-context-rtl li>a .vakata-contextmenu-sep{margin:0 0 0 .5em;border-left-color:#fff;background:#e2e3e3}#jstree-marker{position:absolute;top:0;left:0;margin:-5px 0 0 0;padding:0;border-right:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:5px solid;width:0;height:0;font-size:0;line-height:0}#jstree-dnd{line-height:16px;margin:0;padding:4px}#jstree-dnd .jstree-icon,#jstree-dnd .jstree-copy{display:inline-block;text-decoration:none;margin:0 2px 0 0;padding:0;width:16px;height:16px}#jstree-dnd .jstree-ok{background:green}#jstree-dnd .jstree-er{background:red}#jstree-dnd .jstree-copy{margin:0 2px}.jstree-default .jstree-node,.jstree-default .jstree-icon{background-repeat:no-repeat;background-color:transparent}.jstree-default .jstree-anchor,.jstree-default .jstree-wholerow{transition:background-color .15s,box-shadow .15s}.jstree-default .jstree-hovered{background:#e7f4f9;border-radius:2px;box-shadow:inset 0 0 1px #ccc}.jstree-default .jstree-clicked{background:#beebff;border-radius:2px;box-shadow:inset 0 0 1px #999}.jstree-checkbox-selection .jstree-clicked{background:0;border-radius:unset;box-shadow:none}.jstree-default .jstree-no-icons .jstree-anchor>.jstree-themeicon{display:none}.jstree-default .jstree-disabled{background:transparent;color:#b5b5b5;cursor:default}.jstree-default .jstree-disabled.jstree-hovered{background:transparent;box-shadow:none}.jstree-default .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default .jstree-disabled>.jstree-icon{opacity:.8;filter:url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'jstree-grayscale\\'><feColorMatrix type=\\'matrix\\' values=\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\'/></filter></svg>#jstree-grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default .jstree-search{font-style:italic;color:#8b0000;font-weight:700}.jstree-default .jstree-no-checkboxes .jstree-checkbox{display:none!important}.jstree-default.jstree-checkbox-no-clicked .jstree-clicked{background:transparent;box-shadow:none}.jstree-default.jstree-checkbox-no-clicked .jstree-clicked.jstree-hovered{background:#e7f4f9}.jstree-default.jstree-checkbox-no-clicked>.jstree-wholerow-ul .jstree-wholerow-clicked{background:transparent}.jstree-default.jstree-checkbox-no-clicked>.jstree-wholerow-ul .jstree-wholerow-clicked.jstree-wholerow-hovered{background:#e7f4f9}.jstree-default>.jstree-striped{min-width:100%;display:inline-block;background:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAkCAMAAAB/qqA+AAAABlBMVEUAAAAAAAClZ7nPAAAAAnRSTlMNAMM9s3UAAAAXSURBVHjajcEBAQAAAIKg/H/aCQZ70AUBjAATb6YPDgAAAABJRU5ErkJggg==\") left top repeat}.jstree-default>.jstree-wholerow-ul .jstree-hovered,.jstree-default>.jstree-wholerow-ul .jstree-clicked{background:transparent;box-shadow:none;border-radius:0}.jstree-default .jstree-wholerow{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.jstree-default .jstree-wholerow-hovered{background:#e7f4f9}.jstree-default .jstree-wholerow-clicked{background:#beebff;background:-webkit-linear-gradient(top,#beebff 0,#a8e4ff 100%);background:linear-gradient(to bottom,#beebff 0,#a8e4ff 100%)}.jstree-default .jstree-node{min-height:24px;line-height:24px;margin-left:24px;min-width:24px}.jstree-default .jstree-anchor{line-height:24px;height:24px;padding:0 4px}.jstree-default .jstree-icon{width:24px;height:24px;line-height:24px}.jstree-default .jstree-icon:empty{width:24px;height:24px;line-height:24px}.jstree-default.jstree-rtl .jstree-node{margin-right:24px}.jstree-default .jstree-wholerow{height:24px}.jstree-default .jstree-node,.jstree-default .jstree-icon{background-image:url(32px.png)}.jstree-default .jstree-node{background-position:-292px -4px;background-repeat:repeat-y}.jstree-default .jstree-last{background:transparent}.jstree-default .jstree-open>.jstree-ocl{background-position:-132px -4px}.jstree-default .jstree-closed>.jstree-ocl{background-position:-100px -4px}.jstree-default .jstree-leaf>.jstree-ocl{background-position:-68px -4px}.jstree-default .jstree-themeicon{background-position:-260px -4px}.jstree-default>.jstree-no-dots .jstree-node,.jstree-default>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-36px -4px}.jstree-default>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-4px -4px}.jstree-default .jstree-disabled{background:transparent}.jstree-default .jstree-disabled.jstree-hovered{background:transparent}.jstree-default .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default .jstree-checkbox{background-position:-164px -4px}.jstree-default .jstree-checkbox:hover{background-position:-164px -36px}.jstree-default.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox,.jstree-default .jstree-checked>.jstree-checkbox{background-position:-228px -4px}.jstree-default.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox:hover,.jstree-default .jstree-checked>.jstree-checkbox:hover{background-position:-228px -36px}.jstree-default .jstree-anchor>.jstree-undetermined{background-position:-196px -4px}.jstree-default .jstree-anchor>.jstree-undetermined:hover{background-position:-196px -36px}.jstree-default .jstree-checkbox-disabled{opacity:.8;filter:url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'jstree-grayscale\\'><feColorMatrix type=\\'matrix\\' values=\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\'/></filter></svg>#jstree-grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default>.jstree-striped{background-size:auto 48px}.jstree-default.jstree-rtl .jstree-node{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==\");background-position:100% 1px;background-repeat:repeat-y}.jstree-default.jstree-rtl .jstree-last{background:transparent}.jstree-default.jstree-rtl .jstree-open>.jstree-ocl{background-position:-132px -36px}.jstree-default.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-100px -36px}.jstree-default.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-68px -36px}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-36px -36px}.jstree-default.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-4px -36px}.jstree-default .jstree-themeicon-custom{background-color:transparent;background-image:none;background-position:0 0}.jstree-default>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url(throbber.gif) center center no-repeat}.jstree-default .jstree-file{background:url(32px.png) -100px -68px no-repeat}.jstree-default .jstree-folder{background:url(32px.png) -260px -4px no-repeat}.jstree-default>.jstree-container-ul>.jstree-node{margin-left:0;margin-right:0}#jstree-dnd.jstree-default{line-height:24px;padding:0 4px}#jstree-dnd.jstree-default .jstree-ok,#jstree-dnd.jstree-default .jstree-er{background-image:url(32px.png);background-repeat:no-repeat;background-color:transparent}#jstree-dnd.jstree-default i{background:transparent;width:24px;height:24px;line-height:24px}#jstree-dnd.jstree-default .jstree-ok{background-position:-4px -68px}#jstree-dnd.jstree-default .jstree-er{background-position:-36px -68px}.jstree-default.jstree-rtl .jstree-node{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==\")}.jstree-default.jstree-rtl .jstree-last{background:transparent}.jstree-default-small .jstree-node{min-height:18px;line-height:18px;margin-left:18px;min-width:18px}.jstree-default-small .jstree-anchor{line-height:18px;height:18px}.jstree-default-small .jstree-icon{width:18px;height:18px;line-height:18px}.jstree-default-small .jstree-icon:empty{width:18px;height:18px;line-height:18px}.jstree-default-small.jstree-rtl .jstree-node{margin-right:18px}.jstree-default-small .jstree-wholerow{height:18px}.jstree-default-small .jstree-node,.jstree-default-small .jstree-icon{background-image:url(32px.png)}.jstree-default-small .jstree-node{background-position:-295px -7px;background-repeat:repeat-y}.jstree-default-small .jstree-last{background:transparent}.jstree-default-small .jstree-open>.jstree-ocl{background-position:-135px -7px}.jstree-default-small .jstree-closed>.jstree-ocl{background-position:-103px -7px}.jstree-default-small .jstree-leaf>.jstree-ocl{background-position:-71px -7px}.jstree-default-small .jstree-themeicon{background-position:-263px -7px}.jstree-default-small>.jstree-no-dots .jstree-node,.jstree-default-small>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default-small>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-39px -7px}.jstree-default-small>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-7px -7px}.jstree-default-small .jstree-disabled{background:transparent}.jstree-default-small .jstree-disabled.jstree-hovered{background:transparent}.jstree-default-small .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default-small .jstree-checkbox{background-position:-167px -7px}.jstree-default-small .jstree-checkbox:hover{background-position:-167px -39px}.jstree-default-small.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox,.jstree-default-small .jstree-checked>.jstree-checkbox{background-position:-231px -7px}.jstree-default-small.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox:hover,.jstree-default-small .jstree-checked>.jstree-checkbox:hover{background-position:-231px -39px}.jstree-default-small .jstree-anchor>.jstree-undetermined{background-position:-199px -7px}.jstree-default-small .jstree-anchor>.jstree-undetermined:hover{background-position:-199px -39px}.jstree-default-small .jstree-checkbox-disabled{opacity:.8;filter:url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'jstree-grayscale\\'><feColorMatrix type=\\'matrix\\' values=\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\'/></filter></svg>#jstree-grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default-small>.jstree-striped{background-size:auto 36px}.jstree-default-small.jstree-rtl .jstree-node{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==\");background-position:100% 1px;background-repeat:repeat-y}.jstree-default-small.jstree-rtl .jstree-last{background:transparent}.jstree-default-small.jstree-rtl .jstree-open>.jstree-ocl{background-position:-135px -39px}.jstree-default-small.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-103px -39px}.jstree-default-small.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-71px -39px}.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-39px -39px}.jstree-default-small.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:-7px -39px}.jstree-default-small .jstree-themeicon-custom{background-color:transparent;background-image:none;background-position:0 0}.jstree-default-small>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url(throbber.gif) center center no-repeat}.jstree-default-small .jstree-file{background:url(32px.png) -103px -71px no-repeat}.jstree-default-small .jstree-folder{background:url(32px.png) -263px -7px no-repeat}.jstree-default-small>.jstree-container-ul>.jstree-node{margin-left:0;margin-right:0}#jstree-dnd.jstree-default-small{line-height:18px;padding:0 4px}#jstree-dnd.jstree-default-small .jstree-ok,#jstree-dnd.jstree-default-small .jstree-er{background-image:url(32px.png);background-repeat:no-repeat;background-color:transparent}#jstree-dnd.jstree-default-small i{background:transparent;width:18px;height:18px;line-height:18px}#jstree-dnd.jstree-default-small .jstree-ok{background-position:-7px -71px}#jstree-dnd.jstree-default-small .jstree-er{background-position:-39px -71px}.jstree-default-small.jstree-rtl .jstree-node{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAACAQMAAABv1h6PAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMHBgAAiABBI4gz9AAAAABJRU5ErkJggg==\")}.jstree-default-small.jstree-rtl .jstree-last{background:transparent}.jstree-default-large .jstree-node{min-height:32px;line-height:32px;margin-left:32px;min-width:32px}.jstree-default-large .jstree-anchor{line-height:32px;height:32px}.jstree-default-large .jstree-icon{width:32px;height:32px;line-height:32px}.jstree-default-large .jstree-icon:empty{width:32px;height:32px;line-height:32px}.jstree-default-large.jstree-rtl .jstree-node{margin-right:32px}.jstree-default-large .jstree-wholerow{height:32px}.jstree-default-large .jstree-node,.jstree-default-large .jstree-icon{background-image:url(32px.png)}.jstree-default-large .jstree-node{background-position:-288px 0;background-repeat:repeat-y}.jstree-default-large .jstree-last{background:transparent}.jstree-default-large .jstree-open>.jstree-ocl{background-position:-128px 0}.jstree-default-large .jstree-closed>.jstree-ocl{background-position:-96px 0}.jstree-default-large .jstree-leaf>.jstree-ocl{background-position:-64px 0}.jstree-default-large .jstree-themeicon{background-position:-256px 0}.jstree-default-large>.jstree-no-dots .jstree-node,.jstree-default-large>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default-large>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-32px 0}.jstree-default-large>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:0 0}.jstree-default-large .jstree-disabled{background:transparent}.jstree-default-large .jstree-disabled.jstree-hovered{background:transparent}.jstree-default-large .jstree-disabled.jstree-clicked{background:#efefef}.jstree-default-large .jstree-checkbox{background-position:-160px 0}.jstree-default-large .jstree-checkbox:hover{background-position:-160px -32px}.jstree-default-large.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox,.jstree-default-large .jstree-checked>.jstree-checkbox{background-position:-224px 0}.jstree-default-large.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox:hover,.jstree-default-large .jstree-checked>.jstree-checkbox:hover{background-position:-224px -32px}.jstree-default-large .jstree-anchor>.jstree-undetermined{background-position:-192px 0}.jstree-default-large .jstree-anchor>.jstree-undetermined:hover{background-position:-192px -32px}.jstree-default-large .jstree-checkbox-disabled{opacity:.8;filter:url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'jstree-grayscale\\'><feColorMatrix type=\\'matrix\\' values=\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\'/></filter></svg>#jstree-grayscale\");filter:gray;-webkit-filter:grayscale(100%)}.jstree-default-large>.jstree-striped{background-size:auto 64px}.jstree-default-large.jstree-rtl .jstree-node{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAACAQMAAAB49I5GAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjAAMOBgAAGAAJMwQHdQAAAABJRU5ErkJggg==\");background-position:100% 1px;background-repeat:repeat-y}.jstree-default-large.jstree-rtl .jstree-last{background:transparent}.jstree-default-large.jstree-rtl .jstree-open>.jstree-ocl{background-position:-128px -32px}.jstree-default-large.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-96px -32px}.jstree-default-large.jstree-rtl .jstree-leaf>.jstree-ocl{background-position:-64px -32px}.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-node,.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-open>.jstree-ocl{background-position:-32px -32px}.jstree-default-large.jstree-rtl>.jstree-no-dots .jstree-closed>.jstree-ocl{background-position:0 -32px}.jstree-default-large .jstree-themeicon-custom{background-color:transparent;background-image:none;background-position:0 0}.jstree-default-large>.jstree-container-ul .jstree-loading>.jstree-ocl{background:url(throbber.gif) center center no-repeat}.jstree-default-large .jstree-file{background:url(32px.png) -96px -64px no-repeat}.jstree-default-large .jstree-folder{background:url(32px.png) -256px 0 no-repeat}.jstree-default-large>.jstree-container-ul>.jstree-node{margin-left:0;margin-right:0}#jstree-dnd.jstree-default-large{line-height:32px;padding:0 4px}#jstree-dnd.jstree-default-large .jstree-ok,#jstree-dnd.jstree-default-large .jstree-er{background-image:url(32px.png);background-repeat:no-repeat;background-color:transparent}#jstree-dnd.jstree-default-large i{background:transparent;width:32px;height:32px;line-height:32px}#jstree-dnd.jstree-default-large .jstree-ok{background-position:0 -64px}#jstree-dnd.jstree-default-large .jstree-er{background-position:-32px -64px}.jstree-default-large.jstree-rtl .jstree-node{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAACAQMAAAAD0EyKAAAABlBMVEUAAAAdHRvEkCwcAAAAAXRSTlMAQObYZgAAAAxJREFUCNdjgIIGBgABCgCBvVLXcAAAAABJRU5ErkJggg==\")}.jstree-default-large.jstree-rtl .jstree-last{background:transparent}@media (max-width:768px){#jstree-dnd.jstree-dnd-responsive{line-height:40px;font-weight:700;font-size:1.1em;text-shadow:1px 1px #fff}#jstree-dnd.jstree-dnd-responsive>i{background:transparent;width:40px;height:40px}#jstree-dnd.jstree-dnd-responsive>.jstree-ok{background-image:url(40px.png);background-position:0 -200px;background-size:120px 240px}#jstree-dnd.jstree-dnd-responsive>.jstree-er{background-image:url(40px.png);background-position:-40px -200px;background-size:120px 240px}#jstree-marker.jstree-dnd-responsive{border-left-width:10px;border-top-width:10px;border-bottom-width:10px;margin-top:-10px}}@media (max-width:768px){.jstree-default-responsive .jstree-icon{background-image:url(40px.png)}.jstree-default-responsive .jstree-node,.jstree-default-responsive .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default-responsive .jstree-node{min-height:40px;line-height:40px;margin-left:40px;min-width:40px;white-space:nowrap}.jstree-default-responsive .jstree-anchor{line-height:40px;height:40px}.jstree-default-responsive .jstree-icon,.jstree-default-responsive .jstree-icon:empty{width:40px;height:40px;line-height:40px}.jstree-default-responsive>.jstree-container-ul>.jstree-node{margin-left:0}.jstree-default-responsive.jstree-rtl .jstree-node{margin-left:0;margin-right:40px}.jstree-default-responsive.jstree-rtl .jstree-container-ul>.jstree-node{margin-right:0}.jstree-default-responsive .jstree-ocl,.jstree-default-responsive .jstree-themeicon,.jstree-default-responsive .jstree-checkbox{background-size:120px 240px}.jstree-default-responsive .jstree-leaf>.jstree-ocl{background:transparent}.jstree-default-responsive .jstree-open>.jstree-ocl{background-position:0 0!important}.jstree-default-responsive .jstree-closed>.jstree-ocl{background-position:0 -40px!important}.jstree-default-responsive.jstree-rtl .jstree-closed>.jstree-ocl{background-position:-40px 0!important}.jstree-default-responsive .jstree-themeicon{background-position:-40px -40px}.jstree-default-responsive .jstree-checkbox,.jstree-default-responsive .jstree-checkbox:hover{background-position:-40px -80px}.jstree-default-responsive.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox,.jstree-default-responsive.jstree-checkbox-selection .jstree-clicked>.jstree-checkbox:hover,.jstree-default-responsive .jstree-checked>.jstree-checkbox,.jstree-default-responsive .jstree-checked>.jstree-checkbox:hover{background-position:0 -80px}.jstree-default-responsive .jstree-anchor>.jstree-undetermined,.jstree-default-responsive .jstree-anchor>.jstree-undetermined:hover{background-position:0 -120px}.jstree-default-responsive .jstree-anchor{font-weight:700;font-size:1.1em;text-shadow:1px 1px #fff}.jstree-default-responsive>.jstree-striped{background:transparent}.jstree-default-responsive .jstree-wholerow{border-top:1px solid rgba(255,255,255,.7);border-bottom:1px solid rgba(64,64,64,.2);background:#ebebeb;height:40px}.jstree-default-responsive .jstree-wholerow-hovered{background:#e7f4f9}.jstree-default-responsive .jstree-wholerow-clicked{background:#beebff}.jstree-default-responsive .jstree-children .jstree-last>.jstree-wholerow{box-shadow:inset 0 -6px 3px -5px #666}.jstree-default-responsive .jstree-children .jstree-open>.jstree-wholerow{box-shadow:inset 0 6px 3px -5px #666;border-top:0}.jstree-default-responsive .jstree-children .jstree-open+.jstree-open{box-shadow:none}.jstree-default-responsive .jstree-node,.jstree-default-responsive .jstree-icon,.jstree-default-responsive .jstree-node>.jstree-ocl,.jstree-default-responsive .jstree-themeicon,.jstree-default-responsive .jstree-checkbox{background-image:url(40px.png);background-size:120px 240px}.jstree-default-responsive .jstree-node{background-position:-80px 0;background-repeat:repeat-y}.jstree-default-responsive .jstree-last{background:transparent}.jstree-default-responsive .jstree-leaf>.jstree-ocl{background-position:-40px -120px}.jstree-default-responsive .jstree-last>.jstree-ocl{background-position:-40px -160px}.jstree-default-responsive .jstree-themeicon-custom{background-color:transparent;background-image:none;background-position:0 0}.jstree-default-responsive .jstree-file{background:url(40px.png) 0 -160px no-repeat;background-size:120px 240px}.jstree-default-responsive .jstree-folder{background:url(40px.png) -40px -40px no-repeat;background-size:120px 240px}.jstree-default-responsive>.jstree-container-ul>.jstree-node{margin-left:0;margin-right:0}}.jstree-node .jstree-input{padding:2px 4px;font-size:12px;height:22px}.jstree-node>.jstree-input{position:absolute;right:0;top:0;width:100px}.jstree-node .bootstrap-touchspin{position:absolute;right:0;top:0;width:100px}.jstree-node .bootstrap-touchspin .btn{margin-top:-5px;padding:1px 4px;height:22px}.jstree-node .bootstrap-touchspin .input-group-btn i{font-size:12px}");
}),define("plugins/datatree/3.2.1/jstree",["plugins/datatree/extend/plugin.added"],function(a,b,c){var d=a("plugins/datatree/extend/plugin.added");if(!$.jstree){var e,f,g=0,h=!1,i=!1,j=!1,k=[],l=$("script:last").attr("src"),m=window.document,n=m.createElement("LI");n.setAttribute("role","treeitem"),e=m.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),e=m.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),f=m.createElement("I"),f.setAttribute("role","presentation"),e.appendChild(f),n.appendChild(e),e=f=null,$.jstree={version:"3.2.1",defaults:{plugins:[]},plugins:{},path:l&&-1!==l.indexOf("/")?l.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},$.jstree.create=function(a,b){var c=new $.jstree.core(++g),d=b;return b=$.extend(!0,{},$.jstree.defaults,b),d&&d.plugins&&(b.plugins=d.plugins),$.each(b.plugins,function(a,d){"core"!==a&&(c=c.plugin(d,b[d]))}),$(a).data("jstree",c),c.init(a,b),c},$.jstree.destroy=function(){$(".jstree:jstree").jstree("destroy"),$(m).off(".jstree")},$.jstree.core=function(a){this._id=a,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},$.jstree.reference=function(a){var b=null,c=null;if(!a||!a.id||a.tagName&&a.nodeType||(a=a.id),!c||!c.length)try{c=$(a)}catch(d){}if(!c||!c.length)try{c=$("#"+a.replace($.jstree.idregex,"\\$&"))}catch(d){}return c&&c.length&&(c=c.closest(".jstree")).length&&(c=c.data("jstree"))?b=c:$(".jstree").each(function(){var c=$(this).data("jstree");return c&&c._model.data[a]?(b=c,!1):void 0}),b},$.fn.jstree=function(a){var b="string"==typeof a,c=Array.prototype.slice.call(arguments,1),d=null;return a!==!0||this.length?(this.each(function(){var e=$.jstree.reference(this),f=b&&e?e[a]:null;return d=b&&f?f.apply(e,c):null,e||b||void 0!==a&&!$.isPlainObject(a)||$.jstree.create(this,a),(e&&!b||a===!0)&&(d=e||!1),null!==d&&void 0!==d?!1:void 0}),null!==d&&void 0!==d?d:this):!1},$.expr[":"].jstree=$.expr.createPseudo(function(a){return function(a){return $(a).hasClass("jstree")&&void 0!==$(a).data("jstree")}}),$.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:$.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},$.jstree.core.prototype={plugin:function(a,b){var c=$.jstree.plugins[a];return c?(this._data[a]={},c.prototype=this,new c(b,this)):this},init:function(a,b){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=$(a).addClass("jstree jstree-"+this._id),this.settings=b,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node($.jstree.root,function(){$.isFunction(b.initedCallback)&&b.initedCallback()})},destroy:function(a){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(b){}a||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var a="",b=null,c=0;this.element.on("dblclick.jstree",function(a){if(a.target.tagName&&"input"===a.target.tagName.toLowerCase())return!0;if(m.selection&&m.selection.empty)m.selection.empty();else if(window.getSelection){var b=window.getSelection();try{b.removeAllRanges(),b.collapse()}catch(c){}}}).on("mousedown.jstree",$.proxy(function(a){a.target===this.element[0]&&(a.preventDefault(),c=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(a){a.preventDefault()}).on("click.jstree",".jstree-ocl",$.proxy(function(a){this.toggle_node(a.target)},this)).on("dblclick.jstree",".jstree-anchor",$.proxy(function(a){return a.target.tagName&&"input"===a.target.tagName.toLowerCase()?!0:void(this.settings.core.dblclick_toggle&&this.toggle_node(a.target))},this)).on("click.jstree",".jstree-anchor",$.proxy(function(a){a.preventDefault(),a.currentTarget!==m.activeElement&&$(a.currentTarget).focus(),this.activate_node(a.currentTarget,a)},this)).on("keydown.jstree",".jstree-anchor",$.proxy(function(a){if(a.target.tagName&&"input"===a.target.tagName.toLowerCase())return!0;if(32!==a.which&&13!==a.which&&(a.shiftKey||a.ctrlKey||a.altKey||a.metaKey))return!0;var b=null;switch(this._data.core.rtl&&(37===a.which?a.which=39:39===a.which&&(a.which=37)),a.which){case 32:a.ctrlKey&&(a.type="click",$(a.currentTarget).trigger(a));break;case 13:a.type="click",$(a.currentTarget).trigger(a);break;case 37:a.preventDefault(),this.is_open(a.currentTarget)?this.close_node(a.currentTarget):(b=this.get_parent(a.currentTarget),b&&b.id!==$.jstree.root&&this.get_node(b,!0).children(".jstree-anchor").focus());break;case 38:a.preventDefault(),b=this.get_prev_dom(a.currentTarget),b&&b.length&&b.children(".jstree-anchor").focus();break;case 39:a.preventDefault(),this.is_closed(a.currentTarget)?this.open_node(a.currentTarget,function(a){this.get_node(a,!0).children(".jstree-anchor").focus()}):this.is_open(a.currentTarget)&&(b=this.get_node(a.currentTarget,!0).children(".jstree-children")[0],b&&$(this._firstChild(b)).children(".jstree-anchor").focus());break;case 40:a.preventDefault(),b=this.get_next_dom(a.currentTarget),b&&b.length&&b.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:a.preventDefault(),b=this._firstChild(this.get_container_ul()[0]),b&&$(b).children(".jstree-anchor").filter(":visible").focus();break;case 35:a.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",$.proxy(function(a,b){b.status&&(b.node.id!==$.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout($.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var a,b,c=[];for(a=0,b=this._data.core.selected.length;b>a;a++)c=c.concat(this._model.data[this._data.core.selected[a]].parents);for(c=$.vakata.array_unique(c),a=0,b=c.length;b>a;a++)this.open_node(c[a],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",$.proxy(function(c){if(c.target.tagName&&"input"===c.target.tagName.toLowerCase())return!0;b&&clearTimeout(b),b=setTimeout(function(){a=""},500);var d=String.fromCharCode(c.which).toLowerCase(),e=this.element.find(".jstree-anchor").filter(":visible"),f=e.index(m.activeElement)||0,g=!1;if(a+=d,a.length>1){if(e.slice(f).each($.proxy(function(b,c){return 0===$(c).text().toLowerCase().indexOf(a)?($(c).focus(),g=!0,!1):void 0},this)),g)return;if(e.slice(0,f).each($.proxy(function(b,c){return 0===$(c).text().toLowerCase().indexOf(a)?($(c).focus(),g=!0,!1):void 0},this)),g)return}if(new RegExp("^"+d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(a)){if(e.slice(f+1).each($.proxy(function(a,b){return $(b).text().toLowerCase().charAt(0)===d?($(b).focus(),g=!0,!1):void 0},this)),g)return;if(e.slice(0,f+1).each($.proxy(function(a,b){return $(b).text().toLowerCase().charAt(0)===d?($(b).focus(),g=!0,!1):void 0},this)),g)return}},this)).on("init.jstree",$.proxy(function(){var a=this.settings.core.themes;this._data.core.themes.dots=a.dots,this._data.core.themes.stripes=a.stripes,this._data.core.themes.icons=a.icons,this.set_theme(a.name||"default",a.url),this.set_theme_variant(a.variant)},this)).on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",$.proxy(function(a){this._data.core.focused=null,$(a.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",$.proxy(function(a){var b=this.get_node(a.currentTarget);b&&b.id&&(this._data.core.focused=b.id),this.element.find(".jstree-hovered").not(a.currentTarget).mouseleave(),$(a.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",$.proxy(function(){if(+new Date-c>500&&!this._data.core.focused){c=0;var a=this.get_node(this.element.attr("aria-activedescendant"),!0);a&&a.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",$.proxy(function(a){this.hover_node(a.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",$.proxy(function(a){this.dehover_node(a.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),$(m).off(".jstree-"+this._id)},trigger:function(a,b){b||(b={}),b.instance=this,this.element.triggerHandler(a.replace(".jstree","")+".jstree",b)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(a){var b=this.settings.core.strings;return $.isFunction(b)?b.call(this,a):b&&b[a]?b[a]:a},_firstChild:function(a){for(a=a?a.firstChild:null;null!==a&&1!==a.nodeType;)a=a.nextSibling;return a},_nextSibling:function(a){for(a=a?a.nextSibling:null;null!==a&&1!==a.nodeType;)a=a.nextSibling;return a},_previousSibling:function(a){for(a=a?a.previousSibling:null;null!==a&&1!==a.nodeType;)a=a.previousSibling;return a},get_node:function(a,b){a&&a.id&&(a=a.id);var c;try{if(this._model.data[a])a=this._model.data[a];else if("string"==typeof a&&this._model.data[a.replace(/^#/,"")])a=this._model.data[a.replace(/^#/,"")];else if("string"==typeof a&&(c=$("#"+a.replace($.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[c.closest(".jstree-node").attr("id")])a=this._model.data[c.closest(".jstree-node").attr("id")];else if((c=$(a,this.element)).length&&this._model.data[c.closest(".jstree-node").attr("id")])a=this._model.data[c.closest(".jstree-node").attr("id")];else{if(!(c=$(a,this.element)).length||!c.hasClass("jstree"))return!1;a=this._model.data[$.jstree.root]}return b&&(a=a.id===$.jstree.root?this.element:$("#"+a.id.replace($.jstree.idregex,"\\$&"),this.element)),a}catch(d){return!1}},get_path:function(a,b,c){if(a=a.parents?a:this.get_node(a),!a||a.id===$.jstree.root||!a.parents)return!1;var d,e,f=[];for(f.push(c?a.id:a.text),d=0,e=a.parents.length;e>d;d++)f.push(c?a.parents[d]:this.get_text(a.parents[d]));return f=f.reverse().slice(1),b?f.join(b):f},get_next_dom:function(a,b){var c;if(a=this.get_node(a,!0),a[0]===this.element[0]){for(c=this._firstChild(this.get_container_ul()[0]);c&&0===c.offsetHeight;)c=this._nextSibling(c);return c?$(c):!1}if(!a||!a.length)return!1;if(b){c=a[0];do c=this._nextSibling(c);while(c&&0===c.offsetHeight);return c?$(c):!1}if(a.hasClass("jstree-open")){for(c=this._firstChild(a.children(".jstree-children")[0]);c&&0===c.offsetHeight;)c=this._nextSibling(c);if(null!==c)return $(c)}c=a[0];do c=this._nextSibling(c);while(c&&0===c.offsetHeight);return null!==c?$(c):a.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(a,b){var c;if(a=this.get_node(a,!0),a[0]===this.element[0]){for(c=this.get_container_ul()[0].lastChild;c&&0===c.offsetHeight;)c=this._previousSibling(c);return c?$(c):!1}if(!a||!a.length)return!1;if(b){c=a[0];do c=this._previousSibling(c);while(c&&0===c.offsetHeight);return c?$(c):!1}c=a[0];do c=this._previousSibling(c);while(c&&0===c.offsetHeight);if(null!==c){for(a=$(c);a.hasClass("jstree-open");)a=a.children(".jstree-children").first().children(".jstree-node:visible:last");return a}return c=a[0].parentNode.parentNode,c&&c.className&&-1!==c.className.indexOf("jstree-node")?$(c):!1},get_parent:function(a){return a=this.get_node(a),a&&a.id!==$.jstree.root?a.parent:!1},get_children_dom:function(a){return a=this.get_node(a,!0),a[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):a&&a.length?a.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(a){return a=this.get_node(a),a&&(a.state.loaded===!1||a.children.length>0)},is_loaded:function(a){return a=this.get_node(a),a&&a.state.loaded},is_loading:function(a){return a=this.get_node(a),a&&a.state&&a.state.loading},is_open:function(a){return a=this.get_node(a),a&&a.state.opened},is_closed:function(a){return a=this.get_node(a),a&&this.is_parent(a)&&!a.state.opened},is_leaf:function(a){return!this.is_parent(a)},load_node:function(a,b){var c,d,e,f,g;if($.isArray(a))return this._load_nodes(a.slice(),b),!0;if(a=this.get_node(a),!a)return b&&b.call(this,a,!1),!1;if(a.state.loaded){for(a.state.loaded=!1,c=0,d=a.children_d.length;d>c;c++){for(e=0,f=a.parents.length;f>e;e++)this._model.data[a.parents[e]].children_d=$.vakata.array_remove_item(this._model.data[a.parents[e]].children_d,a.children_d[c]);this._model.data[a.children_d[c]].state.selected&&(g=!0,this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,a.children_d[c])),delete this._model.data[a.children_d[c]]}a.children=[],a.children_d=[],g&&this.trigger("changed",{action:"load_node",node:a,selected:this._data.core.selected})}return a.state.failed=!1,a.state.loading=!0,this.get_node(a,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(a,$.proxy(function(c){a=this._model.data[a.id],a.state.loading=!1,a.state.loaded=c,a.state.failed=!a.state.loaded;var d=this.get_node(a,!0),e=0,f=0,g=this._model.data,h=!1;for(e=0,f=a.children.length;f>e;e++)if(g[a.children[e]]&&!g[a.children[e]].state.hidden){h=!0;break}a.state.loaded&&!h&&d&&d.length&&!d.hasClass("jstree-leaf")&&d.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),d.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:a,status:c}),b&&b.call(this,a,c)},this)),!0},_load_nodes:function(a,b,c){var d,e,f=!0,g=function(){this._load_nodes(a,b,!0)},h=this._model.data,i=[];for(d=0,e=a.length;e>d;d++)!h[a[d]]||(h[a[d]].state.loaded||h[a[d]].state.failed)&&c||(this.is_loading(a[d])||this.load_node(a[d],g),f=!1);if(f){for(d=0,e=a.length;e>d;d++)h[a[d]]&&h[a[d]].state.loaded&&i.push(a[d]);b&&!b.done&&(b.call(this,i),b.done=!0)}},load_all:function(a,b){if(a||(a=$.jstree.root),a=this.get_node(a),!a)return!1;var c,d,e=[],f=this._model.data,g=f[a.id].children_d;for(a.state&&!a.state.loaded&&e.push(a.id),c=0,d=g.length;d>c;c++)f[g[c]]&&f[g[c]].state&&!f[g[c]].state.loaded&&e.push(g[c]);e.length?this._load_nodes(e,function(){this.load_all(a,b)}):(b&&b.call(this,a),this.trigger("load_all",{node:a}))},_load_node:function(a,b){var c,d=this.settings.core.data;return d?$.isFunction(d)?d.call(this,a,$.proxy(function(c){c===!1&&b.call(this,!1),this["string"==typeof c?"_append_html_data":"_append_json_data"](a,"string"==typeof c?$($.parseHTML(c)).filter(function(){return 3!==this.nodeType}):c,function(a){b.call(this,a)})},this)):"object"==typeof d?d.url?(d=$.extend(!0,{},d),$.isFunction(d.url)&&(d.url=d.url.call(this,a)),$.isFunction(d.data)&&(d.data=d.data.call(this,a)),$.ajax(d).done($.proxy(function(c,d,e){var f=e.getResponseHeader("Content-Type");return f&&-1!==f.indexOf("json")||"object"==typeof c?this._append_json_data(a,c,function(a){b.call(this,a)}):f&&-1!==f.indexOf("html")||"string"==typeof c?this._append_html_data(a,$($.parseHTML(c)).filter(function(){return 3!==this.nodeType}),function(a){b.call(this,a)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:a.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error),b.call(this,!1))},this)).fail($.proxy(function(c){b.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:a.id,xhr:c})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(c=$.isArray(d)||$.isPlainObject(d)?JSON.parse(JSON.stringify(d)):d,a.id===$.jstree.root?this._append_json_data(a,c,function(a){b.call(this,a)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:a.id})},this.settings.core.error.call(this,this._data.core.last_error),b.call(this,!1))):"string"==typeof d?a.id===$.jstree.root?this._append_html_data(a,$($.parseHTML(d)).filter(function(){return 3!==this.nodeType}),function(a){b.call(this,a)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:a.id})},this.settings.core.error.call(this,this._data.core.last_error),b.call(this,!1)):b.call(this,!1):a.id===$.jstree.root?this._append_html_data(a,this._data.core.original_container_html.clone(!0),function(a){b.call(this,a)}):b.call(this,!1)},_node_changed:function(a){a=this.get_node(a),a&&this._model.changed.push(a.id)},_append_html_data:function(a,b,c){a=this.get_node(a),a.children=[],a.children_d=[];var d,e,f,g=b.is("ul")?b.children():b,h=a.id,i=[],j=[],k=this._model.data,l=k[h],m=this._data.core.selected.length;for(g.each($.proxy(function(a,b){d=this._parse_model_from_html($(b),h,l.parents.concat()),d&&(i.push(d),j.push(d),k[d].children_d.length&&(j=j.concat(k[d].children_d)))},this)),l.children=i,l.children_d=j,e=0,f=l.parents.length;f>e;e++)k[l.parents[e]].children_d=k[l.parents[e]].children_d.concat(j);this.trigger("model",{nodes:j,parent:h}),h!==$.jstree.root?(this._node_changed(h),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==m&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),c.call(this,!0)},_append_json_data:function(a,b,c,d){if(null!==this.element){a=this.get_node(a),a.children=[],a.children_d=[],b.d&&(b=b.d,"string"==typeof b&&(b=JSON.parse(b))),$.isArray(b)||(b=[b]);var e=null,f={df:this._model.default_state,dat:b,par:a.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},g=function(a,b){a.data&&(a=a.data);var c,d,e,f,g=a.dat,h=a.par,i=[],j=[],k=[],l=a.df,m=a.t_id,n=a.t_cnt,o=a.m,p=o[h],q=a.sel,r=function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e,f,g,h,i=a.id.toString(),j={id:i,text:a.text||"",icon:a.icon!==b?a.icon:!0,parent:c,parents:d,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in l)l.hasOwnProperty(e)&&(j.state[e]=l[e]);if(a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(j.icon=a.data.jstree.icon),j.icon!==b&&null!==j.icon&&""!==j.icon||(j.icon=!0),a&&a.data&&(j.data=a.data,a.data.jstree))for(e in a.data.jstree)a.data.jstree.hasOwnProperty(e)&&(j.state[e]=a.data.jstree[e]);if(a&&"object"==typeof a.state)for(e in a.state)a.state.hasOwnProperty(e)&&(j.state[e]=a.state[e]);if(a&&"object"==typeof a.li_attr)for(e in a.li_attr)a.li_attr.hasOwnProperty(e)&&(j.li_attr[e]=a.li_attr[e]);if(j.li_attr.id||(j.li_attr.id=i),a&&"object"==typeof a.a_attr)for(e in a.a_attr)a.a_attr.hasOwnProperty(e)&&(j.a_attr[e]=a.a_attr[e]);for(a&&a.children&&a.children===!0&&(j.state.loaded=!1,j.children=[],j.children_d=[]),o[j.id]=j,e=0,f=j.children.length;f>e;e++)g=r(o[j.children[e]],j.id,d),h=o[g],j.children_d.push(g),h.children_d.length&&(j.children_d=j.children_d.concat(h.children_d));return delete a.data,delete a.children,o[j.id].original=a,j.state.selected&&k.push(j.id),j.id},s=function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e,f,g,h,i,j=!1;do j="j"+m+"_"+ ++n;while(o[j]);i={id:!1,text:"string"==typeof a?a:"",icon:"object"==typeof a&&a.icon!==b?a.icon:!0,parent:c,parents:d,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(e in l)l.hasOwnProperty(e)&&(i.state[e]=l[e]);if(a&&a.id&&(i.id=a.id.toString()),a&&a.text&&(i.text=a.text),a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(i.icon=a.data.jstree.icon),i.icon!==b&&null!==i.icon&&""!==i.icon||(i.icon=!0),a&&a.data&&(i.data=a.data,a.data.jstree))for(e in a.data.jstree)a.data.jstree.hasOwnProperty(e)&&(i.state[e]=a.data.jstree[e]);if(a&&"object"==typeof a.state)for(e in a.state)a.state.hasOwnProperty(e)&&(i.state[e]=a.state[e]);if(a&&"object"==typeof a.li_attr)for(e in a.li_attr)a.li_attr.hasOwnProperty(e)&&(i.li_attr[e]=a.li_attr[e]);if(i.li_attr.id&&!i.id&&(i.id=i.li_attr.id.toString()),i.id||(i.id=j),i.li_attr.id||(i.li_attr.id=i.id),a&&"object"==typeof a.a_attr)for(e in a.a_attr)a.a_attr.hasOwnProperty(e)&&(i.a_attr[e]=a.a_attr[e]);if(a&&a.children&&a.children.length){for(e=0,f=a.children.length;f>e;e++)g=s(a.children[e],i.id,d),h=o[g],i.children.push(g),h.children_d.length&&(i.children_d=i.children_d.concat(h.children_d));i.children_d=i.children_d.concat(i.children)}return a&&a.children&&a.children===!0&&(i.state.loaded=!1,i.children=[],i.children_d=[]),delete a.data,delete a.children,i.original=a,o[i.id]=i,i.state.selected&&k.push(i.id),i.id};if(g.length&&g[0].id!==b&&g[0].parent!==b){for(d=0,e=g.length;e>d;d++)g[d].children||(g[d].children=[]),o[g[d].id.toString()]=g[d];for(d=0,e=g.length;e>d;d++)o[g[d].parent.toString()].children.push(g[d].id.toString()),p.children_d.push(g[d].id.toString());for(d=0,e=p.children.length;e>d;d++)c=r(o[p.children[d]],h,p.parents.concat()),j.push(c),o[c].children_d.length&&(j=j.concat(o[c].children_d));for(d=0,e=p.parents.length;e>d;d++)o[p.parents[d]].children_d=o[p.parents[d]].children_d.concat(j);f={cnt:n,mod:o,sel:q,par:h,dpc:j,add:k}}else{for(d=0,e=g.length;e>d;d++)c=s(g[d],h,p.parents.concat()),c&&(i.push(c),j.push(c),o[c].children_d.length&&(j=j.concat(o[c].children_d)));for(p.children=i,p.children_d=j,d=0,e=p.parents.length;e>d;d++)o[p.parents[d]].children_d=o[p.parents[d]].children_d.concat(j);f={cnt:n,mod:o,sel:q,par:h,dpc:j,add:k}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?f:void postMessage(f)},h=function(a,b){if(null!==this.element){if(this._cnt=a.cnt,this._model.data=a.mod,b){var d,e,f=a.add,g=a.sel,h=this._data.core.selected.slice(),i=this._model.data;if(g.length!==h.length||$.vakata.array_unique(g.concat(h)).length!==g.length){for(d=0,e=g.length;e>d;d++)-1===$.inArray(g[d],f)&&-1===$.inArray(g[d],h)&&(i[g[d]].state.selected=!1);for(d=0,e=h.length;e>d;d++)-1===$.inArray(h[d],g)&&(i[h[d]].state.selected=!0)}}a.add.length&&(this._data.core.selected=this._data.core.selected.concat(a.add)),this.trigger("model",{nodes:a.dpc,parent:a.par}),a.par!==$.jstree.root?(this._node_changed(a.par),this.redraw()):this.redraw(!0),a.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),c.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+g.toString()],{type:"text/javascript"}))),!this._data.core.working||d?(this._data.core.working=!0,e=new window.Worker(this._wrk),e.onmessage=$.proxy(function(a){h.call(this,a.data,!0);try{e.terminate(),e=null}catch(b){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),f.par?e.postMessage(f):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([a,b,c,!0])}catch(i){h.call(this,g(f),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else h.call(this,g(f),!1)}},_parse_model_from_html:function(a,b,c){c=c?[].concat(c):[],b&&c.unshift(b);var d,e,f,g,h,i=this._model.data,j={id:!1,text:!1,icon:!0,parent:b,parents:c,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in this._model.default_state)this._model.default_state.hasOwnProperty(f)&&(j.state[f]=this._model.default_state[f]);if(g=$.vakata.attributes(a,!0),$.each(g,function(a,b){return b=$.trim(b),b.length?(j.li_attr[a]=b,void("id"===a&&(j.id=b.toString()))):!0}),g=a.children("a").first(),g.length&&(g=$.vakata.attributes(g,!0),$.each(g,function(a,b){b=$.trim(b),b.length&&(j.a_attr[a]=b)})),g=a.children("a").first().length?a.children("a").first().clone():a.clone(),g.children("ins, i, ul").remove(),g=g.html(),g=$("<div />").html(g),j.text=this.settings.core.force_text?g.text():g.html(),g=a.data(),j.data=g?$.extend(!0,{},g):null,j.state.opened=a.hasClass("jstree-open"),j.state.selected=a.children("a").hasClass("jstree-clicked"),j.state.disabled=a.children("a").hasClass("jstree-disabled"),j.data&&j.data.jstree)for(f in j.data.jstree)j.data.jstree.hasOwnProperty(f)&&(j.state[f]=j.data.jstree[f]);g=a.children("a").children(".jstree-themeicon"),g.length&&(j.icon=g.hasClass("jstree-themeicon-hidden")?!1:g.attr("rel")),void 0!==j.state.icon&&(j.icon=j.state.icon),void 0!==j.icon&&null!==j.icon&&""!==j.icon||(j.icon=!0),g=a.children("ul").children("li");do h="j"+this._id+"_"+ ++this._cnt;while(i[h]);return j.id=j.li_attr.id?j.li_attr.id.toString():h,g.length?(g.each($.proxy(function(a,b){d=this._parse_model_from_html($(b),j.id,c),e=this._model.data[d],j.children.push(d),e.children_d.length&&(j.children_d=j.children_d.concat(e.children_d))},this)),j.children_d=j.children_d.concat(j.children)):a.hasClass("jstree-closed")&&(j.state.loaded=!1),j.li_attr["class"]&&(j.li_attr["class"]=j.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),j.a_attr["class"]&&(j.a_attr["class"]=j.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),i[j.id]=j,j.state.selected&&this._data.core.selected.push(j.id),j.id},_parse_model_from_flat_json:function(a,b,c){c=c?c.concat():[],b&&c.unshift(b);var d,e,f,g,h=a.id.toString(),i=this._model.data,j=this._model.default_state,k={id:h,text:a.text||"",icon:void 0!==a.icon?a.icon:!0,parent:b,parents:c,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(d in j)j.hasOwnProperty(d)&&(k.state[d]=j[d]);if(a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(k.icon=a.data.jstree.icon),void 0!==k.icon&&null!==k.icon&&""!==k.icon||(k.icon=!0),a&&a.data&&(k.data=a.data,a.data.jstree))for(d in a.data.jstree)a.data.jstree.hasOwnProperty(d)&&(k.state[d]=a.data.jstree[d]);if(a&&"object"==typeof a.state)for(d in a.state)a.state.hasOwnProperty(d)&&(k.state[d]=a.state[d]);if(a&&"object"==typeof a.li_attr)for(d in a.li_attr)a.li_attr.hasOwnProperty(d)&&(k.li_attr[d]=a.li_attr[d]);if(k.li_attr.id||(k.li_attr.id=h),a&&"object"==typeof a.a_attr)for(d in a.a_attr)a.a_attr.hasOwnProperty(d)&&(k.a_attr[d]=a.a_attr[d]);for(a&&a.children&&a.children===!0&&(k.state.loaded=!1,k.children=[],k.children_d=[]),i[k.id]=k,d=0,e=k.children.length;e>d;d++)f=this._parse_model_from_flat_json(i[k.children[d]],k.id,c),g=i[f],k.children_d.push(f),g.children_d.length&&(k.children_d=k.children_d.concat(g.children_d));return delete a.data,delete a.children,i[k.id].original=a,k.state.selected&&this._data.core.selected.push(k.id),k.id},_parse_model_from_json:function(a,b,c){c=c?c.concat():[],b&&c.unshift(b);var d,e,f,g,h,i=!1,j=this._model.data,k=this._model.default_state;do i="j"+this._id+"_"+ ++this._cnt;while(j[i]);h={id:!1,text:"string"==typeof a?a:"",icon:"object"==typeof a&&void 0!==a.icon?a.icon:!0,parent:b,parents:c,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(d in k)k.hasOwnProperty(d)&&(h.state[d]=k[d]);if(a&&a.id&&(h.id=a.id.toString()),a&&a.text&&(h.text=a.text),a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(h.icon=a.data.jstree.icon),void 0!==h.icon&&null!==h.icon&&""!==h.icon||(h.icon=!0),a&&a.data&&(h.data=a.data,a.data.jstree))for(d in a.data.jstree)a.data.jstree.hasOwnProperty(d)&&(h.state[d]=a.data.jstree[d]);if(a&&"object"==typeof a.state)for(d in a.state)a.state.hasOwnProperty(d)&&(h.state[d]=a.state[d]);if(a&&"object"==typeof a.li_attr)for(d in a.li_attr)a.li_attr.hasOwnProperty(d)&&(h.li_attr[d]=a.li_attr[d]);if(h.li_attr.id&&!h.id&&(h.id=h.li_attr.id.toString()),h.id||(h.id=i),h.li_attr.id||(h.li_attr.id=h.id),a&&"object"==typeof a.a_attr)for(d in a.a_attr)a.a_attr.hasOwnProperty(d)&&(h.a_attr[d]=a.a_attr[d]);if(a&&a.children&&a.children.length){for(d=0,e=a.children.length;e>d;d++)f=this._parse_model_from_json(a.children[d],h.id,c),g=j[f],h.children.push(f),g.children_d.length&&(h.children_d=h.children_d.concat(g.children_d));h.children_d=h.children_d.concat(h.children)}return a&&a.children&&a.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),delete a.data,delete a.children,h.original=a,j[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_redraw:function(){var a,b,c,d=this._model.force_full_redraw?this._model.data[$.jstree.root].children.concat([]):this._model.changed.concat([]),e=m.createElement("UL"),f=this._data.core.focused;for(b=0,c=d.length;c>b;b++)a=this.redraw_node(d[b],!0,this._model.force_full_redraw),a&&this._model.force_full_redraw&&e.appendChild(a);this._model.force_full_redraw&&(e.className=this.get_container_ul()[0].className,e.setAttribute("role","group"),this.element.empty().append(e)),null!==f&&(a=this.get_node(f,!0),a&&a.length&&a.children(".jstree-anchor")[0]!==m.activeElement?a.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:d})},redraw:function(a){a&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(a){var b=this.get_node(a),c=!1,d=!1,e=!1,f=m;if(!b)return!1;if(b.id===$.jstree.root)return this.redraw(!0);if(a=this.get_node(a,!0),!a||!a.length)return!1;if(a.children(".jstree-children").remove(),a=a[0],b.children.length&&b.state.loaded){for(e=f.createElement("UL"),e.setAttribute("role","group"),e.className="jstree-children",c=0,d=b.children.length;d>c;c++)e.appendChild(this.redraw_node(b.children[c],!0,!0));a.appendChild(e)}},redraw_node:function(a,b,c,d){var e=this.get_node(a),f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l="",o=m,p=this._model.data,q=!1,r=null,s=0,t=0,u=!1,v=!1;if(!e)return!1;if(e.id===$.jstree.root)return this.redraw(!0);if(b=b||0===e.children.length,a=m.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(e.id[0])?"\\3"+e.id[0]+" "+e.id.substr(1).replace($.jstree.idregex,"\\$&"):e.id.replace($.jstree.idregex,"\\$&"))):m.getElementById(e.id))a=$(a),c||(f=a.parent().parent()[0],f===this.element[0]&&(f=null),g=a.index()),b||!e.children.length||a.children(".jstree-children").length||(b=!0),
b||(h=a.children(".jstree-children")[0]),q=a.children(".jstree-anchor")[0]===m.activeElement,a.remove();else if(b=!0,!c){if(f=e.parent!==$.jstree.root?$("#"+e.parent.replace($.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===f||f&&p[e.parent].state.opened))return!1;g=$.inArray(e.id,null===f?p[$.jstree.root].children:p[e.parent].children)}a=n.cloneNode(!0),l="jstree-node ";for(i in e.li_attr)if(e.li_attr.hasOwnProperty(i)){if("id"===i)continue;"class"!==i?a.setAttribute(i,e.li_attr[i]):l+=e.li_attr[i]}for(e.a_attr.id||(e.a_attr.id=e.id+"_anchor"),a.setAttribute("aria-selected",!!e.state.selected),a.setAttribute("aria-level",e.parents.length),a.setAttribute("aria-labelledby",e.a_attr.id),e.state.disabled&&a.setAttribute("aria-disabled",!0),i=0,j=e.children.length;j>i;i++)if(!p[e.children[i]].state.hidden){u=!0;break}if(null!==e.parent&&p[e.parent]&&!e.state.hidden&&(i=$.inArray(e.id,p[e.parent].children),v=e.id,-1!==i))for(i++,j=p[e.parent].children.length;j>i&&(p[p[e.parent].children[i]].state.hidden||(v=p[e.parent].children[i]),v===e.id);i++);e.state.hidden&&(l+=" jstree-hidden"),e.state.loaded&&!u?l+=" jstree-leaf":(l+=e.state.opened&&e.state.loaded?" jstree-open":" jstree-closed",a.setAttribute("aria-expanded",e.state.opened&&e.state.loaded)),v===e.id&&(l+=" jstree-last"),a.id=e.id,a.className=l,l=(e.state.selected?" jstree-clicked":"")+(e.state.disabled?" jstree-disabled":"");for(j in e.a_attr)if(e.a_attr.hasOwnProperty(j)){if("href"===j&&"#"===e.a_attr[j])continue;"class"!==j?a.childNodes[1].setAttribute(j,e.a_attr[j]):l+=" "+e.a_attr[j]}if(l.length&&(a.childNodes[1].className="jstree-anchor "+l),(e.icon&&e.icon!==!0||e.icon===!1)&&(e.icon===!1?a.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===e.icon.indexOf("/")&&-1===e.icon.indexOf(".")?a.childNodes[1].childNodes[0].className+=" "+e.icon+" jstree-themeicon-custom":(a.childNodes[1].childNodes[0].style.backgroundImage="url("+e.icon+")",a.childNodes[1].childNodes[0].style.backgroundPosition="center center",a.childNodes[1].childNodes[0].style.backgroundSize="auto",a.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?a.childNodes[1].appendChild(o.createTextNode(e.text)):a.childNodes[1].innerHTML+=e.text,b&&e.children.length&&(e.state.opened||d)&&e.state.loaded){for(k=o.createElement("UL"),k.setAttribute("role","group"),k.className="jstree-children",i=0,j=e.children.length;j>i;i++)k.appendChild(this.redraw_node(e.children[i],b,!0));a.appendChild(k)}if(h&&a.appendChild(h),!c){for(f||(f=this.element[0]),i=0,j=f.childNodes.length;j>i;i++)if(f.childNodes[i]&&f.childNodes[i].className&&-1!==f.childNodes[i].className.indexOf("jstree-children")){r=f.childNodes[i];break}r||(r=o.createElement("UL"),r.setAttribute("role","group"),r.className="jstree-children",f.appendChild(r)),f=r,g<f.childNodes.length?f.insertBefore(a,f.childNodes[g]):f.appendChild(a),q&&(s=this.element[0].scrollTop,t=this.element[0].scrollLeft,a.childNodes[1].focus(),this.element[0].scrollTop=s,this.element[0].scrollLeft=t)}return e.state.opened&&!e.state.loaded&&(e.state.opened=!1,setTimeout($.proxy(function(){this.open_node(e.id,!1,0)},this),0)),a},open_node:function(a,b,c){var d,e,f,g;if($.isArray(a)){for(a=a.slice(),d=0,e=a.length;e>d;d++)this.open_node(a[d],b,c);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(c=void 0===c?this.settings.core.animation:c,this.is_closed(a)?this.is_loaded(a)?(f=this.get_node(a,!0),g=this,f.length&&(c&&f.children(".jstree-children").length&&f.children(".jstree-children").stop(!0,!0),a.children.length&&!this._firstChild(f.children(".jstree-children")[0])&&this.draw_children(a),c?(this.trigger("before_open",{node:a}),f.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(c,function(){this.style.display="",g.trigger("after_open",{node:a})})):(this.trigger("before_open",{node:a}),f[0].className=f[0].className.replace("jstree-closed","jstree-open"),f[0].setAttribute("aria-expanded",!0))),a.state.opened=!0,b&&b.call(this,a,!0),f.length||this.trigger("before_open",{node:a}),this.trigger("open_node",{node:a}),c&&f.length||this.trigger("after_open",{node:a}),!0):this.is_loading(a)?setTimeout($.proxy(function(){this.open_node(a,b,c)},this),500):void this.load_node(a,function(a,d){return d?this.open_node(a,b,c):b?b.call(this,a,!1):!1}):(b&&b.call(this,a,!1),!1)):!1},_open_to:function(a){if(a=this.get_node(a),!a||a.id===$.jstree.root)return!1;var b,c,d=a.parents;for(b=0,c=d.length;c>b;b+=1)b!==$.jstree.root&&this.open_node(d[b],!1,0);return $("#"+a.id.replace($.jstree.idregex,"\\$&"),this.element)},close_node:function(a,b){var c,d,e,f;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.close_node(a[c],b);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?this.is_closed(a)?!1:(b=void 0===b?this.settings.core.animation:b,e=this,f=this.get_node(a,!0),f.length&&(b?f.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(b,function(){this.style.display="",f.children(".jstree-children").remove(),e.trigger("after_close",{node:a})}):(f[0].className=f[0].className.replace("jstree-open","jstree-closed"),f.attr("aria-expanded",!1).children(".jstree-children").remove())),a.state.opened=!1,this.trigger("close_node",{node:a}),void(b&&f.length||this.trigger("after_close",{node:a}))):!1},toggle_node:function(a){var b,c;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.toggle_node(a[b]);return!0}return this.is_closed(a)?this.open_node(a):this.is_open(a)?this.close_node(a):void 0},open_all:function(a,b,c){if(a||(a=$.jstree.root),a=this.get_node(a),!a)return!1;var d,e,f,g=a.id===$.jstree.root?this.get_container_ul():this.get_node(a,!0);if(!g.length){for(d=0,e=a.children_d.length;e>d;d++)this.is_closed(this._model.data[a.children_d[d]])&&(this._model.data[a.children_d[d]].state.opened=!0);return this.trigger("open_all",{node:a})}c=c||g,f=this,g=this.is_closed(a)?g.find(".jstree-closed").addBack():g.find(".jstree-closed"),g.each(function(){f.open_node(this,function(a,d){d&&this.is_parent(a)&&this.open_all(a,b,c)},b||0)}),0===c.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(c)})},close_all:function(a,b){if(a||(a=$.jstree.root),a=this.get_node(a),!a)return!1;var c,d,e=a.id===$.jstree.root?this.get_container_ul():this.get_node(a,!0),f=this;for(e.length&&(e=this.is_open(a)?e.find(".jstree-open").addBack():e.find(".jstree-open"),$(e.get().reverse()).each(function(){f.close_node(this,b||0)})),c=0,d=a.children_d.length;d>c;c++)this._model.data[a.children_d[c]].state.opened=!1;this.trigger("close_all",{node:a})},is_disabled:function(a){return a=this.get_node(a),a&&a.state&&a.state.disabled},enable_node:function(a){var b,c;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.enable_node(a[b]);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(a.state.disabled=!1,this.get_node(a,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:a})):!1},disable_node:function(a){var b,c;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.disable_node(a[b]);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(a.state.disabled=!0,this.get_node(a,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:a})):!1},hide_node:function(a,b){var c,d;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.hide_node(a[c],!0);return this.redraw(),!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?void(a.state.hidden||(a.state.hidden=!0,this._node_changed(a.parent),b||this.redraw(),this.trigger("hide_node",{node:a}))):!1},show_node:function(a,b){var c,d;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.show_node(a[c],!0);return this.redraw(),!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?void(a.state.hidden&&(a.state.hidden=!1,this._node_changed(a.parent),b||this.redraw(),this.trigger("show_node",{node:a}))):!1},hide_all:function(a){var b,c=this._model.data,d=[];for(b in c)c.hasOwnProperty(b)&&b!==$.jstree.root&&!c[b].state.hidden&&(c[b].state.hidden=!0,d.push(b));return this._model.force_full_redraw=!0,a||this.redraw(),this.trigger("hide_all",{nodes:d}),d},show_all:function(a){var b,c=this._model.data,d=[];for(b in c)c.hasOwnProperty(b)&&b!==$.jstree.root&&c[b].state.hidden&&(c[b].state.hidden=!1,d.push(b));return this._model.force_full_redraw=!0,a||this.redraw(),this.trigger("show_all",{nodes:d}),d},activate_node:function(a,b){if(this.is_disabled(a))return!1;if(b&&"object"==typeof b||(b={}),this._data.core.last_clicked=this._data.core.last_clicked&&void 0!==this._data.core.last_clicked.id?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(b.metaKey||b.ctrlKey||b.shiftKey)&&(!b.shiftKey||this._data.core.last_clicked&&this.get_parent(a)&&this.get_parent(a)===this._data.core.last_clicked.parent))if(b.shiftKey){var c,d,e=this.get_node(a).id,f=this._data.core.last_clicked.id,g=this.get_node(this._data.core.last_clicked.parent).children,h=!1;for(c=0,d=g.length;d>c;c+=1)g[c]===e&&(h=!h),g[c]===f&&(h=!h),this.is_disabled(g[c])||!h&&g[c]!==e&&g[c]!==f?this.deselect_node(g[c],!0,b):this.select_node(g[c],!0,!1,b);this.trigger("changed",{action:"select_node",node:this.get_node(a),selected:this._data.core.selected,event:b})}else this.is_selected(a)?this.deselect_node(a,!1,b):this.select_node(a,!1,!1,b);else!this.settings.core.multiple&&(b.metaKey||b.ctrlKey||b.shiftKey)&&this.is_selected(a)?this.deselect_node(a,!1,b):(this.deselect_all(!0),this.select_node(a,!1,!1,b),this._data.core.last_clicked=this.get_node(a));this.trigger("activate_node",{node:this.get_node(a),event:b})},hover_node:function(a){if(a=this.get_node(a,!0),!a||!a.length||a.children(".jstree-hovered").length)return!1;var b=this.element.find(".jstree-hovered"),c=this.element;b&&b.length&&this.dehover_node(b),a.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(a)}),setTimeout(function(){c.attr("aria-activedescendant",a[0].id)},0)},dehover_node:function(a){return a=this.get_node(a,!0),a&&a.length&&a.children(".jstree-hovered").length?(a.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(a)})):!1},select_node:function(a,b,c,d){var e,f,g;if($.isArray(a)){for(a=a.slice(),f=0,g=a.length;g>f;f++)this.select_node(a[f],b,c,d);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(e=this.get_node(a,!0),void(a.state.selected||(a.state.selected=!0,this._data.core.selected.push(a.id),c||(e=this._open_to(a)),e&&e.length&&e.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:a,selected:this._data.core.selected,event:d}),b||this.trigger("changed",{action:"select_node",node:a,selected:this._data.core.selected,event:d})))):!1},deselect_node:function(a,b,c){var d,e,f;if($.isArray(a)){for(a=a.slice(),d=0,e=a.length;e>d;d++)this.deselect_node(a[d],b,c);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(f=this.get_node(a,!0),void(a.state.selected&&(a.state.selected=!1,this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,a.id),f.length&&f.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:a,selected:this._data.core.selected,event:c}),b||this.trigger("changed",{action:"deselect_node",node:a,selected:this._data.core.selected,event:c})))):!1},select_all:function(a){var b,c,d=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[$.jstree.root].children_d.concat(),b=0,c=this._data.core.selected.length;c>b;b++)this._model.data[this._data.core.selected[b]]&&(this._model.data[this._data.core.selected[b]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),a||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:d})},deselect_all:function(a){var b,c,d=this._data.core.selected.concat([]);for(b=0,c=this._data.core.selected.length;c>b;b++)this._model.data[this._data.core.selected[b]]&&(this._model.data[this._data.core.selected[b]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:d}),a||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:d})},is_selected:function(a){return a=this.get_node(a),a&&a.id!==$.jstree.root?a.state.selected:!1},get_selected:function(a){return a?$.map(this._data.core.selected,$.proxy(function(a){return this.get_node(a)},this)):this._data.core.selected.slice()},get_top_selected:function(a){var b,c,d,e,f=this.get_selected(!0),g={};for(b=0,c=f.length;c>b;b++)g[f[b].id]=f[b];for(b=0,c=f.length;c>b;b++)for(d=0,e=f[b].children_d.length;e>d;d++)g[f[b].children_d[d]]&&delete g[f[b].children_d[d]];f=[];for(b in g)g.hasOwnProperty(b)&&f.push(b);return a?$.map(f,$.proxy(function(a){return this.get_node(a)},this)):f},get_bottom_selected:function(a){var b,c,d=this.get_selected(!0),e=[];for(b=0,c=d.length;c>b;b++)d[b].children.length||e.push(d[b].id);return a?$.map(e,$.proxy(function(a){return this.get_node(a)},this)):e},get_state:function(){var a,b={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(a in this._model.data)this._model.data.hasOwnProperty(a)&&a!==$.jstree.root&&(this._model.data[a].state.opened&&b.core.open.push(a),this._model.data[a].state.selected&&b.core.selected.push(a));return b},set_state:function(a,b){if(a){if(a.core){var c,d;if(a.core.open)return $.isArray(a.core.open)&&a.core.open.length?this._load_nodes(a.core.open,function(c){this.open_node(c,!1,0),delete a.core.open,this.set_state(a,b)},!0):(delete a.core.open,this.set_state(a,b)),!1;if(a.core.scroll)return a.core.scroll&&void 0!==a.core.scroll.left&&this.element.scrollLeft(a.core.scroll.left),a.core.scroll&&void 0!==a.core.scroll.top&&this.element.scrollTop(a.core.scroll.top),delete a.core.scroll,this.set_state(a,b),!1;if(a.core.selected)return c=this,this.deselect_all(),$.each(a.core.selected,function(a,b){c.select_node(b,!1,!0)}),delete a.core.selected,this.set_state(a,b),!1;for(d in a)a.hasOwnProperty(d)&&"core"!==d&&-1===$.inArray(d,this.settings.plugins)&&delete a[d];if($.isEmptyObject(a.core))return delete a.core,this.set_state(a,b),!1}return $.isEmptyObject(a)?(a=null,b&&b.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(a,b){this._data.core.state=b===!0?{}:this.get_state(),b&&$.isFunction(b)&&(this._data.core.state=b.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var c=this.get_container_ul()[0].className;a||(this.element.html("<ul class='"+c+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node($.jstree.root,function(a,b){b&&(this.get_container_ul()[0].className=c,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state($.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(a){if(a=this.get_node(a),!a||a.id===$.jstree.root)return!1;var b=[],c=[];this._data.core.selected.concat([]);c.push(a.id),a.state.opened===!0&&b.push(a.id),this.get_node(a,!0).find(".jstree-open").each(function(){b.push(this.id)}),this._load_nodes(c,$.proxy(function(c){this.open_node(b,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:a,nodes:c})},this))},set_id:function(a,b){if(a=this.get_node(a),!a||a.id===$.jstree.root)return!1;var c,d,e=this._model.data;for(b=b.toString(),e[a.parent].children[$.inArray(a.id,e[a.parent].children)]=b,c=0,d=a.parents.length;d>c;c++)e[a.parents[c]].children_d[$.inArray(a.id,e[a.parents[c]].children_d)]=b;for(c=0,d=a.children.length;d>c;c++)e[a.children[c]].parent=b;for(c=0,d=a.children_d.length;d>c;c++)e[a.children_d[c]].parents[$.inArray(a.id,e[a.children_d[c]].parents)]=b;return c=$.inArray(a.id,this._data.core.selected),-1!==c&&(this._data.core.selected[c]=b),c=this.get_node(a.id,!0),c&&(c.attr("id",b).children(".jstree-anchor").attr("id",b+"_anchor").end().attr("aria-labelledby",b+"_anchor"),this.element.attr("aria-activedescendant")===a.id&&this.element.attr("aria-activedescendant",b)),delete e[a.id],a.id=b,a.li_attr.id=b,e[b]=a,!0},get_text:function(a){return a=this.get_node(a),a&&a.id!==$.jstree.root?a.text:!1},set_text:function(a,b){var c,d;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.set_text(a[c],b);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(a.text=b,this.get_node(a,!0).length&&this.redraw_node(a.id),this.trigger("set_text",{obj:a,text:b}),!0):!1},get_json:function(a,b,c){if(a=this.get_node(a||$.jstree.root),!a)return!1;b&&b.flat&&!c&&(c=[]);var d,e,f={id:a.id,text:a.text,icon:this.get_icon(a),li_attr:$.extend(!0,{},a.li_attr),a_attr:$.extend(!0,{},a.a_attr),state:{},data:b&&b.no_data?!1:$.extend(!0,{},a.data)};if(b&&b.flat?f.parent=a.parent:f.children=[],!b||!b.no_state)for(d in a.state)a.state.hasOwnProperty(d)&&(f.state[d]=a.state[d]);if(b&&b.no_id&&(delete f.id,f.li_attr&&f.li_attr.id&&delete f.li_attr.id,f.a_attr&&f.a_attr.id&&delete f.a_attr.id),b&&b.flat&&a.id!==$.jstree.root&&c.push(f),!b||!b.no_children)for(d=0,e=a.children.length;e>d;d++)b&&b.flat?this.get_json(a.children[d],b,c):f.children.push(this.get_json(a.children[d],b));return b&&b.flat?c:a.id===$.jstree.root?f.children:f},create_node:function(a,b,c,d,e){if(null===a&&(a=$.jstree.root),a=this.get_node(a),!a)return!1;if(c=void 0===c?"last":c,!c.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,c,d,!0)});b||(b={text:this.get_string("New node")}),"string"==typeof b&&(b={text:b}),void 0===b.text&&(b.text=this.get_string("New node"));var f,g,h,i;switch(a.id===$.jstree.root&&("before"===c&&(c="first"),"after"===c&&(c="last")),c){case"before":f=this.get_node(a.parent),c=$.inArray(a.id,f.children),a=f;break;case"after":f=this.get_node(a.parent),c=$.inArray(a.id,f.children)+1,a=f;break;case"inside":case"first":c=0;break;case"last":c=a.children.length;break;default:c||(c=0)}if(c>a.children.length&&(c=a.children.length),b.id||(b.id=!0),!this.check("create_node",b,a,c))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(b.id===!0&&delete b.id,b=this._parse_model_from_json(b,a.id,a.parents.concat()),!b)return!1;for(f=this.get_node(b),g=[],g.push(b),g=g.concat(f.children_d),this.trigger("model",{nodes:g,parent:a.id}),a.children_d=a.children_d.concat(g),h=0,i=a.parents.length;i>h;h++)this._model.data[a.parents[h]].children_d=this._model.data[a.parents[h]].children_d.concat(g);for(b=f,f=[],h=0,i=a.children.length;i>h;h++)f[h>=c?h+1:h]=a.children[h];return f[c]=b.id,a.children=f,this.redraw_node(a,!0),d&&d.call(this,this.get_node(b)),this.trigger("create_node",{node:this.get_node(b),parent:a.id,position:c}),b.id},rename_node:function(a,b){var c,d,e;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.rename_node(a[c],b);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(e=a.text,this.check("rename_node",a,this.get_parent(a),b)?(this.set_text(a,b),this.trigger("rename_node",{node:a,text:b,old:e}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.delete_node(a[b]);return!0}if(a=this.get_node(a),!a||a.id===$.jstree.root)return!1;if(d=this.get_node(a.parent),e=$.inArray(a.id,d.children),k=!1,!this.check("delete_node",a,d,e))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==e&&(d.children=$.vakata.array_remove(d.children,e)),f=a.children_d.concat([]),f.push(a.id),i=0,j=f.length;j>i;i++){for(g=0,h=a.parents.length;h>g;g++)e=$.inArray(f[i],this._model.data[a.parents[g]].children_d),-1!==e&&(this._model.data[a.parents[g]].children_d=$.vakata.array_remove(this._model.data[a.parents[g]].children_d,e));this._model.data[f[i]].state.selected&&(k=!0,e=$.inArray(f[i],this._data.core.selected),-1!==e&&(this._data.core.selected=$.vakata.array_remove(this._data.core.selected,e)))}for(this.trigger("delete_node",{node:a,parent:d.id}),k&&this.trigger("changed",{action:"delete_node",node:a,selected:this._data.core.selected,parent:d.id}),i=0,j=f.length;j>i;i++)delete this._model.data[f[i]];return-1!==$.inArray(this._data.core.focused,f)&&(this._data.core.focused=null,l=this.element[0].scrollTop,m=this.element[0].scrollLeft,d.id===$.jstree.root?this.get_node(this._model.data[$.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(d,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=l,this.element[0].scrollLeft=m),this.redraw_node(d,!0),!0},check:function(a,b,c,d,e){b=b&&b.id?b:this.get_node(b),c=c&&c.id?c:this.get_node(c);var f=a.match(/^move_node|copy_node|create_node$/i)?c:b,g=this.settings.core.check_callback;return"move_node"!==a&&"copy_node"!==a||e&&e.is_multi||b.id!==c.id&&$.inArray(b.id,c.children)!==d&&-1===$.inArray(c.id,b.children_d)?(f&&f.data&&(f=f.data),f&&f.functions&&(f.functions[a]===!1||f.functions[a]===!0)?(f.functions[a]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+a,data:JSON.stringify({chk:a,pos:d,obj:b&&b.id?b.id:!1,par:c&&c.id?c.id:!1})}),f.functions[a]):g===!1||$.isFunction(g)&&g.call(this,a,b,c,d,e)===!1||g&&g[a]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+a,data:JSON.stringify({chk:a,pos:d,obj:b&&b.id?b.id:!1,par:c&&c.id?c.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:a,pos:d,obj:b&&b.id?b.id:!1,par:c&&c.id?c.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(b=this.get_node(b),c=void 0===c?0:c,!b)return!1;if(!c.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(b))return this.load_node(b,function(){this.move_node(a,b,c,d,!0,!1,g)});if($.isArray(a)){if(1!==a.length){for(h=0,i=a.length;i>h;h++)(p=this.move_node(a[h],b,c,d,e,!1,g))&&(b=p,c="after");return this.redraw(),!0}a=a[0]}if(a=a&&a.id?a:this.get_node(a),!a||a.id===$.jstree.root)return!1;if(j=(a.parent||$.jstree.root).toString(),l=c.toString().match(/^(before|after)$/)&&b.id!==$.jstree.root?this.get_node(b.parent):b,m=g?g:this._model.data[a.id]?this:$.jstree.reference(a.id),n=!m||!m._id||this._id!==m._id,k=m&&m._id&&j&&m._model.data[j]&&m._model.data[j].children?$.inArray(a.id,m._model.data[j].children):-1,m&&m._id&&(a=m._model.data[a.id]),n)return(p=this.copy_node(a,b,c,d,e,!1,g))?(m&&m.delete_node(a),p):!1;switch(b.id===$.jstree.root&&("before"===c&&(c="first"),"after"===c&&(c="last")),c){case"before":c=$.inArray(b.id,l.children);break;case"after":c=$.inArray(b.id,l.children)+1;break;case"inside":case"first":c=0;break;case"last":c=l.children.length;break;default:c||(c=0)}if(c>l.children.length&&(c=l.children.length),!this.check("move_node",a,l,c,{core:!0,origin:g,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(a.parent===l.id){for(o=l.children.concat(),p=$.inArray(a.id,o),-1!==p&&(o=$.vakata.array_remove(o,p),c>p&&c--),p=[],q=0,r=o.length;r>q;q++)p[q>=c?q+1:q]=o[q];p[c]=a.id,l.children=p,this._node_changed(l.id),this.redraw(l.id===$.jstree.root)}else{for(p=a.children_d.concat(),p.push(a.id),q=0,r=a.parents.length;r>q;q++){for(o=[],u=m._model.data[a.parents[q]].children_d,s=0,t=u.length;t>s;s++)-1===$.inArray(u[s],p)&&o.push(u[s]);m._model.data[a.parents[q]].children_d=o}for(m._model.data[j].children=$.vakata.array_remove_item(m._model.data[j].children,a.id),q=0,r=l.parents.length;r>q;q++)this._model.data[l.parents[q]].children_d=this._model.data[l.parents[q]].children_d.concat(p);for(o=[],q=0,r=l.children.length;r>q;q++)o[q>=c?q+1:q]=l.children[q];for(o[c]=a.id,l.children=o,l.children_d.push(a.id),l.children_d=l.children_d.concat(a.children_d),a.parent=l.id,p=l.parents.concat(),p.unshift(l.id),u=a.parents.length,a.parents=p,p=p.concat(),q=0,r=a.children_d.length;r>q;q++)this._model.data[a.children_d[q]].parents=this._model.data[a.children_d[q]].parents.slice(0,-1*u),Array.prototype.push.apply(this._model.data[a.children_d[q]].parents,p);j!==$.jstree.root&&l.id!==$.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(j),this._node_changed(l.id)),f||this.redraw()}return d&&d.call(this,a,l,c),this.trigger("move_node",{node:a,parent:l.id,position:c,old_parent:j,old_position:k,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id,old_instance:m,new_instance:this}),a.id},copy_node:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r;if(b=this.get_node(b),c=void 0===c?0:c,!b)return!1;if(!c.toString().match(/^(before|after)$/)&&!e&&!this.is_loaded(b))return this.load_node(b,function(){this.copy_node(a,b,c,d,!0,!1,g)});if($.isArray(a)){if(1!==a.length){for(h=0,i=a.length;i>h;h++)(k=this.copy_node(a[h],b,c,d,e,!0,g))&&(b=k,c="after");return this.redraw(),!0}a=a[0]}if(a=a&&a.id?a:this.get_node(a),!a||a.id===$.jstree.root)return!1;switch(o=(a.parent||$.jstree.root).toString(),p=c.toString().match(/^(before|after)$/)&&b.id!==$.jstree.root?this.get_node(b.parent):b,q=g?g:this._model.data[a.id]?this:$.jstree.reference(a.id),r=!q||!q._id||this._id!==q._id,q&&q._id&&(a=q._model.data[a.id]),b.id===$.jstree.root&&("before"===c&&(c="first"),"after"===c&&(c="last")),c){case"before":c=$.inArray(b.id,p.children);break;case"after":c=$.inArray(b.id,p.children)+1;break;case"inside":case"first":c=0;break;case"last":c=p.children.length;break;default:c||(c=0)}if(c>p.children.length&&(c=p.children.length),!this.check("copy_node",a,p,c,{core:!0,origin:g,is_multi:q&&q._id&&q._id!==this._id,is_foreign:!q||!q._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n=q?q.get_json(a,{no_id:!0,no_data:!0,no_state:!0}):a,!n)return!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,p.id,p.parents.concat()),!n)return!1;for(k=this.get_node(n),a&&a.state&&a.state.loaded===!1&&(k.state.loaded=!1),j=[],j.push(n),j=j.concat(k.children_d),this.trigger("model",{nodes:j,parent:p.id}),l=0,m=p.parents.length;m>l;l++)this._model.data[p.parents[l]].children_d=this._model.data[p.parents[l]].children_d.concat(j);for(j=[],l=0,m=p.children.length;m>l;l++)j[l>=c?l+1:l]=p.children[l];return j[c]=k.id,p.children=j,p.children_d.push(k.id),p.children_d=p.children_d.concat(k.children_d),p.id===$.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(p.id),f||this.redraw(p.id===$.jstree.root),d&&d.call(this,k,p,c),this.trigger("copy_node",{node:k,original:a,parent:p.id,position:c,old_parent:o,old_position:q&&q._id&&o&&q._model.data[o]&&q._model.data[o].children?$.inArray(a.id,q._model.data[o].children):-1,is_multi:q&&q._id&&q._id!==this._id,is_foreign:!q||!q._id,old_instance:q,new_instance:this}),k.id},cut:function(a){if(a||(a=this._data.core.selected.concat()),$.isArray(a)||(a=[a]),!a.length)return!1;var b,c,d,e=[];for(c=0,d=a.length;d>c;c++)b=this.get_node(a[c]),b&&b.id&&b.id!==$.jstree.root&&e.push(b);return e.length?(h=e,j=this,i="move_node",void this.trigger("cut",{node:a})):!1},copy:function(a){if(a||(a=this._data.core.selected.concat()),$.isArray(a)||(a=[a]),!a.length)return!1;var b,c,d,e=[];for(c=0,d=a.length;d>c;c++)b=this.get_node(a[c]),b&&b.id&&b.id!==$.jstree.root&&e.push(b);return e.length?(h=e,j=this,i="copy_node",void this.trigger("copy",{node:a})):!1},get_buffer:function(){return{mode:i,node:h,inst:j}},can_paste:function(){return i!==!1&&h!==!1},paste:function(a,b){return a=this.get_node(a),a&&i&&i.match(/^(copy_node|move_node)$/)&&h?(this[i](h,a,b,!1,!1,!1,j)&&this.trigger("paste",{parent:a.id,node:h,mode:i}),h=!1,i=!1,void(j=!1)):!1},clear_buffer:function(){h=!1,i=!1,j=!1,this.trigger("clear_buffer")},edit:function(a,b,c){var d,e,f,g,h,i,j,k,l,m=!1;return(a=this.get_node(a))?this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(l=a,b="string"==typeof b?b:a.text,this.set_text(a,""),a=this._open_to(a),l.text=b,d=this._data.core.rtl,e=this.element.width(),this._data.core.focused=l.id,f=a.children(".jstree-anchor").focus(),g=$("<span>"),h=b,i=$("<div />",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),j=$("<input />",{value:h,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:$.proxy(function(b){b.stopImmediatePropagation(),b.preventDefault();var d,e=g.children(".jstree-rename-input"),j=e.val(),k=this.settings.core.force_text;""===j&&(j=h),i.remove(),g.replaceWith(f),g.remove(),h=k?h:$("<div></div>").append($.parseHTML(h)).html(),this.set_text(a,h),d=!!this.rename_node(a,k?$("<div></div>").text(j).text():$("<div></div>").append($.parseHTML(j)).html()),d||this.set_text(a,h),this._data.core.focused=l.id,setTimeout($.proxy(function(){var a=this.get_node(l.id,!0);a.length&&(this._data.core.focused=l.id,a.children(".jstree-anchor").focus())},this),0),c&&c.call(this,l,d,m)},this),keydown:function(a){var b=a.which;27===b&&(m=!0,this.value=h),27!==b&&13!==b&&37!==b&&38!==b&&39!==b&&40!==b&&32!==b||a.stopImmediatePropagation(),27!==b&&13!==b||(a.preventDefault(),this.blur())},click:function(a){a.stopImmediatePropagation()},mousedown:function(a){a.stopImmediatePropagation()},keyup:function(a){j.width(Math.min(i.text("pW"+this.value).width(),e))},keypress:function(a){return 13===a.which?!1:void 0}}),k={fontFamily:f.css("fontFamily")||"",fontSize:f.css("fontSize")||"",fontWeight:f.css("fontWeight")||"",fontStyle:f.css("fontStyle")||"",fontStretch:f.css("fontStretch")||"",fontVariant:f.css("fontVariant")||"",letterSpacing:f.css("letterSpacing")||"",wordSpacing:f.css("wordSpacing")||""},g.attr("class",f.attr("class")).append(f.contents().clone()).append(j),f.replaceWith(g),i.css(k),void j.css(k).width(Math.min(i.text("pW"+j[0].value).width(),e))[0].select()):!1},set_theme:function(a,b){if(!a)return!1;if(b===!0){var c=this.settings.core.themes.dir;c||(c=$.jstree.path+"/themes"),b=c+"/"+a+"/style.css"}b&&-1===$.inArray(b,k)&&($("head").append('<link rel="stylesheet" href="'+b+'" type="text/css" />'),k.push(b)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),
this._data.core.themes.name=a,this.element.addClass("jstree-"+a),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+a+"-responsive"),this.trigger("set_theme",{theme:a})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(a){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=a,a&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(a,b){var c,d,e,f;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.set_icon(a[c],b);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(f=a.icon,a.icon=b===!0||null===b||void 0===b||""===b?!0:b,e=this.get_node(a,!0).children(".jstree-anchor").children(".jstree-themeicon"),b===!1?this.hide_icon(a):b===!0||null===b||void 0===b||""===b?(e.removeClass("jstree-themeicon-custom "+f).css("background","").removeAttr("rel"),f===!1&&this.show_icon(a)):-1===b.indexOf("/")&&-1===b.indexOf(".")?(e.removeClass(f).css("background",""),e.addClass(b+" jstree-themeicon-custom").attr("rel",b),f===!1&&this.show_icon(a)):(e.removeClass(f).css("background",""),e.addClass("jstree-themeicon-custom").css("background","url('"+b+"') center center no-repeat").attr("rel",b),f===!1&&this.show_icon(a)),!0):!1},get_icon:function(a){return a=this.get_node(a),a&&a.id!==$.jstree.root?a.icon:!1},hide_icon:function(a){var b,c;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.hide_icon(a[b]);return!0}return a=this.get_node(a),a&&a!==$.jstree.root?(a.icon=!1,this.get_node(a,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(a){var b,c,d;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.show_icon(a[b]);return!0}return a=this.get_node(a),a&&a!==$.jstree.root?(d=this.get_node(a,!0),a.icon=d.length?d.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,a.icon||(a.icon=!0),d.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},$.vakata={},$.vakata.attributes=function(a,b){a=$(a)[0];var c=b?{}:[];return a&&a.attributes&&$.each(a.attributes,function(a,d){-1===$.inArray(d.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==d.value&&""!==$.trim(d.value)&&(b?c[d.name]=d.value:c.push(d.name))}),c},$.vakata.array_unique=function(a){var b,c,d=[],e={};for(b=0,c=a.length;c>b;b++)void 0===e[a[b]]&&(d.push(a[b]),e[a[b]]=!0);return d},$.vakata.array_remove=function(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d),a},$.vakata.array_remove_item=function(a,b){var c=$.inArray(b,a);return-1!==c?$.vakata.array_remove(a,c):a},$.jstree.plugins.changed=function(a,b){var c=[];this.trigger=function(a,d){var e,f;if(d||(d={}),"changed"===a.replace(".jstree","")){d.changed={selected:[],deselected:[]};var g={};for(e=0,f=c.length;f>e;e++)g[c[e]]=1;for(e=0,f=d.selected.length;f>e;e++)g[d.selected[e]]?g[d.selected[e]]=2:d.changed.selected.push(d.selected[e]);for(e=0,f=c.length;f>e;e++)1===g[c[e]]&&d.changed.deselected.push(c[e]);c=d.selected.slice()}b.trigger.call(this,a,d)},this.refresh=function(a,d){return c=[],b.refresh.apply(this,arguments)}};var o=m.createElement("I");o.className="jstree-icon jstree-checkbox",o.setAttribute("role","presentation"),$.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},$.jstree.plugins.checkbox=function(a,b){this.bind=function(){b.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",$.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",$.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",$.proxy(function(a,b){var c,d,e=this._model.data,f=(e[b.parent],b.nodes);for(c=0,d=f.length;d>c;c++)e[f[c]].state.checked=e[f[c]].state.checked||e[f[c]].original&&e[f[c]].original.state&&e[f[c]].original.state.checked,e[f[c]].state.checked&&this._data.checkbox.selected.push(f[c])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",$.proxy(function(a,b){var c,d,e,f,g,h,i=this._model.data,j=i[b.parent],k=b.nodes,l=[],m=this.settings.checkbox.cascade,n=this.settings.checkbox.tie_selection;if(-1!==m.indexOf("down"))if(j.state[n?"selected":"checked"]){for(d=0,e=k.length;e>d;d++)i[k[d]].state[n?"selected":"checked"]=!0;this._data[n?"core":"checkbox"].selected=this._data[n?"core":"checkbox"].selected.concat(k)}else for(d=0,e=k.length;e>d;d++)if(i[k[d]].state[n?"selected":"checked"]){for(f=0,g=i[k[d]].children_d.length;g>f;f++)i[i[k[d]].children_d[f]].state[n?"selected":"checked"]=!0;this._data[n?"core":"checkbox"].selected=this._data[n?"core":"checkbox"].selected.concat(i[k[d]].children_d)}if(-1!==m.indexOf("up")){for(d=0,e=j.children_d.length;e>d;d++)i[j.children_d[d]].children.length||l.push(i[j.children_d[d]].parent);for(l=$.vakata.array_unique(l),f=0,g=l.length;g>f;f++)for(j=i[l[f]];j&&j.id!==$.jstree.root;){for(c=0,d=0,e=j.children.length;e>d;d++)c+=i[j.children[d]].state[n?"selected":"checked"];if(c!==e)break;j.state[n?"selected":"checked"]=!0,this._data[n?"core":"checkbox"].selected.push(j.id),h=this.get_node(j,!0),h&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked"),j=this.get_node(j.parent)}}this._data[n?"core":"checkbox"].selected=$.vakata.array_unique(this._data[n?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",$.proxy(function(a,b){var c,d,e,f,g=b.node,h=this._model.data,i=this.get_node(g.parent),j=this.get_node(g,!0),k=this.settings.checkbox.cascade,l=this.settings.checkbox.tie_selection;if(-1!==k.indexOf("down"))for(this._data[l?"core":"checkbox"].selected=$.vakata.array_unique(this._data[l?"core":"checkbox"].selected.concat(g.children_d)),c=0,d=g.children_d.length;d>c;c++)f=h[g.children_d[c]],f.state[l?"selected":"checked"]=!0,f&&f.original&&f.original.state&&f.original.state.undetermined&&(f.original.state.undetermined=!1);if(-1!==k.indexOf("up"))for(;i&&i.id!==$.jstree.root;){for(e=0,c=0,d=i.children.length;d>c;c++)e+=h[i.children[c]].state[l?"selected":"checked"];if(e!==d)break;i.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(i.id),f=this.get_node(i,!0),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}-1!==k.indexOf("down")&&j.length&&j.find(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",$.proxy(function(a,b){var c,d,e,f=this.get_node($.jstree.root),g=this._model.data;for(c=0,d=f.children_d.length;d>c;c++)e=g[f.children_d[c]],e&&e.original&&e.original.state&&e.original.state.undetermined&&(e.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",$.proxy(function(a,b){var c,d,e,f=b.node,g=this.get_node(f,!0),h=this.settings.checkbox.cascade,i=this.settings.checkbox.tie_selection;if(f&&f.original&&f.original.state&&f.original.state.undetermined&&(f.original.state.undetermined=!1),-1!==h.indexOf("down"))for(c=0,d=f.children_d.length;d>c;c++)e=this._model.data[f.children_d[c]],e.state[i?"selected":"checked"]=!1,e&&e.original&&e.original.state&&e.original.state.undetermined&&(e.original.state.undetermined=!1);if(-1!==h.indexOf("up"))for(c=0,d=f.parents.length;d>c;c++)e=this._model.data[f.parents[c]],e.state[i?"selected":"checked"]=!1,e&&e.original&&e.original.state&&e.original.state.undetermined&&(e.original.state.undetermined=!1),e=this.get_node(f.parents[c],!0),e&&e.length&&e.attr("aria-selected",!1).children(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked");for(e=[],c=0,d=this._data[i?"core":"checkbox"].selected.length;d>c;c++)-1!==h.indexOf("down")&&-1!==$.inArray(this._data[i?"core":"checkbox"].selected[c],f.children_d)||-1!==h.indexOf("up")&&-1!==$.inArray(this._data[i?"core":"checkbox"].selected[c],f.parents)||e.push(this._data[i?"core":"checkbox"].selected[c]);this._data[i?"core":"checkbox"].selected=$.vakata.array_unique(e),-1!==h.indexOf("down")&&g.length&&g.find(".jstree-anchor").removeClass(i?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",$.proxy(function(a,b){for(var c,d,e,f,g=this.get_node(b.parent),h=this._model.data,i=this.settings.checkbox.tie_selection;g&&g.id!==$.jstree.root&&!g.state[i?"selected":"checked"];){for(e=0,c=0,d=g.children.length;d>c;c++)e+=h[g.children[c]].state[i?"selected":"checked"];if(!(d>0&&e===d))break;g.state[i?"selected":"checked"]=!0,this._data[i?"core":"checkbox"].selected.push(g.id),f=this.get_node(g,!0),f&&f.length&&f.attr("aria-selected",!0).children(".jstree-anchor").addClass(i?"jstree-clicked":"jstree-checked"),g=this.get_node(g.parent)}},this)).on("move_node.jstree",$.proxy(function(a,b){var c,d,e,f,g,h=b.is_multi,i=b.old_parent,j=this.get_node(b.parent),k=this._model.data,l=this.settings.checkbox.tie_selection;if(!h)for(c=this.get_node(i);c&&c.id!==$.jstree.root&&!c.state[l?"selected":"checked"];){for(d=0,e=0,f=c.children.length;f>e;e++)d+=k[c.children[e]].state[l?"selected":"checked"];if(!(f>0&&d===f))break;c.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(c.id),g=this.get_node(c,!0),g&&g.length&&g.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}for(c=j;c&&c.id!==$.jstree.root;){for(d=0,e=0,f=c.children.length;f>e;e++)d+=k[c.children[e]].state[l?"selected":"checked"];if(d===f)c.state[l?"selected":"checked"]||(c.state[l?"selected":"checked"]=!0,this._data[l?"core":"checkbox"].selected.push(c.id),g=this.get_node(c,!0),g&&g.length&&g.attr("aria-selected",!0).children(".jstree-anchor").addClass(l?"jstree-clicked":"jstree-checked"));else{if(!c.state[l?"selected":"checked"])break;c.state[l?"selected":"checked"]=!1,this._data[l?"core":"checkbox"].selected=$.vakata.array_remove_item(this._data[l?"core":"checkbox"].selected,c.id),g=this.get_node(c,!0),g&&g.length&&g.attr("aria-selected",!1).children(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked")}c=this.get_node(c.parent)}},this))},this._undetermined=function(){if(null!==this.element){var a,b,c,d,e={},f=this._model.data,g=this.settings.checkbox.tie_selection,h=this._data[g?"core":"checkbox"].selected,i=[],j=this;for(a=0,b=h.length;b>a;a++)if(f[h[a]]&&f[h[a]].parents)for(c=0,d=f[h[a]].parents.length;d>c;c++)void 0===e[f[h[a]].parents[c]]&&f[h[a]].parents[c]!==$.jstree.root&&(e[f[h[a]].parents[c]]=!0,i.push(f[h[a]].parents[c]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var g,h=j.get_node(this);if(h.state.loaded){for(a=0,b=h.children_d.length;b>a;a++)if(g=f[h.children_d[a]],!g.state.loaded&&g.original&&g.original.state&&g.original.state.undetermined&&g.original.state.undetermined===!0)for(void 0===e[g.id]&&g.id!==$.jstree.root&&(e[g.id]=!0,i.push(g.id)),c=0,d=g.parents.length;d>c;c++)void 0===e[g.parents[c]]&&g.parents[c]!==$.jstree.root&&(e[g.parents[c]]=!0,i.push(g.parents[c]))}else if(h.original&&h.original.state&&h.original.state.undetermined&&h.original.state.undetermined===!0)for(void 0===e[h.id]&&h.id!==$.jstree.root&&(e[h.id]=!0,i.push(h.id)),c=0,d=h.parents.length;d>c;c++)void 0===e[h.parents[c]]&&h.parents[c]!==$.jstree.root&&(e[h.parents[c]]=!0,i.push(h.parents[c]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),a=0,b=i.length;b>a;a++)f[i[a]].state[g?"selected":"checked"]||(h=this.get_node(i[a],!0),h&&h.length&&h.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(a,c,d,e){if(a=b.redraw_node.apply(this,arguments)){var f,g,h=null,i=null;for(f=0,g=a.childNodes.length;g>f;f++)if(a.childNodes[f]&&a.childNodes[f].className&&-1!==a.childNodes[f].className.indexOf("jstree-anchor")){h=a.childNodes[f];break}h&&(!this.settings.checkbox.tie_selection&&this._model.data[a.id].state.checked&&(h.className+=" jstree-checked"),i=o.cloneNode(!1),this._model.data[a.id].state.checkbox_disabled&&(i.className+=" jstree-checkbox-disabled"),h.insertBefore(i,h.childNodes[0]))}return d||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)),a},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(a){a=this.get_node(a);var b,c,d=this.settings.checkbox.cascade,e=this.settings.checkbox.tie_selection,f=this._data[e?"core":"checkbox"].selected,g=this._model.data;if(!a||a.state[e?"selected":"checked"]===!0||-1===d.indexOf("undetermined")||-1===d.indexOf("down")&&-1===d.indexOf("up"))return!1;if(!a.state.loaded&&a.original.state.undetermined===!0)return!0;for(b=0,c=a.children_d.length;c>b;b++)if(-1!==$.inArray(a.children_d[b],f)||!g[a.children_d[b]].state.loaded&&g[a.children_d[b]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(a){var b,c,d;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.disable_checkbox(a[b]);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(d=this.get_node(a,!0),void(a.state.checkbox_disabled||(a.state.checkbox_disabled=!0,d&&d.length&&d.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:a})))):!1},this.enable_checkbox=function(a){var b,c,d;if($.isArray(a)){for(a=a.slice(),b=0,c=a.length;c>b;b++)this.enable_checkbox(a[b]);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(d=this.get_node(a,!0),void(a.state.checkbox_disabled&&(a.state.checkbox_disabled=!1,d&&d.length&&d.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:a})))):!1},this.activate_node=function(a,c){return $(c.target).hasClass("jstree-checkbox-disabled")?!1:(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||$(c.target).hasClass("jstree-checkbox"))&&(c.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!$(c.target).hasClass("jstree-checkbox")?b.activate_node.call(this,a,c):this.is_disabled(a)?!1:(this.is_checked(a)?this.uncheck_node(a,c):this.check_node(a,c),void this.trigger("activate_node",{node:this.get_node(a)})))},this.check_node=function(a,b){if(this.settings.checkbox.tie_selection)return this.select_node(a,!1,!0,b);var c,d,e;if($.isArray(a)){for(a=a.slice(),d=0,e=a.length;e>d;d++)this.check_node(a[d],b);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(c=this.get_node(a,!0),void(a.state.checked||(a.state.checked=!0,this._data.checkbox.selected.push(a.id),c&&c.length&&c.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:a,selected:this._data.checkbox.selected,event:b})))):!1},this.uncheck_node=function(a,b){if(this.settings.checkbox.tie_selection)return this.deselect_node(a,!1,b);var c,d,e;if($.isArray(a)){for(a=a.slice(),c=0,d=a.length;d>c;c++)this.uncheck_node(a[c],b);return!0}return a=this.get_node(a),a&&a.id!==$.jstree.root?(e=this.get_node(a,!0),void(a.state.checked&&(a.state.checked=!1,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,a.id),e.length&&e.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:a,selected:this._data.checkbox.selected,event:b})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var a,b;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[$.jstree.root].children_d.concat(),a=0,b=this._data.checkbox.selected.length;b>a;a++)this._model.data[this._data.checkbox.selected[a]]&&(this._model.data[this._data.checkbox.selected[a]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var a,b,c=this._data.checkbox.selected.concat([]);for(a=0,b=this._data.checkbox.selected.length;b>a;a++)this._model.data[this._data.checkbox.selected[a]]&&(this._model.data[this._data.checkbox.selected[a]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:c})},this.is_checked=function(a){return this.settings.checkbox.tie_selection?this.is_selected(a):(a=this.get_node(a),a&&a.id!==$.jstree.root?a.state.checked:!1)},this.get_checked=function(a){return this.settings.checkbox.tie_selection?this.get_selected(a):a?$.map(this._data.checkbox.selected,$.proxy(function(a){return this.get_node(a)},this)):this._data.checkbox.selected},this.get_top_checked=function(a){if(this.settings.checkbox.tie_selection)return this.get_top_selected(a);var b,c,d,e,f=this.get_checked(!0),g={};for(b=0,c=f.length;c>b;b++)g[f[b].id]=f[b];for(b=0,c=f.length;c>b;b++)for(d=0,e=f[b].children_d.length;e>d;d++)g[f[b].children_d[d]]&&delete g[f[b].children_d[d]];f=[];for(b in g)g.hasOwnProperty(b)&&f.push(b);return a?$.map(f,$.proxy(function(a){return this.get_node(a)},this)):f},this.get_bottom_checked=function(a){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(a);var b,c,d=this.get_checked(!0),e=[];for(b=0,c=d.length;c>b;b++)d[b].children.length||e.push(d[b].id);return a?$.map(e,$.proxy(function(a){return this.get_node(a)},this)):e},this.load_node=function(a,c){var d,e,f,g;if(!$.isArray(a)&&!this.settings.checkbox.tie_selection&&(g=this.get_node(a),g&&g.state.loaded))for(d=0,e=g.children_d.length;e>d;d++)this._model.data[g.children_d[d]].state.checked&&(f=!0,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,g.children_d[d]));return b.load_node.apply(this,arguments)},this.get_state=function(){var a=b.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?a:(a.checkbox=this._data.checkbox.selected.slice(),a)},this.set_state=function(a,c){var d=b.set_state.apply(this,arguments);if(d&&a.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var e=this;$.each(a.checkbox,function(a,b){e.check_node(b)})}return delete a.checkbox,this.set_state(a,c),!1}return d},this.refresh=function(a,c){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),b.refresh.apply(this,arguments)}},$.jstree.defaults.conditionalselect=function(){return!0},$.jstree.plugins.conditionalselect=function(a,b){this.activate_node=function(a,c){this.settings.conditionalselect.call(this,this.get_node(a),c)&&b.activate_node.call(this,a,c)}},$.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(a,b){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(a){var b=$.jstree.reference(a.reference),c=b.get_node(a.reference);b.create_node(c,{},"last",function(a){setTimeout(function(){b.edit(a)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(a){var b=$.jstree.reference(a.reference),c=b.get_node(a.reference);b.edit(c)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(a){var b=$.jstree.reference(a.reference),c=b.get_node(a.reference);b.is_selected(c)?b.delete_node(b.get_selected()):b.delete_node(c)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(a){var b=$.jstree.reference(a.reference),c=b.get_node(a.reference);b.is_selected(c)?b.cut(b.get_top_selected()):b.cut(c)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){var b=$.jstree.reference(a.reference),c=b.get_node(a.reference);b.is_selected(c)?b.copy(b.get_top_selected()):b.copy(c)}},paste:{separator_before:!1,icon:!1,_disabled:function(a){return!$.jstree.reference(a.reference).can_paste()},separator_after:!1,label:"Paste",action:function(a){var b=$.jstree.reference(a.reference),c=b.get_node(a.reference);b.paste(c)}}}}}}},$.jstree.plugins.contextmenu=function(a,b){this.bind=function(){b.bind.call(this);var a,c,d=0,e=null;this.element.on("contextmenu.jstree",".jstree-anchor",$.proxy(function(a,b){a.preventDefault(),d=a.ctrlKey?+new Date:0,(b||e)&&(d=+new Date+1e4),e&&clearTimeout(e),this.is_loading(a.currentTarget)||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY,a)},this)).on("click.jstree",".jstree-anchor",$.proxy(function(a){this._data.contextmenu.visible&&(!d||+new Date-d>250)&&$.vakata.context.hide(),d=0},this)).on("touchstart.jstree",".jstree-anchor",function(b){b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(a=b.pageX,c=b.pageY,e=setTimeout(function(){$(b.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(b){e&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(Math.abs(a-b.pageX)>50||Math.abs(c-b.pageY)>50)&&clearTimeout(e)}).on("touchend.vakata.jstree",function(a){e&&clearTimeout(e)}),$(m).on("context_hide.vakata.jstree",$.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&&$.vakata.context.hide(),b.teardown.call(this)},this.show_contextmenu=function(a,b,c,d){if(a=this.get_node(a),!a||a.id===$.jstree.root)return!1;var e=this.settings.contextmenu,f=this.get_node(a,!0),g=f.children(".jstree-anchor"),h=!1,i=!1;(e.show_at_node||void 0===b||void 0===c)&&(h=g.offset(),b=h.left,c=h.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(a)&&this.activate_node(a,d),i=e.items,$.isFunction(i)&&(i=i.call(this,a,$.proxy(function(d){this._show_contextmenu(a,b,c,d)},this))),$.isPlainObject(i)&&this._show_contextmenu(a,b,c,i)},this._show_contextmenu=function(a,b,c,d){var e=this.get_node(a,!0),f=e.children(".jstree-anchor");$(m).one("context_show.vakata.jstree",$.proxy(function(a,b){var c="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";$(b.element).addClass(c)},this)),this._data.contextmenu.visible=!0,$.vakata.context.show(f,{x:b,y:c},d),this.trigger("show_contextmenu",{node:a,x:b,y:c})}},function(a){var b=!1,c={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};a.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(b){a(m).triggerHandler("context_"+b+".vakata",{reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}})},_execute:function(b){return b=c.items[b],b&&(!b._disabled||a.isFunction(b._disabled)&&!b._disabled({item:b,reference:c.reference,element:c.element}))&&b.action?b.action.call(null,{item:b,reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}}):!1},_parse:function(b,d){if(!b)return!1;d||(c.html="",c.items=[]);var e,f="",g=!1;return d&&(f+="<ul>"),a.each(b,function(b,d){return d?(c.items.push(d),!g&&d.separator_before&&(f+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),g=!1,f+="<li class='"+(d._class||"")+(d._disabled===!0||a.isFunction(d._disabled)&&d._disabled({item:d,reference:c.reference,element:c.element})?" vakata-contextmenu-disabled ":"")+"' "+(d.shortcut?" data-shortcut='"+d.shortcut+"' ":"")+">",f+="<a href='#' rel='"+(c.items.length-1)+"'>",a.vakata.context.settings.icons&&(f+="<i ",d.icon&&(f+=-1!==d.icon.indexOf("/")||-1!==d.icon.indexOf(".")?" style='background:url(\""+d.icon+"\") center center no-repeat' ":" class='"+d.icon+"' "),f+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),f+=(a.isFunction(d.label)?d.label({item:b,reference:c.reference,element:c.element}):d.label)+(d.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+d.shortcut+'">'+(d.shortcut_label||"")+"</span>":"")+"</a>",d.submenu&&(e=a.vakata.context._parse(d.submenu,!0),e&&(f+=e)),f+="</li>",void(d.separator_after&&(f+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",g=!0))):!0}),f=f.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),d&&(f+="</ul>"),d||(c.html=f,a.vakata.context._trigger("parse")),f.length>10?f:!1},_show_submenu:function(c){if(c=a(c),c.length&&c.children("ul").length){var d=c.children("ul"),e=c.offset().left+c.outerWidth(),f=c.offset().top,g=d.width(),h=d.height(),i=a(window).width()+a(window).scrollLeft(),j=a(window).height()+a(window).scrollTop();b?c[e-(g+10+c.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):c[e+g+10>i?"addClass":"removeClass"]("vakata-context-right"),f+h+10>j&&d.css("bottom","-1px"),d.show()}},show:function(d,e,f){var g,h,i,j,k,l,m,n,o=!0;switch(c.element&&c.element.length&&c.element.width(""),o){case!e&&!d:return!1;case!!e&&!!d:c.reference=d,c.position_x=e.x,c.position_y=e.y;break;case!e&&!!d:c.reference=d,g=d.offset(),c.position_x=g.left+d.outerHeight(),c.position_y=g.top;break;case!!e&&!d:c.position_x=e.x,c.position_y=e.y}d&&!f&&a(d).data("vakata_contextmenu")&&(f=a(d).data("vakata_contextmenu")),a.vakata.context._parse(f)&&c.element.html(c.html),c.items.length&&(c.element.appendTo("body"),h=c.element,i=c.position_x,j=c.position_y,k=h.width(),l=h.height(),m=a(window).width()+a(window).scrollLeft(),n=a(window).height()+a(window).scrollTop(),b&&(i-=h.outerWidth()-a(d).outerWidth(),i<a(window).scrollLeft()+20&&(i=a(window).scrollLeft()+20)),i+k+20>m&&(i=m-(k+20)),j+l+20>n&&(j=n-(l+20)),c.element.css({left:i,top:j}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),c.is_visible=!0,a.vakata.context._trigger("show"))},hide:function(){c.is_visible&&(c.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),c.is_visible=!1,a.vakata.context._trigger("hide"))}},a(function(){b="rtl"===a("body").css("direction");var d=!1;c.element=a("<ul class='vakata-context'></ul>"),c.element.on("mouseenter","li",function(b){b.stopImmediatePropagation(),a.contains(this,b.relatedTarget)||(d&&clearTimeout(d),c.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),a(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),a.vakata.context._show_submenu(this))}).on("mouseleave","li",function(b){a.contains(this,b.relatedTarget)||a(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(b){a(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),a.vakata.context.settings.hide_onmouseleave&&(d=setTimeout(function(b){return function(){a.vakata.context.hide()}}(this),a.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(b){b.preventDefault(),a(this).blur().parent().hasClass("vakata-context-disabled")||a.vakata.context._execute(a(this).attr("rel"))===!1||a.vakata.context.hide()}).on("keydown","a",function(b){var d=null;switch(b.which){case 13:case 32:b.type="mouseup",b.preventDefault(),a(b.currentTarget).trigger(b);break;case 37:c.is_visible&&(c.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 38:c.is_visible&&(d=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),d.length||(d=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),d.addClass("vakata-context-hover").children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 39:c.is_visible&&(c.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 40:c.is_visible&&(d=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),d.length||(d=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),d.addClass("vakata-context-hover").children("a").focus(),b.stopImmediatePropagation(),b.preventDefault());break;case 27:a.vakata.context.hide(),b.preventDefault()}}).on("keydown",function(a){a.preventDefault();var b=c.element.find(".vakata-contextmenu-shortcut-"+a.which).parent();b.parent().not(".vakata-context-disabled")&&b.click()}),a(m).on("mousedown.vakata.jstree",function(b){c.is_visible&&!a.contains(c.element[0],b.target)&&a.vakata.context.hide()}).on("context_show.vakata.jstree",function(a,d){c.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),b&&c.element.addClass("vakata-context-rtl").css("direction","rtl"),c.element.find("ul").hide().end()})})}($),$.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1},$.jstree.plugins.dnd=function(a,b){this.bind=function(){b.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",$.proxy(function(a){
if(this.settings.dnd.large_drag_target&&$(a.target).closest(".jstree-node")[0]!==a.currentTarget)return!0;if("touchstart"===a.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!$(a.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var b=this.get_node(a.target),c=this.is_selected(b)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,d=c>1?c+" "+this.get_string("nodes"):this.get_text(a.currentTarget);return this.settings.core.force_text&&(d=$.vakata.html.escape(d)),b&&b.id&&b.id!==$.jstree.root&&(1===a.which||"touchstart"===a.type)&&(this.settings.dnd.is_draggable===!0||$.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,c>1?this.get_top_selected(!0):[b],a))?(this.element.trigger("mousedown.jstree"),$.vakata.dnd.start(a,{jstree:!0,origin:this,obj:this.get_node(b,!0),nodes:c>1?this.get_top_selected():[b.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+d+'<ins class="jstree-copy" style="display:none;">+</ins></div>')):void 0},this))}},$(function(){var a=!1,b=!1,c=!1,d=!1,e=$('<div id="jstree-marker">&#160;</div>').hide();$(m).on("dnd_start.vakata.jstree",function(b,d){a=!1,c=!1,d&&d.data&&d.data.jstree&&e.appendTo("body")}).on("dnd_move.vakata.jstree",function(f,g){if(d&&clearTimeout(d),g&&g.data&&g.data.jstree&&(!g.event.target.id||"jstree-marker"!==g.event.target.id)){c=g.event;var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=$.jstree.reference(g.event.target),w=!1,x=!1,y=!1;if(v&&v._data&&v._data.dnd)if(e.attr("class","jstree-"+v.get_theme()+(v.settings.core.themes.responsive?" jstree-dnd-responsive":"")),g.helper.children().attr("class","jstree-"+v.get_theme()+" jstree-"+v.get_theme()+"-"+v.get_theme_variant()+" "+(v.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(g.event.metaKey||g.event.ctrlKey))?"show":"hide"](),g.event.target!==v.element[0]&&g.event.target!==v.get_container_ul()[0]||0!==v.get_container_ul().children().length){if(w=v.settings.dnd.large_drop_target?$(g.event.target).closest(".jstree-node").children(".jstree-anchor"):$(g.event.target).closest(".jstree-anchor"),w&&w.length&&w.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(x=w.offset(),y=g.event.pageY-x.top,j=w.outerHeight(),m=j/3>y?["b","i","a"]:y>j-j/3?["a","i","b"]:y>j/2?["i","a","b"]:["i","b","a"],$.each(m,function(c,f){switch(f){case"b":h=x.left-6,i=x.top,k=v.get_parent(w),l=w.parent().index();break;case"i":t=v.settings.dnd.inside_pos,u=v.get_node(w.parent()),h=x.left-2,i=x.top+j/2+1,k=u.id,l="first"===t?0:"last"===t?u.children.length:Math.min(t,u.children.length);break;case"a":h=x.left-6,i=x.top+j,k=v.get_parent(w),l=w.parent().index()+1}for(n=!0,o=0,p=g.data.nodes.length;p>o;o++)if(q=g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(g.event.metaKey||g.event.ctrlKey))?"copy_node":"move_node",r=l,"move_node"===q&&"a"===f&&g.data.origin&&g.data.origin===v&&k===v.get_parent(g.data.nodes[o])&&(s=v.get_node(k),r>$.inArray(g.data.nodes[o],s.children)&&(r-=1)),n=n&&(v&&v.settings&&v.settings.dnd&&v.settings.dnd.check_while_dragging===!1||v.check(q,g.data.origin&&g.data.origin!==v?g.data.origin.get_node(g.data.nodes[o]):g.data.nodes[o],k,r,{dnd:!0,ref:v.get_node(w.parent()),pos:f,origin:g.data.origin,is_multi:g.data.origin&&g.data.origin!==v,is_foreign:!g.data.origin})),!n){v&&v.last_error&&(b=v.last_error());break}return"i"===f&&w.parent().is(".jstree-closed")&&v.settings.dnd.open_timeout&&(d=setTimeout(function(a,b){return function(){a.open_node(b)}}(v,w),v.settings.dnd.open_timeout)),n?(a={ins:v,par:k,pos:"i"!==f||"last"!==t||0!==l||v.is_loaded(u)?l:"last"},e.css({left:h+"px",top:i+"px"}).show(),g.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),b={},m=!0,!1):void 0}),m===!0))return}else{for(n=!0,o=0,p=g.data.nodes.length;p>o&&(n=n&&v.check(g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(g.event.metaKey||g.event.ctrlKey))?"copy_node":"move_node",g.data.origin&&g.data.origin!==v?g.data.origin.get_node(g.data.nodes[o]):g.data.nodes[o],$.jstree.root,"last",{dnd:!0,ref:v.get_node($.jstree.root),pos:"i",origin:g.data.origin,is_multi:g.data.origin&&g.data.origin!==v,is_foreign:!g.data.origin}),n);o++);if(n)return a={ins:v,par:$.jstree.root,pos:"last"},e.hide(),void g.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok")}a=!1,g.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),e.hide()}}).on("dnd_scroll.vakata.jstree",function(b,d){d&&d.data&&d.data.jstree&&(e.hide(),a=!1,c=!1,d.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(f,g){if(d&&clearTimeout(d),g&&g.data&&g.data.jstree){e.hide().detach();var h,i,j=[];if(a){for(h=0,i=g.data.nodes.length;i>h;h++)j[h]=g.data.origin?g.data.origin.get_node(g.data.nodes[h]):g.data.nodes[h];a.ins[g.data.origin&&(g.data.origin.settings.dnd.always_copy||g.data.origin.settings.dnd.copy&&(g.event.metaKey||g.event.ctrlKey))?"copy_node":"move_node"](j,a.par,a.pos,!1,!1,!1,g.data.origin)}else h=$(g.event.target).closest(".jstree"),h.length&&b&&b.error&&"check"===b.error&&(h=h.jstree(!0),h&&h.settings.core.error.call(this,b));c=!1,a=!1}}).on("keyup.jstree keydown.jstree",function(a,b){b=$.vakata.dnd._get(),b&&b.data&&b.data.jstree&&(b.helper.find(".jstree-copy").first()[b.data.origin&&(b.data.origin.settings.dnd.always_copy||b.data.origin.settings.dnd.copy&&(a.metaKey||a.ctrlKey))?"show":"hide"](),c&&(c.metaKey=a.metaKey,c.ctrlKey=a.ctrlKey,$.vakata.dnd._trigger("move",c)))})}),function(a){a.vakata.html={div:a("<div />"),escape:function(b){return a.vakata.html.div.text(b).html()},strip:function(b){return a.vakata.html.div.empty().append(a.parseHTML(b)).text()}};var b={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};a.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(b,c){var d=a.vakata.dnd._get();d.event=c,a(m).triggerHandler("dnd_"+b+".vakata",d)},_get:function(){return{data:b.data,element:b.element,helper:b.helper}},_clean:function(){b.helper&&b.helper.remove(),b.scroll_i&&(clearInterval(b.scroll_i),b.scroll_i=!1),b={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},a(m).off("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag),a(m).off("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop)},_scroll:function(c){if(!b.scroll_e||!b.scroll_l&&!b.scroll_t)return b.scroll_i&&(clearInterval(b.scroll_i),b.scroll_i=!1),!1;if(!b.scroll_i)return b.scroll_i=setInterval(a.vakata.dnd._scroll,100),!1;if(c===!0)return!1;var d=b.scroll_e.scrollTop(),e=b.scroll_e.scrollLeft();b.scroll_e.scrollTop(d+b.scroll_t*a.vakata.dnd.settings.scroll_speed),b.scroll_e.scrollLeft(e+b.scroll_l*a.vakata.dnd.settings.scroll_speed),d===b.scroll_e.scrollTop()&&e===b.scroll_e.scrollLeft()||a.vakata.dnd._trigger("scroll",b.scroll_e)},start:function(c,d,e){"touchstart"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=m.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset)),b.is_drag&&a.vakata.dnd.stop({});try{c.currentTarget.unselectable="on",c.currentTarget.onselectstart=function(){return!1},c.currentTarget.style&&(c.currentTarget.style.MozUserSelect="none")}catch(f){}return b.init_x=c.pageX,b.init_y=c.pageY,b.data=d,b.is_down=!0,b.element=c.currentTarget,b.target=c.target,b.is_touch="touchstart"===c.type,e!==!1&&(b.helper=a("<div id='vakata-dnd'></div>").html(e).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),a(m).on("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag),a(m).on("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop),!1},drag:function(c){if("touchmove"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=m.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset)),b.is_down){if(!b.is_drag){if(!(Math.abs(c.pageX-b.init_x)>(b.is_touch?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)||Math.abs(c.pageY-b.init_y)>(b.is_touch?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)))return;b.helper&&(b.helper.appendTo("body"),b.helper_w=b.helper.outerWidth()),b.is_drag=!0,a.vakata.dnd._trigger("start",c)}var d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l=!1,n=!1;return b.scroll_t=0,b.scroll_l=0,b.scroll_e=!1,a(a(c.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(a(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var d=a(this),e=d.offset();return this.scrollHeight>this.offsetHeight&&(e.top+d.height()-c.pageY<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=1),c.pageY-e.top<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(e.left+d.width()-c.pageX<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=1),c.pageX-e.left<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=-1)),b.scroll_t||b.scroll_l?(b.scroll_e=a(this),!1):void 0}),b.scroll_e||(d=a(m),e=a(window),f=d.height(),g=e.height(),h=d.width(),i=e.width(),j=d.scrollTop(),k=d.scrollLeft(),f>g&&c.pageY-j<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=-1),f>g&&g-(c.pageY-j)<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_t=1),h>i&&c.pageX-k<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=-1),h>i&&i-(c.pageX-k)<a.vakata.dnd.settings.scroll_proximity&&(b.scroll_l=1),(b.scroll_t||b.scroll_l)&&(b.scroll_e=d)),b.scroll_e&&a.vakata.dnd._scroll(!0),b.helper&&(l=parseInt(c.pageY+a.vakata.dnd.settings.helper_top,10),n=parseInt(c.pageX+a.vakata.dnd.settings.helper_left,10),f&&l+25>f&&(l=f-50),h&&n+b.helper_w>h&&(n=h-(b.helper_w+2)),b.helper.css({left:n+"px",top:l+"px"})),a.vakata.dnd._trigger("move",c),!1}},stop:function(c){if("touchend"===c.type&&c.originalEvent&&c.originalEvent.changedTouches&&c.originalEvent.changedTouches[0]&&(c.pageX=c.originalEvent.changedTouches[0].pageX,c.pageY=c.originalEvent.changedTouches[0].pageY,c.target=m.elementFromPoint(c.originalEvent.changedTouches[0].pageX-window.pageXOffset,c.originalEvent.changedTouches[0].pageY-window.pageYOffset)),b.is_drag)a.vakata.dnd._trigger("stop",c);else if("touchend"===c.type&&c.target===b.target){var d=setTimeout(function(){a(c.target).click()},100);a(c.target).one("click",function(){d&&clearTimeout(d)})}return a.vakata.dnd._clean(),!1}}}($),$.jstree.defaults.massload=null,$.jstree.plugins.massload=function(a,b){this.init=function(a,c){b.init.call(this,a,c),this._data.massload={}},this._load_nodes=function(a,c,d){var e=this.settings.massload;return d&&!$.isEmptyObject(this._data.massload)?b._load_nodes.call(this,a,c,d):$.isFunction(e)?e.call(this,a,$.proxy(function(e){if(e)for(var f in e)e.hasOwnProperty(f)&&(this._data.massload[f]=e[f]);b._load_nodes.call(this,a,c,d)},this)):"object"==typeof e&&e&&e.url?(e=$.extend(!0,{},e),$.isFunction(e.url)&&(e.url=e.url.call(this,a)),$.isFunction(e.data)&&(e.data=e.data.call(this,a)),$.ajax(e).done($.proxy(function(e,f,g){if(e)for(var h in e)e.hasOwnProperty(h)&&(this._data.massload[h]=e[h]);b._load_nodes.call(this,a,c,d)},this)).fail($.proxy(function(e){b._load_nodes.call(this,a,c,d)},this))):b._load_nodes.call(this,a,c,d)},this._load_node=function(a,c){var d=this._data.massload[a.id];return d?this["string"==typeof d?"_append_html_data":"_append_json_data"](a,"string"==typeof d?$($.parseHTML(d)).filter(function(){return 3!==this.nodeType}):d,function(b){c.call(this,b),delete this._data.massload[a.id]}):b._load_node.call(this,a,c)}},$.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},$.jstree.plugins.search=function(a,b){this.bind=function(){b.bind.call(this),this._data.search.str="",this._data.search.dom=$(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",$.proxy(function(a,b){if(this._data.search.som&&b.res.length){var c,d,e=this._model.data,f=[];for(c=0,d=b.res.length;d>c;c++)e[b.res[c]]&&!e[b.res[c]].state.hidden&&(f.push(b.res[c]),f=f.concat(e[b.res[c]].parents),this._data.search.smc&&(f=f.concat(e[b.res[c]].children_d)));f=$.vakata.array_remove_item($.vakata.array_unique(f),$.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(f)}},this)).on("clear_search.jstree",$.proxy(function(a,b){this._data.search.som&&b.res.length&&this.show_node(this._data.search.hdn)},this))},this.search=function(a,b,c,d,e,f){if(a===!1||""===$.trim(a.toString()))return this.clear_search();d=this.get_node(d),d=d&&d.id?d.id:null,a=a.toString();var g,h,i=this.settings.search,j=i.ajax?i.ajax:!1,k=this._model.data,l=null,m=[],n=[];if(this._data.search.res.length&&!e&&this.clear_search(),void 0===c&&(c=i.show_only_matches),void 0===f&&(f=i.show_only_matches_children),!b&&j!==!1)return $.isFunction(j)?j.call(this,a,$.proxy(function(b){b&&b.d&&(b=b.d),this._load_nodes($.isArray(b)?$.vakata.array_unique(b):[],function(){this.search(a,!0,c,d,e)},!0)},this),d):(j=$.extend({},j),j.data||(j.data={}),j.data.str=a,d&&(j.data.inside=d),$.ajax(j).fail($.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(j)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done($.proxy(function(b){b&&b.d&&(b=b.d),this._load_nodes($.isArray(b)?$.vakata.array_unique(b):[],function(){this.search(a,!0,c,d,e)},!0)},this)));if(e||(this._data.search.str=a,this._data.search.dom=$(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=c,this._data.search.smc=f),l=new $.vakata.search(a,!0,{caseSensitive:i.case_sensitive,fuzzy:i.fuzzy}),$.each(k[d?d:$.jstree.root].children_d,function(b,c){var d=k[c];d.text&&(!i.search_leaves_only||d.state.loaded&&0===d.children.length)&&(i.search_callback&&i.search_callback.call(this,a,d)||!i.search_callback&&l.search(d.text).isMatch)&&(m.push(c),n=n.concat(d.parents))}),m.length){for(n=$.vakata.array_unique(n),g=0,h=n.length;h>g;g++)n[g]!==$.jstree.root&&k[n[g]]&&this.open_node(n[g],null,0)===!0&&this._data.search.opn.push(n[g]);e?(this._data.search.dom=this._data.search.dom.add($(this.element[0].querySelectorAll("#"+$.map(m,function(a){return-1!=="0123456789".indexOf(a[0])?"\\3"+a[0]+" "+a.substr(1).replace($.jstree.idregex,"\\$&"):a.replace($.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=$.vakata.array_unique(this._data.search.res.concat(m))):(this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(m,function(a){return-1!=="0123456789".indexOf(a[0])?"\\3"+a[0]+" "+a.substr(1).replace($.jstree.idregex,"\\$&"):a.replace($.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=m),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:a,res:this._data.search.res,show_only_matches:c})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(this._data.search.res,function(a){return-1!=="0123456789".indexOf(a[0])?"\\3"+a[0]+" "+a.substr(1).replace($.jstree.idregex,"\\$&"):a.replace($.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=$()},this.redraw_node=function(a,c,d,e){if(a=b.redraw_node.apply(this,arguments),a&&-1!==$.inArray(a.id,this._data.search.res)){var f,g,h=null;for(f=0,g=a.childNodes.length;g>f;f++)if(a.childNodes[f]&&a.childNodes[f].className&&-1!==a.childNodes[f].className.indexOf("jstree-anchor")){h=a.childNodes[f];break}h&&(h.className+=" jstree-search")}return a}},function(a){a.vakata.search=function(b,c,d){d=d||{},d=a.extend({},a.vakata.search.defaults,d),d.fuzzy!==!1&&(d.fuzzy=!0),b=d.caseSensitive?b:b.toLowerCase();var e,f,g,h,i=d.location,j=d.distance,k=d.threshold,l=b.length;return l>32&&(d.fuzzy=!1),d.fuzzy&&(e=1<<l-1,f=function(){var a={},c=0;for(c=0;l>c;c++)a[b.charAt(c)]=0;for(c=0;l>c;c++)a[b.charAt(c)]|=1<<l-c-1;return a}(),g=function(a,b){var c=a/l,d=Math.abs(i-b);return j?c+d/j:d?1:c}),h=function(a){if(a=d.caseSensitive?a:a.toLowerCase(),b===a||-1!==a.indexOf(b))return{isMatch:!0,score:0};if(!d.fuzzy)return{isMatch:!1,score:1};var c,h,j,m,n,o,p,q,r,s=a.length,t=k,u=a.indexOf(b,i),v=l+s,w=1,x=[];for(-1!==u&&(t=Math.min(g(0,u),t),u=a.lastIndexOf(b,i+l),-1!==u&&(t=Math.min(g(0,u),t))),u=-1,c=0;l>c;c++){for(j=0,m=v;m>j;)g(c,i+m)<=t?j=m:v=m,m=Math.floor((v-j)/2+j);for(v=m,o=Math.max(1,i-m+1),p=Math.min(i+m,s)+l,q=new Array(p+2),q[p+1]=(1<<c)-1,h=p;h>=o;h--)if(r=f[a.charAt(h-1)],0===c?q[h]=(q[h+1]<<1|1)&r:q[h]=(q[h+1]<<1|1)&r|((n[h+1]|n[h])<<1|1)|n[h+1],q[h]&e&&(w=g(c,h-1),t>=w)){if(t=w,u=h-1,x.push(u),!(u>i))break;o=Math.max(1,2*i-u)}if(g(c+1,i)>t)break;n=q}return{isMatch:u>=0,score:w}},c===!0?{search:h}:h(c)},a.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}($),$.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},$.jstree.plugins.sort=function(a,b){this.bind=function(){b.bind.call(this),this.element.on("model.jstree",$.proxy(function(a,b){this.sort(b.parent,!0)},this)).on("rename_node.jstree create_node.jstree",$.proxy(function(a,b){this.sort(b.parent||b.node.parent,!1),this.redraw_node(b.parent||b.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",$.proxy(function(a,b){this.sort(b.parent,!1),this.redraw_node(b.parent,!0)},this))},this.sort=function(a,b){var c,d;if(a=this.get_node(a),a&&a.children&&a.children.length&&(a.children.sort($.proxy(this.settings.sort,this)),b))for(c=0,d=a.children_d.length;d>c;c++)this.sort(a.children_d[c],!1)}};var p=!1;$.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},$.jstree.plugins.state=function(a,b){this.bind=function(){b.bind.call(this);var a=$.proxy(function(){this.element.on(this.settings.state.events,$.proxy(function(){p&&clearTimeout(p),p=setTimeout($.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",$.proxy(function(b,c){this.element.one("restore_state.jstree",a),this.restore_state()||a()},this))},this.save_state=function(){var a={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};$.vakata.storage.set(this.settings.state.key,JSON.stringify(a))},this.restore_state=function(){var a=$.vakata.storage.get(this.settings.state.key);if(a)try{a=JSON.parse(a)}catch(b){return!1}return a&&a.ttl&&a.sec&&+new Date-a.sec>a.ttl?!1:(a&&a.state&&(a=a.state),a&&$.isFunction(this.settings.state.filter)&&(a=this.settings.state.filter.call(this,a)),a?(this.element.one("set_state.jstree",function(b,c){c.instance.trigger("restore_state",{state:$.extend(!0,{},a)})}),this.set_state(a),!0):!1)},this.clear_state=function(){return $.vakata.storage.del(this.settings.state.key)}},function(a,b){a.vakata.storage={set:function(a,b){return window.localStorage.setItem(a,b)},get:function(a){return window.localStorage.getItem(a)},del:function(a){return window.localStorage.removeItem(a)}}}($),$.jstree.defaults.types={"default":{}},$.jstree.defaults.types[$.jstree.root]={},$.jstree.plugins.types=function(a,b){this.init=function(a,c){var d,e;if(c&&c.types&&c.types["default"])for(d in c.types)if("default"!==d&&d!==$.jstree.root&&c.types.hasOwnProperty(d))for(e in c.types["default"])c.types["default"].hasOwnProperty(e)&&void 0===c.types[d][e]&&(c.types[d][e]=c.types["default"][e]);b.init.call(this,a,c),this._model.data[$.jstree.root].type=$.jstree.root},this.refresh=function(a,c){b.refresh.call(this,a,c),this._model.data[$.jstree.root].type=$.jstree.root},this.bind=function(){this.element.on("model.jstree",$.proxy(function(a,b){var c,d,e=this._model.data,f=b.nodes,g=this.settings.types,h="default";for(c=0,d=f.length;d>c;c++)h="default",e[f[c]].original&&e[f[c]].original.type&&g[e[f[c]].original.type]&&(h=e[f[c]].original.type),e[f[c]].data&&e[f[c]].data.jstree&&e[f[c]].data.jstree.type&&g[e[f[c]].data.jstree.type]&&(h=e[f[c]].data.jstree.type),e[f[c]].type=h,e[f[c]].icon===!0&&void 0!==g[h].icon&&(e[f[c]].icon=g[h].icon);e[$.jstree.root].type=$.jstree.root},this)),b.bind.call(this)},this.get_json=function(a,c,d){var e,f,g=this._model.data,h=c?$.extend(!0,{},c,{no_id:!1}):{},i=b.get_json.call(this,a,h,d);if(i===!1)return!1;if($.isArray(i))for(e=0,f=i.length;f>e;e++)i[e].type=i[e].id&&g[i[e].id]&&g[i[e].id].type?g[i[e].id].type:"default",c&&c.no_id&&(delete i[e].id,i[e].li_attr&&i[e].li_attr.id&&delete i[e].li_attr.id,i[e].a_attr&&i[e].a_attr.id&&delete i[e].a_attr.id);else i.type=i.id&&g[i.id]&&g[i.id].type?g[i.id].type:"default",c&&c.no_id&&(i=this._delete_ids(i));return i},this._delete_ids=function(a){if($.isArray(a)){for(var b=0,c=a.length;c>b;b++)a[b]=this._delete_ids(a[b]);return a}return delete a.id,a.li_attr&&a.li_attr.id&&delete a.li_attr.id,a.a_attr&&a.a_attr.id&&delete a.a_attr.id,a.children&&$.isArray(a.children)&&(a.children=this._delete_ids(a.children)),a},this.check=function(a,c,d,e,f){if(b.check.call(this,a,c,d,e,f)===!1)return!1;c=c&&c.id?c:this.get_node(c),d=d&&d.id?d:this.get_node(d);var g,h,i,j,k=c&&c.id?f&&f.origin?f.origin:$.jstree.reference(c.id):null;switch(k=k&&k._model&&k._model.data?k._model.data:null,a){case"create_node":case"move_node":case"copy_node":if("move_node"!==a||-1===$.inArray(c.id,d.children)){if(g=this.get_rules(d),void 0!==g.max_children&&-1!==g.max_children&&g.max_children===d.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})},!1;if(void 0!==g.valid_children&&-1!==g.valid_children&&-1===$.inArray(c.type||"default",g.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})},!1;if(k&&c.children_d&&c.parents){for(h=0,i=0,j=c.children_d.length;j>i;i++)h=Math.max(h,k[c.children_d[i]].parents.length);h=h-c.parents.length+1}(0>=h||void 0===h)&&(h=1);do{if(void 0!==g.max_depth&&-1!==g.max_depth&&g.max_depth<h)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})},!1;d=this.get_node(d.parent),g=this.get_rules(d),h++}while(d)}}return!0},this.get_rules=function(a){if(a=this.get_node(a),!a)return!1;var b=this.get_type(a,!0);return void 0===b.max_depth&&(b.max_depth=-1),void 0===b.max_children&&(b.max_children=-1),void 0===b.valid_children&&(b.valid_children=-1),b},this.get_type=function(a,b){return a=this.get_node(a),a?b?$.extend({type:a.type},this.settings.types[a.type]):a.type:!1},this.set_type=function(a,b){var c,d,e,f,g;if($.isArray(a)){for(a=a.slice(),d=0,e=a.length;e>d;d++)this.set_type(a[d],b);return!0}return c=this.settings.types,a=this.get_node(a),c[b]&&a?(f=a.type,g=this.get_icon(a),a.type=b,(g===!0||c[f]&&void 0!==c[f].icon&&g===c[f].icon)&&this.set_icon(a,void 0!==c[b].icon?c[b].icon:!0),!0):!1}},$.jstree.defaults.unique={case_sensitive:!1,duplicate:function(a,b){return a+" ("+b+")"}},$.jstree.plugins.unique=function(a,b){this.check=function(a,c,d,e,f){if(b.check.call(this,a,c,d,e,f)===!1)return!1;if(c=c&&c.id?c:this.get_node(c),d=d&&d.id?d:this.get_node(d),!d||!d.children)return!0;var g,h,i="rename_node"===a?e:c.text,j=[],k=this.settings.unique.case_sensitive,l=this._model.data;for(g=0,h=d.children.length;h>g;g++)j.push(k?l[d.children[g]].text:l[d.children[g]].text.toLowerCase());switch(k||(i=i.toLowerCase()),a){case"delete_node":return!0;case"rename_node":return g=-1===$.inArray(i,j)||c.text&&c.text[k?"toString":"toLowerCase"]()===i,g||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+i+" already exists. Preventing: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})}),g;case"create_node":return g=-1===$.inArray(i,j),g||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+i+" already exists. Preventing: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})}),g;case"copy_node":return g=-1===$.inArray(i,j),g||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+i+" already exists. Preventing: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})}),g;case"move_node":return g=c.parent===d.id&&(!f||!f.is_multi)||-1===$.inArray(i,j),g||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+i+" already exists. Preventing: "+a,data:JSON.stringify({chk:a,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})}),g}return!0},this.create_node=function(a,c,d,e,f){if(!c||void 0===c.text){if(null===a&&(a=$.jstree.root),a=this.get_node(a),!a)return b.create_node.call(this,a,c,d,e,f);if(d=void 0===d?"last":d,!d.toString().match(/^(before|after)$/)&&!f&&!this.is_loaded(a))return b.create_node.call(this,a,c,d,e,f);c||(c={});var g,h,i,j,k,l=this._model.data,m=this.settings.unique.case_sensitive,n=this.settings.unique.duplicate;for(h=g=this.get_string("New node"),i=[],j=0,k=a.children.length;k>j;j++)i.push(m?l[a.children[j]].text:l[a.children[j]].text.toLowerCase());for(j=1;-1!==$.inArray(m?h:h.toLowerCase(),i);)h=n.call(this,g,++j).toString();c.text=h}return b.create_node.call(this,a,c,d,e,f)}};var q=m.createElement("DIV");if(q.setAttribute("unselectable","on"),q.setAttribute("role","presentation"),q.className="jstree-wholerow",q.innerHTML="&#160;",$.jstree.plugins.wholerow=function(a,b){this.bind=function(){b.bind.call(this),this.element.on("ready.jstree set_state.jstree",$.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",$.proxy(function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",$.proxy(function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var c,d,e=!1;for(c=0,d=b.selected.length;d>c;c++)e=this.get_node(b.selected[c],!0),e&&e.length&&e.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",$.proxy(function(a,b){this.get_node(b.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",$.proxy(function(a,b){"hover_node"===a.type&&this.is_disabled(b.node)||this.get_node(b.node,!0).children(".jstree-wholerow")["hover_node"===a.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(a){a.preventDefault();var b=$.Event("contextmenu",{metaKey:a.metaKey,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,pageX:a.pageX,pageY:a.pageY});$(a.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(b)},this)).on("click.jstree",".jstree-wholerow",function(a){a.stopImmediatePropagation();var b=$.Event("click",{metaKey:a.metaKey,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey});$(a.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(b).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(a){a.stopImmediatePropagation();var b=$.Event("click",{metaKey:a.metaKey,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey});$(a.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(b).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(a){return a.stopImmediatePropagation(),this.is_disabled(a.currentTarget)||this.hover_node(a.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",$.proxy(function(a){this.dehover_node(a.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),b.teardown.call(this)},this.redraw_node=function(a,c,d,e){if(a=b.redraw_node.apply(this,arguments)){var f=q.cloneNode(!0);-1!==$.inArray(a.id,this._data.core.selected)&&(f.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===a.id&&(f.className+=" jstree-wholerow-hovered"),a.insertBefore(f,a.childNodes[0])}return a}},m.registerElement&&Object&&Object.create){var r=Object.create(HTMLElement.prototype);r.createdCallback=function(){var a,b={core:{},plugins:[]};for(a in $.jstree.plugins)$.jstree.plugins.hasOwnProperty(a)&&this.attributes[a]&&(b.plugins.push(a),this.getAttribute(a)&&JSON.parse(this.getAttribute(a))&&(b[a]=JSON.parse(this.getAttribute(a))));for(a in $.jstree.defaults.core)$.jstree.defaults.core.hasOwnProperty(a)&&this.attributes[a]&&(b.core[a]=JSON.parse(this.getAttribute(a))||this.getAttribute(a));$(this).jstree(b)};try{m.registerElement("vakata-jstree",{prototype:r})}catch(s){}}$.jstree.defaults.added=d.defaults,$.jstree.plugins.added=d.structure}}),define("plugins/datatree/extend/plugin.added",[],function(a,b,c){var d=document.createElement("input");d.className="jstree-input form-control ",d.setAttribute("type","text"),c.exports={defaults:{number:!0},structure:function(a,b){this.bind=function(){b.bind.call(this)},this.redraw_node=function(){if(node=b.redraw_node.apply(this,arguments),node){var a=d.cloneNode(!1);a.setAttribute("name",node.id),a.setAttribute("value",b._data.added[node.id]),node.insertBefore(a,node[0]),$(a).change(function(){$(node).data("val",$(this).val());var a=$(this).attr("name");b._data.added[a]=$(this).val()})}return node},this.load_node=function(){return b.load_node.apply(this,arguments)},this.trigger=function(){var c=arguments[0],d=a.numberSpinner||{};"open_node"===c&&$p.numberSpinner(".jstree-input",$.extend({verticalbuttons:!1},d)),b.trigger.apply(this,arguments)}}}});